<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Linux Systems Administration</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='jquery.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch store.js from local - TODO add CDN when 2.x.x is available on cdnjs -->
        <script src="store.js"></script>

    </head>
    <body class="light">
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = store.get('mdbook-theme');
            if (theme === null || theme === undefined) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = store.get('mdbook-sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter"><li><a href="./linux-sysadmin.html"><strong>1.</strong> Linux Systems Administration</a></li><li><a href="./p1-system-basics.html"><strong>2.</strong> System Basics</a></li><li><ul class="section"><li><a href="./01-history-linux-unix.html"><strong>2.1.</strong> History of Unix and Linux</a></li><li><a href="./02-quick-ssh-connect.html"><strong>2.2.</strong> Connect to a Remote Server</a></li><li><a href="./03-filesystem-file-management.html"><strong>2.3.</strong> Linux Filesystems and File Management</a></li><li><a href="./04-file-attributes.html"><strong>2.4.</strong> File Attributes</a></li><li><a href="./05-text-processing-part-1.html"><strong>2.5.</strong> Text Processing, Part 1</a></li><li><a href="./06-text-processing-part-2.html"><strong>2.6.</strong> Text Processing, Part 2</a></li><li><a href="./07-text-editors.html"><strong>2.7.</strong> Text Editors</a></li><li><a href="./08-revisiting-paths.html"><strong>2.8.</strong> Revisiting Paths</a></li><li><a href="./09-bash-scripting.html"><strong>2.9.</strong> Bash Scripting</a></li><li><a href="./10-regular-expressions.html"><strong>2.10.</strong> Regular Expressions</a></li></ul></li><li><a href="./p2-managing-services-software.html"><strong>3.</strong> Managing Services and Software</a></li><li><ul class="section"><li><a href="./11-using-gcloud.html"><strong>3.1.</strong> Using gcloud for Virtual Machines</a></li><li><a href="./12-logical-volumes.html"><strong>3.2.</strong> Logical Volume Management</a></li><li><a href="./13-virtualbox-nat.html"><strong>3.3.</strong> Using NAT in VirtualBox</a></li><li><a href="./14-webconsole-nat.html"><strong>3.4.</strong> NAT Table in VirtualBox</a></li><li><a href="./15-managing-users-groups.html"><strong>3.5.</strong> Managing Users and Groups</a></li><li><a href="./16-systemd.html"><strong>3.6.</strong> systemd</a></li><li><a href="./17-backup-and-using-dnf.html"><strong>3.7.</strong> Backups and DNF</a></li></ul></li><li><a href="./p3-networking-security.html"><strong>4.</strong> Networking and Security</a></li><li><ul class="section"><li><a href="./18-tcip-networking.html"><strong>4.1.</strong> TCIP Networking</a></li><li><a href="./19-networking-dns-domains.html"><strong>4.2.</strong> DNS and Domain Names</a></li><li><a href="./20-security-chroot.html"><strong>4.3.</strong> Security and chroot</a></li><li><a href="./21-security-firewall.html"><strong>4.4.</strong> Security and Firewalls</a></li></ul></li><li><a href="./p4-lamp.html"><strong>5.</strong> Creating a LAMP Server</a></li><li><ul class="section"><li><a href="./22-httpd-apache.html"><strong>5.1.</strong> Apache2 Web Server</a></li><li><a href="./23-httpd-php.html"><strong>5.2.</strong> Apache2 and PHP</a></li><li><a href="./24-httpd-virtualhosts.html"><strong>5.3.</strong> Apache2 and Virtual Hosts</a></li><li><a href="./25-httpd-mysql.html"><strong>5.4.</strong> Apache2 and MySQL</a></li></ul></li></ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page" tabindex="-1">
                
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars" title="Toggle sidebar"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush" title="Change theme"></i>
                    </div>

                    <h1 class="menu-title">Linux Systems Administration</h1>

                    <div class="right-buttons">
                        <a href="print.html">
                            <i id="print-button" class="fa fa-print" title="Print this book"></i>
                        </a>
                    </div>
                </div>

                <div id="content" class="content">
                    <a class="header" href="print.html#linux-systems-administration" id="linux-systems-administration"><h1>Linux Systems Administration</h1></a>
<p>Author: C. Sean Burns<br />
Date: 2022-07-09<br />
Email: <a href="sean.burns@uky.edu">sean.burns@uky.edu</a><br />
Twitter: <a href="https://twitter.com/cseanburns">@cseanburns</a><br />
Website: <a href="https://cseanburns.net">cseanburns.net</a></p>
<p>This short book is based on a series of lectures
and demonstrations
for my course on Linux Systems Administration.</p>
<p>This is a very rough draft
that used VirtualBox and the Fedora distribution.
I am in the process of converting content here
to demonstrate Google Cloud (gcloud)
and the Ubuntu distribution
for the Fall 2022 semester.</p>
<a class="header" href="print.html#introduction" id="introduction"><h1>Introduction</h1></a>
<p>This section is an intro to Linux, its history, and its basic usage.</p>
<a class="header" href="print.html#history-of-unix-and-linux" id="history-of-unix-and-linux"><h1>History of Unix and Linux</h1></a>
<a class="header" href="print.html#location-bell-labs-part-of-att-new-jersey-late-1960s-through-early-1970s" id="location-bell-labs-part-of-att-new-jersey-late-1960s-through-early-1970s"><h2>Location: Bell Labs, part of AT&amp;T (New Jersey), late 1960s through early 1970s</h2></a>
<ul>
<li>Starts with an operating system called Multics.</li>
<li>Multics was a time sharing system
<ul>
<li>That is, more than one person could use it at once.</li>
</ul>
</li>
<li>But Multics had issues and was slowly abandoned</li>
<li><a href="http://cs.bell-labs.co/who/ken/">Ken Thompson</a> found an old PDP-7. Started to write UNIX.
<ul>
<li>The <a href="https://en.wikipedia.org/wiki/Ed_(text_editor)">ed</a> line editor was written.</li>
<li>Pronounced e.d. but generally sounded out.</li>
</ul>
</li>
<li>This version of UNIX would later be referred to as <em>Research Unix</em></li>
<li><a href="https://www.bell-labs.com/usr/dmr/www/">Dennis Ritchie</a>, the creator of the C programming language,
joined Thompson's efforts.</li>
</ul>
<a class="header" href="print.html#location-berkeley-ca-university-of-california-berkeley-early-to-mid-1970s" id="location-berkeley-ca-university-of-california-berkeley-early-to-mid-1970s"><h2>Location: Berkeley, CA (University of California, Berkeley), early to mid 1970s</h2></a>
<ul>
<li>The code for UNIX was not 'free software'
but low cost and easily shared.</li>
<li>Ken Thompson visited Berkeley and helped install <a href="https://en.wikipedia.org/wiki/Berkeley_Software_Distribution">Version 6 of UNIX</a></li>
<li><a href="https://en.wikipedia.org/wiki/Bill_Joy">Bill Joy</a> and others contributed heavily
<ul>
<li>Joy created the <a href="https://sites.google.com/a/bostic.com/keithbostic/vi/">vi</a> text editor,
a descendant of the popular <a href="https://www.vim.org/">Vim</a> editor,
many other important programs, and was a co-founder of Sun Microsystems</li>
</ul>
</li>
<li>This installation of UNIX would eventually become known
as the Berkeley Software Distribution, or BSD.</li>
</ul>
<a class="header" href="print.html#att" id="att"><h2>AT&amp;T</h2></a>
<ul>
<li>Until its breakup in 1984,
AT&amp;T was not allowed to profit off patents
that were not directly related to its telecommunications businesses.</li>
<li>This agreement with the US government helped
protect the company from monopolistic charges,
and as a result, they could not commercialize UNIX.</li>
<li>This changed after the breakup.
System V UNIX became the standard bearer of commercial UNIX.</li>
</ul>
<a class="header" href="print.html#location-boston-ma-mit-early-1980s-through-early-1990s" id="location-boston-ma-mit-early-1980s-through-early-1990s"><h2>Location: Boston, MA (MIT), early 1980s through early 1990s</h2></a>
<ul>
<li>In the late 1970s, <a href="https://en.wikipedia.org/wiki/Richard_Stallman">Richard Stallman</a> noticed
that software began to become commercialized.
<ul>
<li>As a result, hardware vendors stopped sharing
the code they developed to make their hardware work.</li>
</ul>
</li>
<li>Software code became eligible for copyright protection with
the Copyright Act of 1976</li>
<li>Stallman, who thrived in a <em>hacker culture</em>,
began to battle against this turn of events.</li>
<li>Stallman created the <a href="https://www.gnu.org/gnu/gnu.html">GNU project</a>,
the free software philosophy, GNU Emacs,
a popular and important text editor,
and he wrote many other programs.</li>
<li>The GNU project is an attempt to create a completely
<strong>free software</strong> operating system,
that was Unix-like, called GNU.</li>
<li>By the early 1990s, Stallman and others had developed
all the utilities needed to have a full operating system,
except for a kernel, which they called <a href="https://www.gnu.org/software/hurd/">GNU Hurd</a>.</li>
<li>This included the Bash shell, written by <a href="https://opuslogica.com/">Brian Fox</a>.</li>
<li>The GNU philosophy includes several propositions
that define free software:</li>
</ul>
<blockquote>
<p>The four freedoms, per GNU Project:</p>
<ol start="0">
<li>The freedom to run the program as you wish,
for any purpose (freedom 0).</li>
<li>The freedom to study how the program works,
and change it so it does your computing as you wish (freedom 1).
Access to the source code is a precondition for this.</li>
<li>The freedom to redistribute copies so you can help others (freedom 2).</li>
<li>The freedom to distribute copies of your modified
versions to others (freedom 3).
By doing this you can give the whole community a chance
to benefit from your changes.
Access to the source code is a precondition for this.</li>
</ol>
</blockquote>
<p><a href="https://www.gnu.org/philosophy/free-sw.html">The Four Freedoms</a></p>
<a class="header" href="print.html#the-unix-wars-and-the-lawsuit-late-1980s-through-the-early-1990s" id="the-unix-wars-and-the-lawsuit-late-1980s-through-the-early-1990s"><h2>The Unix wars and the lawsuit, late 1980s through the early 1990s</h2></a>
<ul>
<li>AT&amp;T, after its breakup, began to commercialize Unix,
and differences in AT&amp;T Unix and BSD Unix arose.</li>
<li>The former was aimed at commercialization,
and the latter aimed at researchers and academics.</li>
<li>UNIX Systems Laboratories, Inc. (USL, part of AT&amp;T)
sued Berkeley Software Design, Inc.
(BSDi, part of the University of California, Berkeley)
for copyright and trademark violations.</li>
<li>USL ultimately lost the case,
but the lawsuit delayed adoption of BSD Unix.</li>
</ul>
<a class="header" href="print.html#linux-linus-torvalds-university-of-helsinki-finland-early-1990s" id="linux-linus-torvalds-university-of-helsinki-finland-early-1990s"><h2>Linux, Linus Torvalds, University of Helsinki, Finland, early 1990s</h2></a>
<ul>
<li>On August 25, 1991, <a href="https://www.cs.helsinki.fi/u/torvalds/">Linus Torvalds</a>
announced that he had started working on a <strong>free</strong>
operating system kernel for the 386 CPU architecture
and for his specific hardware.</li>
<li>This <a href="https://www.kernel.org/">kernel</a> would later be named <strong>Linux</strong>.</li>
<li>Linux technically refers only to the kernel.
<ul>
<li>An operating system kernel handles startup,
devices, memory, resources, etc.</li>
<li>A kernel does not provide userland utilities---the
kinds of software they people use when using computers.</li>
</ul>
</li>
<li>Torvalds' motivation was to learn about OS development
but also to have access to a Unix-like system.
<ul>
<li>He already had access to an Unix-like system
called <a href="https://www.minix3.org/">MINIX</a>,
but MINIX had technical and copyright restrictions.</li>
</ul>
</li>
<li>Torvalds has stated that if a BSD or
if GNU Hurd operating system were available,
then he may not have created the Linux kernel.</li>
<li>But Torvalds and others took the GNU utilities
and created what is now called Linux or GNU/Linux.</li>
</ul>
<a class="header" href="print.html#distributions-early-1990s-through-today" id="distributions-early-1990s-through-today"><h2>Distributions, early 1990s through today</h2></a>
<ul>
<li>Soon after the Linux development,
people would create their own Linux and
GNU based operating systems and would distribute them.</li>
<li>As such, these Linux operating systems became
referred to as <em>distributions</em>.</li>
<li>The two oldest distributions that are still in
active development include:
<ul>
<li><a href="http://www.slackware.com/">Slackware</a></li>
<li><a href="https://www.debian.org/">Debian</a></li>
</ul>
</li>
</ul>
<a class="header" href="print.html#short-history-of-bsd-1970s-through-today" id="short-history-of-bsd-1970s-through-today"><h2>Short History of BSD, 1970s through today</h2></a>
<ul>
<li>Unix version numbers 1-6 eventually led to BSD 1-4.</li>
<li>At BSD 4.3, all versions had some AT&amp;T code.
<ul>
<li>Desire to remove this code led to BSD Net/1.</li>
</ul>
</li>
<li>All AT&amp;T code was removed by BSD Net/2.</li>
<li>BSD Net/2 was ported to the Intel 386 processor.
<ul>
<li>This became 386BSD and was made available in 1992,
a year after the Linux kernel was released.</li>
</ul>
</li>
<li>386BSD split into two projects:
<ul>
<li><a href="https://www.netbsd.org/">NetBSD</a></li>
<li><a href="https://www.freebsd.org/">FreeBSD</a></li>
</ul>
</li>
<li>NetBSD split into another project: <a href="https://www.openbsd.org/">OpenBSD</a>.</li>
<li>All three of these BSDs are still in active development.</li>
<li>From a bird's eye point of view, they each have different focuses:
<ul>
<li>NetBSD focuses on portability (MacOS, NASA)</li>
<li>FreeBSD focuses on wide applicability
(WhatsApp, Netflix, PlayStation 4, MacOS)</li>
<li>OpenBSD focuses on security
(has contributed a number of very important applications)</li>
</ul>
</li>
</ul>
<blockquote>
<p>MacOS is based on <a href="http://www.puredarwin.org/">Darwin</a>,
is <a href="https://www.opengroup.org/membership/forums/platform/unix">technically UNIX</a>, and is
partly based on FreeBSD with some code
coming from the other BSDs.
See <a href="https://apple.stackexchange.com/questions/401832/why-is-macos-often-referred-to-as-darwin">Why is macOS often referred to as 'Darwin'?</a>
for a short history.</p>
</blockquote>
<a class="header" href="print.html#short-history-of-gnu-1980s-through-today" id="short-history-of-gnu-1980s-through-today"><h2>Short History of GNU, 1980s through today</h2></a>
<ul>
<li>The GNU Hurd is still under active development,
but it's the pre-production state.</li>
<li>The last release was 0.9 on December 2016.</li>
<li>A complete OS based on the GNU Hurd can be downloaded and ran.
For example: <a href="https://www.debian.org/ports/hurd/">Debian GNU/Hurd</a></li>
</ul>
<a class="header" href="print.html#free-and-open-source-licenses" id="free-and-open-source-licenses"><h2>Free and Open Source Licenses</h2></a>
<p>In the free software and open source landscape,
there are several important free and/or open source
licenses that are used.
The two biggest software licenses are
based on the software used by GNU/Linux
and the software based on the BSDs.
They each take very different approaches to free
and/or open source software.
The biggest difference is this:</p>
<ul>
<li>Software based on software licensed under the GPL
must also be licensed under the GPL.
This is referred to as <a href="https://www.gnu.org/licenses/copyleft.en.html">copyleft</a> software,
and the idea is to propagate free software.
<ul>
<li><a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GNU General Public License (GPL)</a></li>
</ul>
</li>
<li>Software based on software licensed under the BSD
license may be closed source and
primarily must only attribute the original source code and author.
<ul>
<li><a href="https://opensource.org/licenses/BSD-3-Clause">BSD License</a></li>
</ul>
</li>
</ul>
<a class="header" href="print.html#quick-ssh-connect" id="quick-ssh-connect"><h1>Quick SSH Connect</h1></a>
<p>Later in the semester, each of you will install virtual machine software so
that you can install a Linux operating system and manage it on your own
computer. Until then, we will need to connect to a remote server in order to
acquire some basic Linux command line skills. To do that, we will use what is
called <a href="https://en.wikipedia.org/wiki/Secure_Shell">SSH</a>, or <a href="https://www.openssh.com/">Secure Shell</a>.</p>
<p>How you use SSH will depend on which operating system or OS version you are
using. If you are using a macOS computer, then everything I do in this video
will be exactly the same for you. To get started on macOS, use SpotLight to
search for the <em>terminal.app</em> and open it. You will see a command line prompt
similar to mine (although by default, I think macOS uses black text on a white
background, but you can configure this in the app preferences).</p>
<p>If you are on a Windows machine, then I hope you are using at version 10. If
so, then you can install a <em>SSH client</em>. I don't use Windows and can't create a
video for you, but I found one that looks pretty helpful. Follow the
instructions in that video and see if it works for you. Alternatively, below is
a link to some other instructions. I am not sure which one is more current, but
between the two, you should be able to figure it out:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=xIfzZXHaCzQ">How to enable and install Built-in SSH in Windows 10 using the windows
command prompt or powershell</a></li>
<li><a href="https://www.howtogeek.com/336775/how-to-enable-and-use-windows-10s-built-in-ssh-commands/">How to Enable and Use Windows 10’s New Built-in SSH
Commands</a></li>
</ul>
<p>If neither of those work for you, then you should install <a href="https://www.chiark.greenend.org.uk/%7Esgtatham/putty/">PuTTY</a>. This is
a great app, and since it's available on Linux, I will show you how to use it
in this video.</p>
<a class="header" href="print.html#linux-and-macos" id="linux-and-macos"><h2>Linux and macOS</h2></a>
<ul>
<li>Open terminal</li>
<li>type: <code>ssh username@ip-address</code></li>
<li>Enter your password</li>
<li>type <code>less README</code></li>
<li>press <code>q</code></li>
<li>type <code>exit</code> to exit the session</li>
</ul>
<a class="header" href="print.html#windows-with-putty" id="windows-with-putty"><h2>Windows with PuTTY</h2></a>
<ul>
<li>Open PuTTY</li>
<li>Enter IP Address in field marked <em>Host Name (or IP address)</em></li>
<li>Click Open at the bottom</li>
<li>Enter your username at the prompt: <code>login as:</code></li>
<li>Enter your password</li>
<li>type <code>less README</code></li>
<li>press <code>q</code></li>
<li>type <code>exit</code> to exit the session</li>
</ul>
<a class="header" href="print.html#putty-configuration" id="putty-configuration"><h2>PuTTY Configuration</h2></a>
<p>If you use PuTTY, then you can configure font size and screen colors, if you
want. The default font size is too small for me, and so that's something I'd
change right away. To change the font size, in the PuTTY window:</p>
<ul>
<li>Click on <em>Fonts</em> under the <em>Window</em> category</li>
<li>Click on <em>Change...</em> next to the item labeled <em>Font used for ordinary text</em>.</li>
<li>Select the font and size that you prefer</li>
</ul>
<p>That's all for today. Keep these notes and next week we start to connect to our
remote Linux server in order to learn some command line basics.</p>
<a class="header" href="print.html#the-linuxunix-filesystem-and-file-types" id="the-linuxunix-filesystem-and-file-types"><h1>The Linux/Unix Filesystem and File Types</h1></a>
<p>In this demo, we will cover the:</p>
<ul>
<li>the Linux filesystem and how it is structured and organized, and</li>
<li>the basic commands to navigate around and to work with directories and files</li>
</ul>
<blockquote>
<p>The terms <strong>directories</strong> and <strong>folders</strong> are synonymous, but
as users of primarily graphical user interfaces,
you are more likely familiar with the term <strong>folders</strong>.
I will more often use the term <strong>directories</strong>
since that is the command line (text user interface) convention.
I will use the term <strong>folders</strong> when referring to a graphical environment.</p>
</blockquote>
<p>Throughout this demonstration,
I encourage you to <code>ssh</code> into our remote server
and follow along with the commands that I use.
See <a href="02-quick-ssh-connect.html">Section 2.2</a>
for details on connecting to the remote server.</p>
<a class="header" href="print.html#visualizing-the-filesystem-as-a-tree" id="visualizing-the-filesystem-as-a-tree"><h2>Visualizing the Filesystem as a Tree</h2></a>
<p>We will need to work within the filesystem
quite a lot in this course,
but the term <strong>filesystem</strong> may refer to different concepts,
and it's important to clear that up before we start.</p>
<p>In come cases, a <strong>filesystem</strong> refers to how data (files)
are <a href="https://en.wikipedia.org/wiki/File_system">stored and retrieved</a>
on a device like a hard drive, USB drive, etc.
For example, macOS uses the <a href="https://support.apple.com/guide/disk-utility/file-system-formats-available-in-disk-utility-dsku19ed921c/mac">Apple File System (APFS)</a> by default,
and Windows uses the <a href="https://docs.microsoft.com/en-us/troubleshoot/windows-client/backup-and-storage/fat-hpfs-and-ntfs-file-systems">New Technology File System (NTFS)</a>.
Linux and other unix-like operating systems use a variety of filesystems, but
presently, the two major ones are <strong>ext4</strong> and <strong>btrfs</strong>.
The former is the default filesystem on distributions
like <a href="https://www.debian.org/">Debian</a> and <a href="https://ubuntu.com">Ubuntu</a>;
the latter is the default on the
<a href="https://getfedora.org/">Fedora</a> and <a href="https://www.opensuse.org/">openSUSE</a> distributions.
<a href="https://opensource.com/article/18/4/ext4-filesystem">Opensource.com</a> has a nice overview of filesystems under this concept,
and we will learn how to use some of them later in the semester
when we create partitions, manage disk volumes, and learn about backups.</p>
<p>A <strong>filesystem</strong> might also be used to refer
to the <strong>directory structure</strong> or <a href="https://refspecs.linuxfoundation.org/FHS_3.0/fhs/ch01.html">directory tree</a> of a system.
This concept is related to the prior concept of a filesystem, but
it's used here to refer to the location of files and directories on a system.
For example, on Windows, the filesystem is identified by a letter, like the <strong>C:</strong> drive,
regardless if the disk has a NTFS filesystem or a FAT filesystem.
Additional drives (e.g., extra hard drives, USB drives, DVD drives, etc.),
will be assigned their own letters (<strong>A:</strong>, <strong>B:</strong>, <strong>D:</strong>, etc.).
<a href="https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html">macOS adheres to a tree like filesystem</a>
like Linux and other unix-like operating systems.
(This is because macOS is UNIX.)
In these operating systems, we have a top-level <strong>root</strong> directory
identified by a single forward slash  <strong>/</strong>,
and then subdirectories under that root directory.
Additional drives (e.g., extra hard drives, USB drives, DVD drives, etc.) are <strong>mounted</strong>
under that root hierarchy and not separately like on Windows.
<a href="https://www.linux.com/tutorials/linux-filesystem-explained/">Linux.com</a> provides a nice overview of the most common directory structure
that Linux distributions use along with an explanation for the major bottom level directories.
In this section, we will learn about this type of filesystem.</p>
<p>On Linux, we can visualize the filesystem with the <code>tree</code> command.
The <code>tree</code> command, like many Linux commands,
can be run on its own or with options,
like in the second example below:</p>
<ul>
<li><code>tree</code> : list contents of directories in a tree-like format
<ul>
<li><code>tree -dfL 1</code> : directories only, full path, one level</li>
<li><code>tree -dfL 1 /</code> : list directories only at root <strong>/</strong> level</li>
</ul>
</li>
</ul>
<a class="header" href="print.html#the-root-directory-and-its-base-level-directories" id="the-root-directory-and-its-base-level-directories"><h3>The root Directory and its Base Level Directories</h3></a>
<p>As explained on the Linux.com page,
here are the major sub directories under <strong>/</strong> (root)
and a short description of their main purpose:</p>
<ul>
<li><code>/bin</code> : binary files needed to use the system</li>
<li><code>/boot</code>  : files needed to boot the system</li>
<li><code>/dev</code> : device files -- all hardware has a file</li>
<li><code>/etc</code> : system configuration files</li>
<li><code>/home</code> : user directories</li>
<li><code>/lib</code> : libraries/programs needed for other programs</li>
<li><code>/media</code> : external storage is mounted</li>
<li><code>/mnt</code> : other filesystems may be mounted</li>
<li><code>/opt</code> : store software code to compile software</li>
<li><code>/proc</code> : files containing info about your computer</li>
<li><code>/root</code> : home directory of superuser</li>
<li><code>/run</code> : used by system processes</li>
<li><code>/sbin</code> : like <code>/bin</code>, binary files that require superuser privileges</li>
<li><code>/srv</code> : contains data for servers</li>
<li><code>/sys</code> : contains info about devices</li>
<li><code>/tmp</code> : temp files used by applications</li>
<li><code>/usr</code> : user binaries, etc that might be installed by users</li>
<li><code>/var</code> : variable files, used often for system logs</li>
</ul>
<p>Although there are 18 directories listed above
that <strong>branch</strong> off from the root directory,
we will use some more often than others.
For example, the <strong>/etc</strong> directory contains system configuration files,
and we will use the contents of this directory,
along with the <strong>/var</strong> directory,
quite a bit when we set up our web servers, relational database servers,
and more later in the semester.
The <strong>/home</strong> directory is where our default home directories are stored,
and if you manage a multi-user system,
then this will be an important directory to manage.</p>
<p>Source: <a href="https://www.linux.com/tutorials/linux-filesystem-explained/">Linux Filesystem Explained</a></p>
<a class="header" href="print.html#relative-and-absolute-paths" id="relative-and-absolute-paths"><h2>Relative and Absolute Paths</h2></a>
<p>macOS users have the Finder app to navigate their filesystem,
to move files to different folders, to copy files, to trash them, etc.
Window users have File Explorer for these functions.
Linux users have similar graphical software options,
but all of these functions can be completed on the Linux command line, too,
and generally more efficiently.
To get started, we need to learn two things first:</p>
<ol>
<li>how to specify the locations of files and directories in the filesystem</li>
<li>the commands needed to work with the filesystem</li>
</ol>
<p>To help specify the locations of files and directories,
there are two key concepts to know:</p>
<ul>
<li>absolute paths</li>
<li>relative paths</li>
</ul>
<p>Above we learned about the <strong>/</strong> root directory and its subdirectories.
All sorts of commands,
especially those that deal with files and directories
(like copying, moving, deleting),
require us to specify on the command line
the locations of the files and directories.
It's common to specify the location in two different ways,
by specifying their <strong>absolute</strong> path (or location) on the filesystem,
or the <strong>relative</strong> path (or location).</p>
<p>To demonstrate, we might want to move around the filesystem.
When we first log in to our remote system,
our default location will be our home directory,
sometimes referred to as <strong>$HOME</strong>.
The path (location) to that directory will be.</p>
<pre><code>/home/USER
</code></pre>
<p>Where <strong>USER</strong> is your username.
Therefore, since my username is <strong>sean</strong>,
my home directory is located at:</p>
<pre><code>/home/sean
</code></pre>
<p>which we can see specified with the <code>pwd</code> (print working directory) command:</p>
<pre><code>pwd
/home/sean
</code></pre>
<blockquote>
<p>When I write <strong>$HOME</strong>,
I am referring to a default, <strong>environmental</strong> variable
that points to our home directory.
It's <strong>variable</strong> because,
depending on which account we're logged in as,
<strong>$HOME</strong> will point to a different location.
For me, then, that will be <code>/home/sean</code>,
if I'm logged in as <strong>sean</strong>.
For you it'll point to your home directory.</p>
</blockquote>
<p>In my home directory,
I have a subdirectory called <strong>public_html</strong>.
The path to that is:</p>
<pre><code>/home/sean/public_html
</code></pre>
<p>In a program like Finder (macOS) or File Explorer (Windows),
if I want to change my location to that subdirectory (or folder),
then I'd double click on its folder icon.
On the command line, however, I have to write out the command
and the path to the subdirectory.
Therefore, <strong>starting in my home directory</strong>,
I use the following command to switch to the public_html subdirectory:</p>
<pre><code>cd public_html
</code></pre>
<blockquote>
<p>Note that files and directories in Linux are case sensitive.
This means that a directory named <strong>public_html</strong> can co-exist
alongside a directory named <strong>Public_html</strong>.
Or a file named <strong>paper.txt</strong> can co-exist alongside a file
named <strong>Paper.txt</strong>.
So be sure to use the proper case when spelling out files, directories,
and even commands.</p>
</blockquote>
<p>The above is an example of using a relative path, and
that command would only be successful if I were
first in my <strong>$HOME</strong> directory.
That's because I specified the location of <strong>public_html</strong>
relative to my default (<strong>$HOME</strong>) location.</p>
<p>I could have also specified the absolute location,
but this would be the wordier way.
Since the <strong>public_html</strong> directory is in my $HOME directory,
and my $HOME directory is a subdirectory in the <strong>/home</strong> directory,
then to specify the absolute path in the above command,
I'd write:</p>
<pre><code>cd /home/sean/public_html
</code></pre>
<p>Again, the relative path specified above would only work if
I was in my home directory, because
<code>cd public_html</code> is relative to the location of <code>/home/sean</code>.
That is, the subdirectory <strong>public_html</strong> is in <strong>/home/sean</strong>.
But specifying the absolute path would work no matter where
I was located in the filesystem.
For example, if I was working on a file in the <code>/etc/apache2</code> directory,
then using the absolute path (<code>cd /home/sean/public_html</code>) would work.
But the relative path (<code>cd public_html</code>) command would not since
there is no subdirectory called <strong>public_html</strong>
in the <code>/etc/apache2</code> directory.</p>
<p>Understanding relative and absolute paths is
one of the more difficult concepts for new commandline users to learn,
but after time, it'll feel natural.
So just keep practicing, and
I'll go over this throughout the semester.</p>
<a class="header" href="print.html#basic-directory-and-file-commands" id="basic-directory-and-file-commands"><h2>Basic Directory and File commands</h2></a>
<p>In order to explore the above directories
but also to create new ones and work with files,
we need to know some basic terminal commands.
A lot of these commands are part of the base system
called <a href="https://www.gnu.org/software/coreutils/manual/coreutils.html">GNU Coreutils</a>,
and in this demo,
we will specifically cover some of the following
GNU Coreutils:</p>
<ul>
<li><a href="https://www.gnu.org/software/coreutils/manual/coreutils.html#Directory-listing">Directory Listing</a></li>
<li><a href="https://www.gnu.org/software/coreutils/manual/coreutils.html#Basic-operations">Basic Operations</a></li>
<li><a href="https://www.gnu.org/software/coreutils/manual/coreutils.html#Special-file-types">Special File Types</a></li>
<li><a href="https://www.gnu.org/software/coreutils/manual/coreutils.html#Printing-text">Printing Text</a></li>
</ul>
<a class="header" href="print.html#directory-listing" id="directory-listing"><h3>Directory Listing</h3></a>
<blockquote>
<p>I have already demonstrated one command:
the <code>cd</code> (change directory) command.
This will be one of the most frequently used commands in your toolbox.</p>
</blockquote>
<p>In our current directory, or
once we have changed to a new directory,
we will want to learn its contents
(what files and directories it contains).
We have a few commands to choose from to list contents
(e.g.,  you have already seen the <code>tree</code> command),
but the most common command is the <code>ls</code> (list) command.
We use it by typing the following two letters in the terminal:</p>
<pre><code>ls
</code></pre>
<p>Again, to confirm that we're in some specific directory,
use the <code>pwd</code> command to <strong>print</strong> the <strong>working directory</strong>.</p>
<p>Most commands can be combined with <strong>options</strong>.
Options provide additional functionality to the base command, and
in order to see what options are available for the <code>ls</code> command,
we can look at its <strong>man(ual) page</strong>:</p>
<pre><code>man ls
</code></pre>
<p>From the <code>ls</code> <strong>man page</strong>,
we learn that we can use the <code>-l</code> option to format
the output of the <code>ls</code> command as a long-list,
or a list that provides more information about
the files and directories in the working directory.
Later in the semester,
I will talk more about what the other parts of output of this option mean.</p>
<pre><code>ls -l
</code></pre>
<p>We can use the <code>-a</code> option to list hidden files.
In Linux, hidden files are hidden from the base <code>ls</code> command
if the files begin with a period.
We have a some of those files in our <strong>$HOME</strong> directories,
and we can see them like so:</p>
<pre><code>ls -a
</code></pre>
<p>We can also combine options.
For example, to view all files,
including hidden ones,
in the long-list format,
we can use:</p>
<pre><code>ls -al
</code></pre>
<a class="header" href="print.html#basic-file-operations" id="basic-file-operations"><h2>Basic File Operations</h2></a>
<p>Some basic file operation commands include:</p>
<ul>
<li><code>cp</code>    : copying files and directories</li>
<li><code>mv</code>    : moving (or renaming) files and directories</li>
<li><code>rm</code>    : removing (or deleting) files and directories</li>
<li><code>touch</code> : change file timestamps (or, create a new, empty file)</li>
</ul>
<p>These commands also have various options
that can be viewed in their respective <strong>man pages</strong>.
Again, command options provide additional functionality to the base command,
and are mostly (but not always) prepended with a dash and a letter or number.
To see examples, type the following commands,
which will launch the manual pages for them.
Press <code>q</code> to exit the manual pages,
and use your up and down arrow keys to scroll through the manuals:</p>
<pre><code>man cp
man mv
man rm
man touch
</code></pre>
<p>The <code>touch</code> command's primary use is to change a file's timestamp;
that is, the command updates a file's &quot;access and modification times&quot;
(see <code>man touch</code>).
For example, let's say we have a file called <strong>paper.txt</strong>
in our home directory.
We can see the output here:</p>
<pre><code>ls -l paper.txt
-rw-rw-r-- 1 sean sean 0 Jun 27 00:13 /home/sean/paper.txt
</code></pre>
<p>This shows that the last modification time was 12:03AM on June 27.</p>
<p>If I run the touch command on <strong>paper.txt</strong>,
the timestamp will change:</p>
<pre><code>touch paper.txt
-rw-rw-r-- 1 sean sean 0 Jun 27 00:15 /home/sean/paper.txt
</code></pre>
<p>This shows an updated modification timestamp of 12:15AM.</p>
<p>The side effect occurs when we name a file with the <code>touch</code> command,
but the file does not exist,
in which case the <code>touch</code> command will create an empty file
with the name we use.
Let's say that I do <strong>not</strong> have a file named <strong>file.txt</strong>
in my home directory.
If I run the <code>ls -l file.txt</code> command, I'll receive an error
since the file does not exist.
But if I then use the <code>touch file.txt</code> command,
and then run <code>ls -l file.txt</code>.
we'll see that the file now exists,
that it has a byte size of zero:</p>
<pre><code>ls -l file.txt
ls: cannot access 'file.txt': No such file or directory
touch file.txt
ls -l file.txt
-rw-rw-r-- 1 sean sean 0 Jun 27 00:18 file.txt
</code></pre>
<p>Here are some ways to use the other three commands and their options:</p>
<a class="header" href="print.html#copying-files-and-directories" id="copying-files-and-directories"><h3>Copying Files and Directories</h3></a>
<p>To copy an existing file (<strong>file1.txt</strong>)
to a new file (<strong>file2.txt</strong>):</p>
<pre><code>cp file1.txt file2.txt
</code></pre>
<p>Use the <code>-i</code> option to copy that file in interactive mode;
that is, to prompt you before overwriting an existing file.</p>
<p>We also use the <code>cp</code> command to copy directories.</p>
<a class="header" href="print.html#moving-files-and-directories" id="moving-files-and-directories"><h3>Moving Files and Directories</h3></a>
<p>The <code>mv</code> command will move an existing file to a different directory,
and/or rename the file.
For example, from within our home directory
(therefore, using relative path names),
to move a file named &quot;file.docx&quot;
to a subdirectory named &quot;Documents&quot;:</p>
<pre><code>mv file.docx Documents/
</code></pre>
<p>To rename a file only (keeping it in the same directory),
the command looks like this:</p>
<pre><code>mv file.docx newName.docx
</code></pre>
<p>To move the file to our Documents/ subdirectory and also rename it,
then we'd do this:</p>
<pre><code>mv file.docx Documents/newName.docx
</code></pre>
<p>The <code>man</code> page for the <code>mv</code> command also describes an <code>-i</code> option
for interactive mode that helps prevent us from overwriting existing files.
For example, if we have a file called <strong>paper.docx</strong> in our <strong>$HOME</strong> directory,
and we have a file named <strong>paper.docx</strong> in our <strong>$HOME/Documents</strong> directory,
and if these are actually two different papers (or files),
then moving the file to that directory will overwrite it without asking.
The <code>-i</code> option will prompt us first:</p>
<pre><code>mv -i paper.docx Documents/paper.docx
</code></pre>
<a class="header" href="print.html#remove-or-delete" id="remove-or-delete"><h3>Remove or Delete</h3></a>
<p>Finally, to delete a file, we use the <code>rm</code> command:</p>
<pre><code>rm file.html
</code></pre>
<blockquote>
<p>Unlike the trash bin in your graphical user environment,
it's very hard to recover a deleted file using the <code>rm</code> command.
That is, using <code>rm</code> does not mean the file or directory is <strong>trashed</strong>;
rather, it means it was <strong>deleted</strong>.</p>
</blockquote>
<a class="header" href="print.html#special-file-types" id="special-file-types"><h2>Special File Types</h2></a>
<p>For now, let's only cover two commands here:</p>
<ul>
<li><code>mkdir</code> for creating a new directory</li>
<li><code>rmdir</code> for deleting an empty directory</li>
</ul>
<p>Like the above commands,
these commands also have their own set of options
that can be viewed in their respective <strong>man pages</strong>:</p>
<pre><code>man mkdir
man rmdir
</code></pre>
<a class="header" href="print.html#make-or-create-a-new-directory" id="make-or-create-a-new-directory"><h3>Make or Create a New Directory</h3></a>
<p>We use these commands like we do the ones above.
If we are in our <strong>$HOME</strong> directory, and
we want to create a new directory called <strong>bin</strong>, we do:</p>
<pre><code>mkdir bin 
</code></pre>
<blockquote>
<p>The <strong>bin</strong> directory in our <strong>$HOME</strong> directory is a default location
to store our personal applications, or applications (programs) that
are only available to us.</p>
</blockquote>
<p>And if we run <code>ls</code>, we should see that it was successful.</p>
<a class="header" href="print.html#delete-a-directory" id="delete-a-directory"><h3>Delete a Directory</h3></a>
<p>The <code>rmdir</code> command is a bit weird
because it only removes <strong>empty</strong> directories.
To remove the directory we just created, we use it like so:</p>
<pre><code>rmdir bin 
</code></pre>
<p>However, if you want to remove a directory
that contains files or other subdirectories,
then you will have to use the <code>rm</code> command
along with the <code>-r</code> (recursive) option:</p>
<pre><code>rm -r directory-with-content/
</code></pre>
<a class="header" href="print.html#printing-text" id="printing-text"><h2>Printing Text</h2></a>
<p>There a number of ways to print text to <strong>standard output</strong>,
which is our screen by default in the terminal.
We could also redirect standard output
to a file, to a printer, or to a remote shell.
We'll see examples like that later in the semester.
Here let's cover two commands:</p>
<ul>
<li><code>echo</code> : to print a line of text to standard output</li>
<li><code>cat</code>  : to concatenate and write files</li>
<li><code>less</code> : to view files one page at a time</li>
</ul>
<blockquote>
<p><strong>Standard output</strong> is by default the screen.
When we <strong>print</strong> to standard output,
then by default we print to the screen.
However, standard output can be <strong>redirected</strong>
to files, programs, or devices, like actual printers.</p>
</blockquote>
<a class="header" href="print.html#print-to-screen" id="print-to-screen"><h3>Print to Screen</h3></a>
<p>To use <code>echo</code>:</p>
<pre><code>echo &quot;hello world&quot;
echo &quot;Today is a good day.&quot;
</code></pre>
<p>We can also <code>echo</code> variables:</p>
<pre><code>a=4
echo &quot;$a&quot;
</code></pre>
<a class="header" href="print.html#print-file-to-screen" id="print-file-to-screen"><h3>Print File to Screen</h3></a>
<p><code>cat</code> is listed elsewhere in the GNU Coreutils page.
The primary use of the <code>cat</code> command is to join, combine, or concatenate files,
but if used on a single file,
it has this nice side effect of printing the content of the file to the screen:</p>
<pre><code>cat file.html
</code></pre>
<p>If the file is very long, we might want to use what's called a <strong>pager</strong>.
There are a few pagers to use, but the <code>less</code> command is a common one:</p>
<pre><code>less file.html
</code></pre>
<p>Like with the <strong>man pages</strong>,
use the up and down arrow keys to scroll through the output,
and press <strong>q</strong> to quit the pager.</p>
<a class="header" href="print.html#conclusion" id="conclusion"><h2>Conclusion</h2></a>
<p>In this demo, we learned about the filesystem or directory structure of Linux,
and we also learned some basic command to work with directories and files.
You should practice using these commands as much as possible.
The more you use them, the easier it'll get.
Also, be sure to review the <strong>man pages</strong> for each of the commands,
especially to see what options are available for each of them.</p>
<p>Basic commands covered in this demo include:</p>
<ul>
<li><code>cat</code>   : display contents of a file</li>
<li><code>cp</code>    : copy</li>
<li><code>echo</code>  : print a line of text</li>
<li><code>less</code>  : display contents of a file by page</li>
<li><code>ls</code>    : list</li>
<li><code>man</code>   : manual pages</li>
<li><code>mkdir</code> : create a directory</li>
<li><code>mv</code>    : move or rename</li>
<li><code>pwd</code>   : print name of current/working directory</li>
<li><code>rmdir</code> : delete an empty directory</li>
<li><code>rm</code>    : remove or delete a file or directory</li>
<li><code>tree</code>  : list contents of directories in a tree-like format</li>
</ul>
<a class="header" href="print.html#file-attributes" id="file-attributes"><h1>File Attributes</h1></a>
<a class="header" href="print.html#identifying-ownership-and-permissions" id="identifying-ownership-and-permissions"><h2>Identifying Ownership and Permissions</h2></a>
<p>In the last section, we saw that the output of the <code>ls -l</code> command
included a lot extra information besides a listing of file names.
The output also listed the owners and permissions for each file and directory.</p>
<p>Each user account on a Linux system
(like many operating systems)
has a user name and has at least one group membership, and
that name and that group membership
determine the user and group ownership
for all files created under that account.</p>
<p>In order to allow or restrict access to files and directories
(for example,
to allow other users to read, write to, or run your or others' files),
ownership and permissions are set in order to manage that kind
of access to those files and directories.
There are thus two owners for every file (and directory):</p>
<ul>
<li>user owner</li>
<li>group owner</li>
</ul>
<p>And there are three permission <em>modes</em> that restrict or expand
access to each file (or directory) based on user or group membership:</p>
<ul>
<li>(r)ead</li>
<li>(w)rite</li>
<li>e(x)ecute (as in a program)</li>
</ul>
<blockquote>
<p>I am emphasizing the <strong>rwx</strong> in the above list of modes because
we will need to remember what these letters stand for when
we work with file and directory permissions.</p>
</blockquote>
<p>Consider the output of <code>ls -l</code> in some <strong>public_html</strong> directory
that contains a single file called <strong>index.html</strong>:</p>
<pre><code>-rw-rw-r-- 1 sean sean 11251 Jun 20 14:41 index.html
</code></pre>
<p>According to the above output,
we can parse the following information about the file:</p>
<table><thead><tr><th> Attributes             </th><th> <code>ls -l</code> output   </th></tr></thead><tbody>
<tr><td> File permissions       </td><td> <code>-rw-rw-r--</code>     </td></tr>
<tr><td> Number of links        </td><td> 1                  </td></tr>
<tr><td> Owner name             </td><td> sean               </td></tr>
<tr><td> Group name             </td><td> sean               </td></tr>
<tr><td> Byte size              </td><td> 11251              </td></tr>
<tr><td> Last modification date </td><td> Jun 20 14:41       </td></tr>
<tr><td> File name              </td><td> index.html         </td></tr>
</tbody></table>
<p>What's important for us right now are the <strong>File permissions</strong> row,
the <strong>Owner name</strong> row,
and the <strong>Group name</strong> row.</p>
<p>The Owner and Group names of the <strong>index.html</strong> file are <strong>sean</strong> because
there is a user account named <strong>sean</strong> on the system and
a group account named <strong>sean</strong> on the system, and
that file exists in the user <strong>sean</strong>'s home directory.</p>
<p>The <strong>File permissions</strong> row shows:</p>
<pre><code>-rw-rw-r--
</code></pre>
<p>Let's ignore the first dash for now.
The remaining permissions can be broken down as:</p>
<ul>
<li>rw- (read and write only permissions for the Owner)</li>
<li>rw- (read and write only permissions for the Group)</li>
<li>r-- (read-only permissions for the World)</li>
</ul>
<p>We read the output as such
(dashes, other than the initial one, signify no permissions):</p>
<ul>
<li>User <strong>sean</strong> is the Owner and has (r)ead and (w)rite permissions on the file
but not e(x)ecute permissions (<code>rw-</code>).</li>
<li>Group <strong>sean</strong> is the Group owner and has (r)ead and (w)rite permissions on
the file but not e(x)ecute permissions (<code>rw-</code>).</li>
<li>The <strong>World</strong> can (r)ead the file but cannot (w)rite to the file nor
e(x)ecute the file (<code>r--</code>).</li>
</ul>
<blockquote>
<p>The word <strong>write</strong> is a classical computing term
that means, essentially, to edit and save edits of a file.
Today we use the term <strong>save</strong> instead of <strong>write</strong>,
but remember that they are basically equivalent terms.</p>
</blockquote>
<p>Since this is an HTML page for a website,
the <strong>World</strong> ownership allows people to view (read) the file but not write
(save) to it nor execute (run) it.
Any webpage you view on the internet at least has World mode set to read.</p>
<p>Let's take a look at another file.
In our <code>/bin</code> directory, we can see a listing for this program
(note that I specify the absolute path of the file named <strong>bin</strong>):</p>
<pre><code>ls -l /bin/zip
-rwxr-xr-x 1 root   root    212K Feb  2  2021  zip*
</code></pre>
<table><thead><tr><th> Attributes             </th><th> <code>ls -l</code> output   </th></tr></thead><tbody>
<tr><td> File permissions       </td><td> <code>-rwxr-xr-x</code>     </td></tr>
<tr><td> Number of links        </td><td> 1                  </td></tr>
<tr><td> Owner name             </td><td> root               </td></tr>
<tr><td> Group name             </td><td> root               </td></tr>
<tr><td> Byte size              </td><td> 212K               </td></tr>
<tr><td> Last modification date </td><td> Feb  2 2021        </td></tr>
<tr><td> File name              </td><td> zip*               </td></tr>
</tbody></table>
<p>Since <code>zip</code> is a computer program used to package and compress files,
it needs to be e(x)ecutable.
That is, users on the system need to be able to run it.
But notice that the owner and group names of the file point to the user <strong>root</strong>.
We have already learned that there is a <strong>root</strong> level in our filesystem.
This is the top level directory in our filesystem and is referenced
by the forward slash: <code>/</code>.
But there is also a <strong>root</strong> user account.
This is the system's <strong>superuser</strong>.
The <strong>superuser</strong> can run or access anything on the system, and
this user also owns most of the system files.</p>
<p>We read the output as such:</p>
<ul>
<li>User <strong>root</strong> is the Owner and has (r)ead, (w)rite, and e(x)ecute (<code>rwx</code>) permissions on the file.</li>
<li>Group <strong>root</strong> is the Group owner and has (r)ead and e(x)ecute permissions
but not (w)rite permissions (<code>r-x</code>)</li>
<li>The <strong>World</strong> has (r)ead and e(x)ecute permissions but not (w)rite (<code>r-x</code>). This
permissions allows other users (like you and me) to use the <code>zip</code>
program.</li>
</ul>
<blockquote>
<p>The asterisk at the end of the file name (<code>zip*</code>) simply indicates that
this file is an executable;
i.e., it is a software program that you can run.</p>
</blockquote>
<p>Finally, let's take a look at the permissions for a directory.
On my system, I run the following command in my home directory,
which will show the permissions for my <code>/home/sean</code> directory:</p>
<pre><code>ls -ld
</code></pre>
<p>And the output is:</p>
<pre><code>drwx--x--- 51 sean sean 4.0K Jun 23 18:35 ./
</code></pre>
<p>This shows that:</p>
<table><thead><tr><th> Attributes             </th><th> <code>ls -ld</code> output  </th></tr></thead><tbody>
<tr><td> File permissions       </td><td> <code>drwx--x---</code>     </td></tr>
<tr><td> Number of links        </td><td> 1                  </td></tr>
<tr><td> Owner name             </td><td> sean               </td></tr>
<tr><td> Group name             </td><td> sean               </td></tr>
<tr><td> Byte size              </td><td> 4.0K               </td></tr>
<tr><td> Last modification date </td><td> Jun 23             </td></tr>
<tr><td> File name              </td><td> ./                 </td></tr>
</tbody></table>
<p>This is a little different from the previous examples, but let's parse it:</p>
<ul>
<li>Instead of an initial dash, this <em>file</em> has an initial <strong>d</strong> that identifies this
as a directory. Directories in Linux are simply special types of files.</li>
<li>User <strong>sean</strong> has read, write, and execute (<code>rwx</code>) permissions.</li>
<li>Group <strong>sean</strong> has execute (<code>--x</code>) permissions only.</li>
<li>The <strong>World</strong> has no permissions (<code>---</code>).</li>
<li><strong>./</strong> signifies the current directory, which happens to be my home
directory, since I ran that command at the <code>/home/sean</code> path.</li>
</ul>
<p>The takeaway from this set of permissions and the ownership is that only the
user <strong>sean</strong> and those in the group <strong>sean</strong>, which is just the user <strong>sean</strong>,
can access this home directory.</p>
<p>We might ask why the directory has an e(x)ecutable bit set
for the owner and the group if
a directory is not an executable file.
That is, it's not a program or software.
This is so that the owner and the group can access that directory
using, for example, the <code>cd</code> (change directory) command.
If the directory was not executable,
like it's not for the <strong>World</strong> (<code>---</code>),
then it would not be accessible
with the <code>cd</code> command,
or any other command.
In this case, the <strong>World</strong>
(users who are not me)
cannot access my home directory.</p>
<a class="header" href="print.html#changing-file-permissions-and-ownership" id="changing-file-permissions-and-ownership"><h2>Changing File Permissions and Ownership</h2></a>
<a class="header" href="print.html#changing-file-permissions" id="changing-file-permissions"><h3>Changing File Permissions</h3></a>
<p>All the files and directories on a Linux system
have default ownership and permissions set.
This includes new files that we might create as
we use our systems.
There will be times when we will want to change the defaults,
for example, the kinds of defaults described above.
There are several commands available to do that,
and here I'll introduce you to the two most common ones.</p>
<ol>
<li>The <code>chmod</code> command is used to change file (and directory) permissions
(or file mode bits).</li>
<li>The <code>chown</code> command is used to change a file's (and directory's) owner and
group.</li>
</ol>
<p>The <code>chmod</code> command changes the <code>-rwxrwxrwx</code> part of a file's attributes
that we see with the <code>ls -l</code> command.
Each one of those bits (the <code>r</code>, the <code>w</code>, and the <code>x</code>)
are assigned the following <a href="https://docs.oracle.com/cd/E19504-01/802-5750/6i9g464pv/index.html">octal</a> values:</p>
<table><thead><tr><th> permission   </th><th> description    </th><th> octal value   </th></tr></thead><tbody>
<tr><td> r            </td><td> read           </td><td> 4             </td></tr>
<tr><td> w            </td><td> write          </td><td> 2             </td></tr>
<tr><td> x            </td><td> execute        </td><td> 1             </td></tr>
<tr><td> -            </td><td> no permissions </td><td> 0             </td></tr>
</tbody></table>
<p>There are three octal values for the three set of permissions
represented by <code>-rwxrwxrwx</code>.
If I bracket the sets (for demonstration purposes only),
they look like this:</p>
<pre><code>-[rwx][rwx][rwx]
</code></pre>
<p>The first set describes the permissions for the owner.
The second set describes the permissions for the group.
The third set describes the permissions for the World.</p>
<p>We use the <code>chmod</code> command and the octal values to change
a file or directory's permissions.
For each set, we add up the octal values.
For example, to make a file read (4), write (2), and executable (1)
for the owner only,
and zero out the permissions for the group and World,
we use the <code>chmod</code> command like so:</p>
<pre><code>chmod 700 paper.txt
</code></pre>
<p>We use 7 because <code>4+2+1=7</code>, and
we use two zeroes in the second two places
since we're removing permissions for group and World.</p>
<p>If we want to make the file read, write, and executable by
the owner, the group, and the world, then we repeat this for each set:</p>
<pre><code>chmod 777 paper.txt
</code></pre>
<p>More commonly, we might want to restrict ownership.
Here we enable <code>rw-</code> for the owner,
and <code>r--</code> for the group and the World:</p>
<pre><code>chmod 644 paper.txt
</code></pre>
<p>Because <code>4+2=6</code> for owner,
and <code>4</code> is read only for group and World, respectively.</p>
<a class="header" href="print.html#changing-file-ownership" id="changing-file-ownership"><h3>Changing File Ownership</h3></a>
<p>In order to change the ownership of a file,
we use the <code>chown</code> command followed by
the name of the owner.
We can optionally change the owner of the group by adding a colon (no spaces)
and the name of the group.</p>
<p>We can see what groups we belong to with the <code>groups</code> command.
On one system that I have an account on, I am a member of two groups:
a group <strong>sean</strong> (same as my user name on this system),
and a group <strong>sudo</strong>,
which signifies that I'm an administrator on this system
(more on <code>sudo</code> later in the semester).</p>
<pre><code>groups
sean sudo 
</code></pre>
<p>We can only change the user and group ownership of a file or directory
if we have administrative privileges (<code>sudo</code> administrative access),
or if we share group membership.
This means that,
unless we have <code>sudo</code> (admin) privileges,
we often might change the group name for a file or directory
than the user owner.
Later in the semester,
you will have to do this kind of work (change user and group names)
of files and directories.
In the meantime, let's see some examples:</p>
<p>Imagine that my Linux user account belongs to the group <strong>sisFaculty</strong>, and
that there are other users on the Linux system (my colleagues at work)
who are also members of this group.
If I want to make a directory or file accessible to them,
then I can change the group name of a file I own to <strong>sisFaculty</strong>.
Let's call that file <strong>testFile.txt</strong>.
To change only the group name for the file:</p>
<pre><code>chown :sisFaculty testFile.txt
</code></pre>
<p>I can generally only change the user owner of a file if I have admin
access on a system.
In such a case,
I might have to use the <code>sudo</code> command
(you do not have access to the <code>sudo</code> command
on our shared server,
but you will have it later on your virtual machines).
In this case, I don't need the colon.
To change the owner only,
say from the user <strong>sean</strong> to the user <strong>tmk</strong>:</p>
<pre><code>sudo chown tmk testFile.txt
</code></pre>
<p>To change both user owner and group name,
we simply specify both names
and separate those names by a colon,
where the syntax is <code>chown USER:GROUP testFile.txt</code></p>
<pre><code>sudo chown tmk:sisFaculty testFile.txt
</code></pre>
<p>After using the <code>chown</code> command to change
either the owner or group,
we should double check the file or directory's permissions
using the <code>chmod</code> command.
Here I make it so that the user owner and the group <strong>sisFaculty</strong> has
(r)ead and (w)rite access to the file.
I use <code>sudo</code> because,
as the user <strong>sean</strong>,
I'm changing the file permissions for a file
that I do not own:</p>
<pre><code>sudo chmod 660 testFile.txt
</code></pre>
<a class="header" href="print.html#conclusion-1" id="conclusion-1"><h2>Conclusion</h2></a>
<p>In this section, we learned:</p>
<ul>
<li>how to identify file/directory ownership and permissions</li>
<li>and how to change file/directory ownership and permissions.</li>
</ul>
<p>Specifically, we looked at two ways to change the attributes of a file.
This includes changing the ownership of a file
with the <code>chown</code> command, and
setting the read, write, and execute
permissions of a file with the <code>chmod</code>
command.</p>
<p>The commands we used to change these attributes include:</p>
<ul>
<li><code>chmod</code> : for changing file permissions (or file mode bits)</li>
<li><code>chown</code> : for changing file ownership</li>
</ul>
<p>We also used the following commands:</p>
<ul>
<li><code>ls</code>         : list directory contents
<ul>
<li><code>ls -ld</code> : long list directories themselves, not their contents</li>
</ul>
</li>
<li><code>groups</code>     : print the groups a user is in</li>
<li><code>sudo</code>       : execute a command as another user</li>
</ul>
<a class="header" href="print.html#processing-data-gnu-coreutils-part-1" id="processing-data-gnu-coreutils-part-1"><h1>Processing Data: GNU Coreutils (Part 1)</h1></a>
<a class="header" href="print.html#text-processing" id="text-processing"><h2>Text Processing</h2></a>
<p>One of the more important sets of tools that Linux (as well Unix-like)
operating systems provide are tools that
<a href="https://tldp.org/LDP/abs/html/textproc.html">aid processing and manipulating text</a>.
The ability to process and manipulate text, programmatically,
is a basic and essential part of many programming languages,
(e.g., Python, JavaScript, etc),
and learning how to process and manipulate text is
an important skill for a variety of jobs including
statistics, data analytics, data science, programming, web programming,
systems administration, and so forth.
In other words,
this functionality of Linux (and Unix-like) operating systems
essentially means that to learn Linux and the tools that it provides
is akin to learning how to program.</p>
<blockquote>
<p>Plain text files are the basic building blocks of programs and data.
Programs are written in plain text editors, and
data is often stored as plain text.
Linux offers many tools to examine, manipulate, process, analyze,
and visualize data in plain text files.</p>
</blockquote>
<p>In this section, we will learn some of the basic
tools to examine plain text (i.e., data).
We will do some programming later in this class, but for us,
the main objective with learning to program
aligns with our work as systems administrators.
That means our text processing and programming goals will serve our interests
in managing users, security, networking, system configuration, and so forth
as Linux system administrators.</p>
<p>In the meantime, the goal of this section is to acquaint ourselves with
some of the tools that can be used to process text.
In this section, we will only cover a handful of text processing
programs or utilities,
but here is a fairly comprehensive list,
and we'll examine some additional ones from this list
later in the semester:</p>
<ul>
<li><code>cat</code>      : concatenate files and print on the standard output</li>
<li><code>cut</code>      : remove sections from each line of files</li>
<li><code>diff</code>     : compare files line by line</li>
<li><code>echo</code>     : display a line of text</li>
<li><code>expand</code>   : convert tabs to spaces</li>
<li><code>find</code>     : search for files in a directory hierarchy</li>
<li><code>fmt</code>      : simple optimal text formatter</li>
<li><code>fold</code>     : wrap each input line to fit in specified width</li>
<li><code>grep</code>     : print lines that match patterns</li>
<li><code>head</code>     : output the first part of files</li>
<li><code>join</code>     : join lines of two files on a common field</li>
<li><code>look</code>     : display lines beginning with a given string</li>
<li><code>nl</code>       : number lines of files</li>
<li><code>paste</code>    : merge lines of files</li>
<li><code>printf</code>   : format and print data</li>
<li><code>shuf</code>     : generate random permutations</li>
<li><code>sort</code>     : sort lines of text files</li>
<li><code>tail</code>     : output the last part of files</li>
<li><code>tr</code>       : translate or delete characters</li>
<li><code>unexpand</code> : convert spaces to tabs</li>
<li><code>uniq</code>     : report or omit repeat lines</li>
<li><code>wc</code>       : print newline, word, and byte counts for each file</li>
</ul>
<p>We will also discuss two types of operators, the pipe and the redirect.
The latter has a version that will write over the contents of a file,
and a version that will append contents to the end of a file:</p>
<ul>
<li><code>|</code> : redirect standard output from command1 to standard input for command2</li>
<li><code>&gt;</code> : redirect to standard output to a file, overwriting</li>
<li><code>&gt;&gt;</code> : redirect to standard output to a file, appending</li>
</ul>
<p>Today I want to cover a few of the above commands for processing data in a file;
specifically:</p>
<ul>
<li><code>cat</code>  : concatenate files and print on the standard output</li>
<li><code>cut</code>  : remove sections from each line of files</li>
<li><code>head</code> : output the first part of files</li>
<li><code>sort</code> : sort lines of text files</li>
<li><code>tail</code> : output the last part of files</li>
<li><code>uniq</code> : report or omit repeat lines</li>
<li><code>wc</code>   : print newline, word, and byte counts for each file</li>
</ul>
<p>Let's look at a toy, sample file that contains
structured data as a CSV (comma separated value) file.
The file contains a list of operating systems (column one),
their software license (column two),
and the year they were released (column three).
We can use the <code>cat</code> command to view the entire
contents of this small file:</p>
<pre><code>cat operating-systems.csv
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>It's a small file, but
we might want the line and word count of the file.
To acquire that, we can use the <code>wc</code> (word count) command.
By itself, the <code>wc</code> command will print
the number of lines, words, and bytes of a file.
The following output states that the file contains
seven lines, 23 words, and 165 bytes:</p>
<pre><code>wc operating-systems.csv
  7  23 165 operating-systems.csv
</code></pre>
<p>We can use the <code>head</code> command to output,
by default,
the first ten lines of a file.
Since our file is only seven lines long,
we can use the <code>-n</code> option
to change the default number of lines:</p>
<pre><code>head -n3 operating-systems.csv
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
</code></pre>
<p>Using the <code>cut</code> command, we can select data from file.
In the first example, I want to select column two (or field two),
which contains the license information.
Since this is a CSV file,
the fields (aka, columns) are separated by commas.
The <code>-d</code> option tells the <code>cut</code> command to use commas
as the separator character.
(A CSV file may use other characters as the separator character,
like the Tab character or a colon.)</p>
<pre><code># get the second field, where the fields are separated by a comma &quot;,&quot;
cut -d&quot;,&quot; -f2 operating-system.csv
 Proprietary
 BSD
 GPL
 Proprietary
 Proprietary
 Proprietary
 Apache
</code></pre>
<p>From there it's trivial to select a different column.
In the next example,
I select field (or column) three to get the release year:</p>
<pre><code># get the third field
cut -d&quot;,&quot; -f3 operating-system.csv
 2009
 1993
 1991
 2007
 2001
 1993
 2008
</code></pre>
<p>One of the magical aspects of the Linux (and Unix) commandline
is the ability to <strong>pipe</strong> and <strong>redirect</strong> output from one program
to another program, and then to a file.
By stringing together multiple programs with these operators,
we can create small programs that do much more than the
simple programs that compose them.
In this next example,
I use the pipe operators to send the output of the <code>cut</code>
command to the <code>sort</code> command,
which sorts the data in alphabetical or numerical order,
depending on the character type (lexical or numerical),
pipe that output to the <code>uniq</code> command,
which removes duplicate rows,
and then redirect that final output to a new
file titled <strong>os-years.csv</strong>.
Since the year <strong>1993</strong> appears twice in the original file,
it only appears once in the output
because the <code>uniq</code> command removed the duplicate:</p>
<pre><code># select field, sort it, unique it, and save it in a separate file
cut -d&quot;,&quot; -f3 operating-system.csv | sort | uniq &gt; os-years.csv
cat os-years.csv
 1991
 1993
 2001
 2007
 2008
 2009
</code></pre>
<p>Let's add a header row to the top of the file.
The header row names each column.
Since the CSV file now has a header line,
we may want to remove it from the output.
First, let's look at the file:</p>
<pre><code>cat operating-systems.csv
OS, License, Year
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>Say we want the license field data,
but we need to remove that first line.
In this case, we need the tail command:</p>
<pre><code>tail -n +2 operating-system-csv | cut -d&quot;,&quot; -f2 | sort | uniq &gt; license-data.csv
cat license-data.csv
 Apache
 BSD
 GPL
 Proprietary
 Proprietary
</code></pre>
<blockquote>
<p>The <code>tail</code> command generally outputs the last lines of a file,
but the <code>-n +2</code> option is special.
It makes the <code>tail</code> command ouput a file starting
at the second line.
We could specify a different number in order
to start output at a different line.
See <code>man tail</code> for more information.</p>
</blockquote>
<a class="header" href="print.html#conclusion-2" id="conclusion-2"><h2>Conclusion</h2></a>
<p>In this lesson, we learned how to process and
make sense of data held in a text file.
We used some commands that let us select,
sort, de-duplicate, redirect, and view data in different ways.
Our data file was a small one,
but these are powerful and useful command and operators
that would easily make sense of large amounts of data
in a file.</p>
<p>The commands we used in this lesson include:</p>
<ul>
<li><code>cat</code>  : concatenate files and print on the standard output</li>
<li><code>cut</code>  : remove sections from each line of files</li>
<li><code>head</code> : output the first part of files</li>
<li><code>sort</code> : sort lines of text files</li>
<li><code>tail</code> : output the last part of files</li>
<li><code>uniq</code> : report or omit repeat lines</li>
<li><code>wc</code>   : print newline, word, and byte counts for each file</li>
</ul>
<p>We also used two types of operators, the pipe and the redirect:</p>
<ul>
<li><code>|</code> : redirect standard output command1 to standard input of command2</li>
<li><code>&gt;</code> : redirect to standard output to a file, overwriting</li>
</ul>
<a class="header" href="print.html#processing-data-grep-sed-awk-part-2" id="processing-data-grep-sed-awk-part-2"><h1>Processing Data: Grep, Sed, Awk (Part 2)</h1></a>
<a class="header" href="print.html#introduction-1" id="introduction-1"><h2>Introduction</h2></a>
<p>In the last section, we covered the
<code>cat</code>, <code>cut</code>, <code>head</code>, <code>sort</code>, <code>tail</code>, <code>uniq</code>, and <code>wc</code> utilities.</p>
<p>We also learned about the <code>|</code> pipe operator,
which we use to redirect <strong>standard output</strong>
from one command
to a second command so that second command
can process the output from the first command.
An example is:</p>
<pre><code>sort file.txt | uniq
</code></pre>
<p>This sorts the lines in a file named <strong>file.txt</strong> and
then prints to standard output only the unique lines
(by the way, files must be sorted before piped to <code>uniq</code>).</p>
<p>We learned about the <code>&gt;</code> and <code>&gt;&gt;</code> redirect operators.
They work like the pipe operator, but
instead of directing output to a new command
for the new command to process,
they direct output to a file for saving.
As a reminder,
the single redirect <code>&gt;</code> overwrites a file or creates a file
if it does not exist.
The double redirect <code>&gt;&gt;</code> appends to a file or
creates a file if it does not exist.
It's safer to use the double redirect, but
if you are processing large amounts of data,
it could also mean creating large files really quickly.
If that gets out of hand,
then you might crash your system.
To build on our prior example,
we can add <code>&gt;&gt;</code> to send the output to
a new file called <strong>output.txt</strong>:</p>
<pre><code>sort file.txt | uniq &gt;&gt; output.txt
</code></pre>
<p>We have available more powerful utilities and programs
to process, manipulate, and analyze text files.
In this section, we will cover the following three of these:</p>
<ul>
<li><code>grep</code> : print lines that match patterns</li>
<li><code>sed</code>  : stream editor for filtering and transforming text</li>
<li><code>awk</code>  : pattern scanning and text processing language</li>
</ul>
<a class="header" href="print.html#grep" id="grep"><h2>Grep</h2></a>
<p>The <code>grep</code> command is one of my most often used commands.
Basically, <code>grep</code> &quot;prints lines that match patterns&quot;
(see <code>man grep</code>).
In other words, it's search, and
it's super powerful.</p>
<p><code>grep</code> works line by line.
So when we use it to search a file for a <strong>string</strong> of text,
it will return the whole line that matches the string.
This <strong>line by line</strong> idea is part of the history of
Unix-like operating systems,
and it's super important to remember that most utilities
and programs that we use on the commandline
are line oriented.</p>
<blockquote>
<p>&quot;A string is any series of characters that are interpreted
literally by a script. For example, 'hello world' and 'LKJH019283'
are both examples of strings.&quot; -- <a href="https://www.computerhope.com/jargon/s/string.htm">Computer Hope</a>.
More generally, it's the literal characters that we type. It's data.</p>
</blockquote>
<p>Let's consider the file <strong>operating-systems.csv</strong>, as seen below:</p>
<pre><code>OS, License, Year
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>If we want to search for the string <strong>Chrome</strong>,
we can use <code>grep</code>.
Notice that even though the string <strong>Chrome</strong> only appears once,
and in one part of a line,
<code>grep</code> returns the entire line.</p>
<pre><code>grep &quot;Chrome&quot; operating-systems.csv
Chrome OS, Proprietary, 2009
</code></pre>
<p>Be aware that, by default, <code>grep</code> is case-sensitive,
which means a search for the string <strong>chrome</strong>,
with a lower case <strong>c</strong>,
would return no results.
Fortunately, <code>grep</code> has an <code>-i</code> option,
which means to ignore the case of the search string.
In the following examples, <code>grep</code> returns nothing in the first search
since we do not capitalize the string <strong>chrome</strong>.
However, adding the <code>-i</code> option results in success:</p>
<pre><code>grep &quot;chrome&quot; operating-systems.csv
grep -i &quot;chrome&quot; operating-systems.csv
Chrome OS, Proprietary, 2009
</code></pre>
<p>We can also search for lines that <strong>do not</strong> match our string
using the <code>-v</code> option.
We can combine that with the <code>-i</code> option to ignore the string's case.
Therefore, in the following example,
all lines that do not contain the string <strong>chrome</strong> are returned:</p>
<pre><code>grep -vi &quot;chrome&quot; operating-systems.csv
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>I used the <code>tail</code> command in the prior section to show
how we might use <code>tail</code> to remove the header (1st line) line in a file,
but it's an odd use of the <code>tail</code> command,
which normally just returns the last lines of a file.
Instead, we can use <code>grep</code> to remove the first line.
To do so, we use what's called a <strong>regular expression</strong>,
or <strong>regex</strong> for short.
Regex is a method used to identify patterns in text via abstractions.
They can get complicated, but we can use some easy regex methods.</p>
<p>Let's use a version of the above file with the header line:</p>
<pre><code>cat operating-systems.csv
OS, License, Year
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>To use <code>grep</code> to remove the first line of a file,
we can invert our search to select all lines not matching
&quot;OS&quot; at the start of a line.
Here the carat key <code>^</code> is a <strong>regex</strong> indicating the
start of a line.
Again, this <code>grep</code> command returns all lines that
do not match the string <strong>os</strong> at the start of a line,
ignoring case:</p>
<pre><code>grep -vi &quot;^os&quot; operating-systems.csv
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>Alternatively, since we know that the string <strong>Year</strong> comes
at the end of the first line,
we can use <code>grep</code> to invert search for that.
Here the dollar sign key <code>$</code> is a <strong>regex</strong> indicating the
end of a line.
Like the above, this <code>grep</code> command returns all lines that
do not match the string <strong>year</strong> at the end of a line,
ignoring case:</p>
<pre><code>grep -vi &quot;year$&quot; operating-systems.csv
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>The <code>man grep</code> page lists other options,
but a couple of other good ones include:</p>
<p>Get a count of the matching lines with the <code>-c</code> option:</p>
<pre><code>grep -ic &quot;proprietary&quot; operating-systems.csv
4
</code></pre>
<p>Print only the match and not the whole line with the <code>-o</code> option:</p>
<pre><code>grep -io &quot;proprietary&quot; operating-systems.csv
Proprietary
Proprietary
Proprietary
Proprietary
</code></pre>
<p>Print lines matching different strings using the <code>-E</code> option and
separating the different strings with a vertical bar <code>|</code>.
This is similar to a Boolean OR search;
since there's at least one match in the following string,
there is at least one result:</p>
<pre><code>grep -Ei &quot;bsd|atari&quot; operating-systems.csv
FreeBSD, BSD, 1993
</code></pre>
<p>Since both &quot;bsd&quot; and &quot;gpl&quot; are in the file,
both lines are returned:</p>
<pre><code>grep -Ei &quot;bsd|gpl&quot; operating-systems.csv
FreeBSD, BSD, 1993
Linux, GPL, 1991
</code></pre>
<p>Print context surrounding matching lines.
For example, print the matching line plus the two lines
after the matching line using the <code>-A NUM</code> option:</p>
<pre><code>grep -i &quot;chrome&quot; -A 2 operating-systems.csv
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
</code></pre>
<p>Or, print the matching line plus the two lines
before the matching line using the <code>-B NUM</code> option:</p>
<pre><code>grep -i &quot;android&quot; -B 2 operating-systems.csv
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p><code>grep</code> is very powerful, and
there are more options listed in its <code>man</code> page.</p>
<blockquote>
<p>Note that I enclose my search strings in double quotes.
For example, ``grep &quot;search string&quot; filename.txt
It's not always required to enclose search strings
in double quotes,
but it's good practice,
especially if your string contains more than one word or
empty spaces.</p>
</blockquote>
<a class="header" href="print.html#sed" id="sed"><h2>Sed</h2></a>
<p><code>sed</code> is a type of non-interactive text editor
that filters and transforms text (<code>man sed</code>).
By default <code>sed</code> works on <strong>standard output</strong>,
and edits can be redirected (<code>&gt;</code> or <code>&gt;&gt;</code>) to new files
or made <strong>in-place</strong>.</p>
<p>Like the other utilities and programs we've covered,
including <code>grep</code>,
<code>sed</code> works line by line.
But unlike <code>grep</code>,
<code>sed</code> provides a way to <strong>address</strong>
specific lines or ranges of lines,
and then run filters or transformations on those lines.
Once the lines in a text file have been identified or addressed,
<code>sed</code> offers a number of commands to filter or transform the text
at those specific lines.</p>
<p>This concept of the line address is important, but
not all text files are explicitly numbered by each line.
Below I use the <code>nl</code> command to number lines in our file,
even though the contents of the file do not actually display line numbers:</p>
<pre><code>nl operating-systems.csv
     1	OS, License, Year
     2	Chrome OS, Proprietary, 2009
     3	FreeBSD, BSD, 1993
     4	Linux, GPL, 1991
     5	iOS, Proprietary, 2007
     6	macOS, Proprietary, 2001
     7	Windows NT, Proprietary, 1993
     8	Android, Apache, 2008
</code></pre>
<p>After we've identified the lines in a file that we want to edit,
<code>sed</code> offers commands to filter, transform, or edit
the text at the line addresses.
Some of these commands include:</p>
<ul>
<li><code>a</code> : appending text</li>
<li><code>c</code> : replace text</li>
<li><code>d</code> : delete text</li>
<li><code>i</code> : inserting text</li>
<li><code>p</code> : print text</li>
<li><code>r</code> : append text from file</li>
<li><code>s</code> : substitute text</li>
<li><code>=</code> : print the current line number</li>
</ul>
<p>Let's see how to use <code>sed</code> and that last command, the equal sign <code>=</code>, to identify line
numbers (although it places the line numbers just above each line):</p>
<pre><code>sed '=' operating-systems.csv
1
OS, License, Year
2
Chrome OS, Proprietary, 2009
3
FreeBSD, BSD, 1993
4
Linux, GPL, 1991
5
iOS, Proprietary, 2007
6
macOS, Proprietary, 2001
7
Windows NT, Proprietary, 1993
8
Android, Apache, 2008
</code></pre>
<p>Using <code>sed</code>, another another way to remove the header line
of the <strong>operating-systems.csv</strong> file is to specify the line number (<code>1</code>)
and then the delete command (<code>d</code>) in order to delete the first line:</p>
<pre><code>sed '1d' operating-systems.csv
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<blockquote>
<p>Note that I use single apostrophes for the <code>sed</code> command.
This is required.</p>
</blockquote>
<p>If I wanted to make that a permanent deletion,
then I would use the <code>-i</code> option,
which means that I would edit the file <strong>in-place</strong> (see <code>man sed</code>):</p>
<pre><code>sed -i '1d' operating-system.csv
</code></pre>
<p>To refer to line <strong>ranges</strong>, then I add a comma between <strong>addresses</strong>.
Therefore, to edit lines 1, 2, and 3:</p>
<pre><code>sed '1,3d' operating-systems.csv
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>I can use <code>sed</code> to <strong>find and replace</strong> strings.
The syntax for this is:</p>
<pre><code>sed 's/regexp/replacement/' filename.txt
</code></pre>
<p>The <strong>regexp</strong> part of the above command can take regular expressions, but
simple strings, like words, work here, too, since they are treated as
regular expressions themselves.</p>
<p>In the next example,
I use <code>sed</code> to search for the string &quot;Linux&quot;,
and replace it with the string &quot;GNU/Linux&quot;:</p>
<pre><code>sed 's/Linux/GNU\/Linux/' operating-systems.csv
OS, License, Year
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
GNU/Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<blockquote>
<p>Because the string <strong>GNU/Linux</strong> contains a forward slash,
and because <code>sed</code> uses the forward slash as a separator,
you will notice that I <strong>escaped</strong> the forward slash with a back slash
in the above <code>sed</code> command.
This escape tells <code>sed</code> to interpret the forward slash in <strong>GNU/Linux</strong>
literally and not as a special <code>sed</code> character.</p>
</blockquote>
<p>If we want to add new rows to the file,
we can append <code>a</code> or insert <code>i</code> text after or at specific lines:</p>
<p>To append text after line 3, use <code>a</code>:</p>
<pre><code>sed '3a FreeDOS, GPL, 1998' operating-systems.csv
OS, License, Year
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
FreeDOS, GPL, 1998
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>To insert at line 2, use <code>i</code>:</p>
<pre><code>sed '3i CP\/M, Proprietary, 1974' operating-systems.csv
OS, License, Year
Chrome OS, Proprietary, 2009
CP/M, Proprietary, 1974
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>Note that the FreeDOS line doesn't appear in the second output.
This is because I didn't use the <code>-i</code> option nor
did I redirect output to a new file.
If we want to edit the file <strong>in-place</strong>,
that is, save the edits,
then the commands would look like so:</p>
<pre><code>sed -i '3a FreeDOS, GPL, 1998' operating-systems.csv
sed -i '3i CP\/M, Proprietary, 1974' operating-systems.csv
</code></pre>
<p>Instead of using line numbers to specify addresses in a text file,
we can also search by regular expressions,
which may be simple words.
In the following example,
I use the regular expression <code>1991$</code> instead of specifying line 4.
The regular expression <code>1991$</code>  means
&quot;lines ending with the string <strong>1991</strong>&quot;.
Then I use the <code>s</code> command to start a find and replace.
<code>sed</code> finds the string <strong>Linux</strong> and then replaces
that with the string <strong>GNU/Linux</strong>.
I use the back slash to escape the forward slash in GNU/Linux:</p>
<pre><code>sed '/1991$/s/Linux/GNU\/Linux/' operating-systems.csv
OS, License, Year
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
GNU/Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>Here's an example using <code>sed</code> to simply search for a pattern.
In this example, I'm interested in searching for all operating systems
that were released on or after 2000:</p>
<pre><code>sed -n '/20/ p' operating-systems.csv
Chrome OS, Proprietary, 2009
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Android, Apache, 2008
</code></pre>
<p>The above would be equivalent to <code>grep &quot;20&quot; operating-systems.csv</code>.</p>
<p><code>sed</code> is much more powerful than what I've demonstrated here, and
if you're interested in learning more,
there are lots of tutorials on the web.
Here are a few good ones:</p>
<ul>
<li><a href="https://opensource.com/article/20/12/sed">Learn to use the Sed text editor</a></li>
<li><a href="https://www.gnu.org/software/sed/manual/sed.html">Sed Introduction</a></li>
<li><a href="https://catonmat.net/sed-one-liners-explained-part-one">Sed One-Liners Explained, Part I: File Spacing, Numbering and Text Conversion and Substitution</a></li>
<li><a href="https://edoras.sdsu.edu/doc/sed-oneliners.html">sed one-liners</a></li>
<li><a href="https://www.tutorialspoint.com/sed/index.htm">Sed Tutorial</a></li>
</ul>
<a class="header" href="print.html#awk" id="awk"><h2>Awk</h2></a>
<p><code>awk</code> is a complete scripting language for
&quot;pattern scanning and processing&quot; text (see <code>man awk</code>).
It's a powerful language that focuses on <strong>columns of structured data</strong>.</p>
<p>Unlike <code>sed</code>, which works on lines and uses line addresses to
select text to edit,
<code>awk</code> works on columns, and
this is regardless if the contents include structured data
(like a CSV file) or not (like a letter or essay).
If the data is structured,
then that means the data will be formatted in some way.
In the last few sections,
we have looked at a CSV file.
This is structured data because the data points
in this file are separated by commas.</p>
<p>For <code>awk</code> to work with columns in a file,
it needs some way to refer to those columns.
In the examples below, we'll see that columns in a text
file are referred to by a dollar sign and
then the number of the column <code>$n</code>.
So, <code>$1</code> indicates column one,
<code>$2</code> indicates column two, and so on.
If we use <code>$0</code>, then we refer to the entire file.
In our example text file, <code>$1</code> indicates the OS Name column,
<code>$2</code> indicates the License column,
<code>$3</code> indicates the release Year column,
and <code>$0</code> indicates all columns.</p>
<p>The syntax for <code>awk</code> is a little different than what we've seen so far.
Basically, <code>awk</code> uses the following syntax,
where <strong>pattern</strong> is optional.</p>
<pre><code>awk pattern { action statements }
</code></pre>
<p>Let's see some examples.</p>
<p>To print the first column of our file,
we do not need the <strong>pattern</strong> part of the command but
only need to state an action statement (within curly braces).
In the command below, the action statement is <code>'{ print $1 }'</code>.</p>
<pre><code>awk '{ print $1 }' operating-systems.csv
OS,
Chrome
FreeBSD,
Linux,
iOS,
macOS,
Windows
Android,
</code></pre>
<p>By default, <code>awk</code> considers the first empty space as the field delimiter.
That's why in the command above
only the term <strong>Windows</strong> and <strong>Chrome</strong> appear in the results
even though it should be <strong>Windows NT</strong> and <strong>Chrome OS</strong>.
To fix this, we need to tell <code>awk</code> to use a comma as the field separator,
instead of defaulting to an empty space.
To specify that we want <code>awk</code> to treat the comma as a field delimiter,
we use the <code>-F</code> option, and
we surround the comma with single quotes:</p>
<pre><code>awk -F',' '{ print $1 }' operating-systems.csv
OS
Chrome OS
FreeBSD
Linux
iOS
macOS
Windows NT
Android
</code></pre>
<p>By specifying the comma as the field separator,
we now have more accurate results,
and the commas in the results no longer appear either.</p>
<p>Like <code>grep</code> and <code>sed</code>, <code>awk</code> can do search.
In this next example,
I print the column containing the string <strong>Linux</strong>.
Here I am using the <strong>pattern</strong> part of the command: <code>'/Linux/'</code>.</p>
<pre><code>awk -F',' '/Linux/ { print $1 }' operating-systems.csv
Linux
</code></pre>
<p>With <code>awk</code>, we can retrieve more than one column, and
we can use <code>awk</code> to generate reports,
which was part of the original motivation to create this language.</p>
<p>In the next example,
I select columns one and three:</p>
<pre><code>awk -F',' '{ print $1 $3 }' operating-systems.csv
OS Year
Chrome OS 2009
FreeBSD 1993
Linux 1991
iOS 2007
macOS 2001
Windows NT 1993
Android 2008
</code></pre>
<p>But I can make that a bit more readable by adding some text to print:</p>
<pre><code>awk -F',' '{ print $1 &quot; was founded in&quot; $3 &quot;.&quot; }' operating-systems.csv
OS was founded in Year.
Chrome OS was founded in 2009.
FreeBSD was founded in 1993.
Linux was founded in 1991.
iOS was founded in 2007.
macOS was founded in 2001.
Windows NT was founded in 1993.
Android was founded in 2008.
</code></pre>
<p>Since <code>awk</code> is a full-fledged programming language,
it understands data structures,
which means it can do math or work on strings of text.
Let's illustrate this by doing some math or logic on column 3.</p>
<p>Here I print all of column three:</p>
<pre><code>awk -F',' '{ print $3 }' operating-systems.csv
 Year
 2009
 1993
 1991
 2007
 2001
 1993
 2008
</code></pre>
<p>Next I print only the parts of column three that are greater than 2005, and
then pipe <code>|</code> the output through the <code>sort</code> command
to sort the numbers in numeric order:</p>
<pre><code>awk -F',' '$3 &gt; 2005 { print $3 }' operating-systems.csv | sort
 2007
 2008
 2009
</code></pre>
<p>If I want to print only the parts of column one where
column three equals to 2007,
then I would run this command:</p>
<pre><code>awk -F',' '$3 == 2007 { print $1 }' operating-systems.csv
iOS
</code></pre>
<p>If I want to print only the parts of columns one and three
where column 3 equals 2007:</p>
<pre><code>awk -F',' '$3 == 2007 { print $1 $3 }' operating-systems.csv
iOS 2007
</code></pre>
<p>Or, print the entire line where column three equals 2007:</p>
<pre><code>awk -F',' '$3 == 2007 { print $0 }' operating-systems.csv
iOS, Proprietary, 2007
</code></pre>
<p>I can print only those lines where column three is greater than 2000
and less than 2008:</p>
<pre><code>awk -F',' '$3 &gt; 2000 &amp;&amp; $3 &lt; 2008 { print $0 }' operating-systems.csv
iOS, Proprietary, 2007
macOS, Proprietary, 2001
</code></pre>
<p>Even though we wouldn't normally add years up,
let's print the sum of column three
to demonstrate how summing works in <code>awk</code>:</p>
<pre><code>awk -F',' 'sum += $3 { print sum }' operating-systems.csv
2009
4002
5993
8000
10001
11994
14002
</code></pre>
<p>Here are a few basic string operations.
First, print column one in upper case:</p>
<pre><code>awk -F',' '{ print toupper($1) }' operating-systems.csv
OS
CHROME OS
FREEBSD
LINUX
IOS
MACOS
WINDOWS NT
ANDROID
</code></pre>
<p>Or print column on in lower case:</p>
<pre><code>awk -F',' '{ print tolower($1) }' operating-systems.csv
os
chrome os
freebsd
linux
ios
macos
windows nt
android
</code></pre>
<p>Or, get the length of each string in column one:</p>
<pre><code>awk -F',' '{ print length($1) }' operating-systems.csv
2
9
7
5
3
5
10
7
</code></pre>
<p>We can add additional logic.
The double ampersands <code>&amp;&amp;</code> indicate a Boolean/Logical <strong>AND</strong>.
The exclamation point <code>!</code> indicates a Boolean/Logical <strong>NOT</strong>.
In the next example,
I print only those lines where column three is greater than 1990,
and the line has the string &quot;BSD&quot; in it:</p>
<pre><code>awk -F',' '$3 &gt; 1990 &amp;&amp; /BSD/ { print $0 }' operating-systems.csv
FreeBSD, BSD, 1993
</code></pre>
<p>Now I reverse that, and
print only those lines where column three is greater than 1990
and the line DOES NOT have the string &quot;BSD&quot; in it:</p>
<pre><code>awk -F',' '$3 &gt; 1990 &amp;&amp; !/BSD/ { print $0 }' operating-systems.csv
Chrome OS, Proprietary, 2009
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>The double vertical bar <code>||</code> indicates a Boolean/Logical <strong>OR</strong>.
The next command prints only those lines that
contain the string &quot;Proprietary&quot; or the string &quot;Apache&quot;,
or it would print both if both strings were in the text:</p>
<pre><code>awk -F',' '/Proprietary/ || /Apache/ { print $0 }' operating-systems.csv
Chrome OS, Proprietary, 2009
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>I can take advantage of regular expressions.
If the file that I was looking at was large,
and if I wasn't sure that some fields would be upper or lower case,
then I could use regular expressions to consider both possibilities.
That is, by adding <strong>[pP]</strong> and <strong>[aA]</strong>,
<code>awk</code> will check for both the words <strong>Proprietary</strong> and <strong>proprietary</strong>,
and <strong>Apache</strong> and <strong>apache</strong>.</p>
<pre><code>awk -F',' '/[pP]roprietary/ || /[aA]pache/ { print $0 }' operating-systems.csv
Chrome OS, Proprietary, 2009
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p><code>awk</code> is full-fledged programming language.
It provides conditionals, control structures, variables, etc.,
and so I've only scratched the surface.
If you're interested in learning more,
then check out some of these tutorials:</p>
<ul>
<li><a href="https://www.tecmint.com/category/awk-command/">Awk Command</a></li>
<li><a href="https://catonmat.net/awk-one-liners-explained-part-one">Awk One-Liners Explained, Part I: File Spacing, Numbering and Calculations</a></li>
<li><a href="https://www.grymoire.com/Unix/Awk.html">Awk Tutorial</a></li>
<li><a href="https://blog.robertelder.org/intro-to-awk-command/">How To Become a 10x Engineer using the Awk Command</a></li>
<li><a href="https://arstechnica.com/gadgets/2021/08/linux-bsd-command-line-101-using-awk-sed-and-grep-in-the-terminal/">Linux/BSD command line wizardry: Learn to think in sed, awk, and grep</a></li>
<li><a href="https://earthly.dev/blog/awk-examples/">Understanding AWK</a></li>
</ul>
<a class="header" href="print.html#conclusion-3" id="conclusion-3"><h2>Conclusion</h2></a>
<p>The Linux (and other Unix-like OSes) command line
offers a lot of utilities to examine data.
Prior to this lesson, we covered a few of them that help us get
parts of a file and then pipe those parts through other commands
or redirect output to files.
We can use pipes and redirects with <code>grep</code>, <code>sed</code>, and <code>awk</code>.
If needed, we may be able to avoid using the basic utilities like
<code>cut</code>, <code>wc</code>, etc if want to learn more powerful programs
like <code>grep</code>, <code>sed</code>, and <code>awk</code>.</p>
<p>It's fun to learn and practice these.
Despite this, you do not have to become a <code>sed</code> or an <code>awk</code> programmer.
Like the utilities that we've discussed in prior lectures,
the power of programs like these is that their on hand and
easy to use as <strong>one-liners</strong>.
If you want to get started, the resources listed above can guide you.
Here's another compilation of a variety of many utilities that
we have looked at:</p>
<ul>
<li><a href="https://wikis.utexas.edu/display/bioiteam/Scott%27s+list+of+linux+one-liners">compilation of one-liners</a></li>
</ul>
<a class="header" href="print.html#text-editors" id="text-editors"><h1>Text editors</h1></a>
<p>Working on the command line means, well, writing a lot of commands.
But there will be times when we will want to save some of the commands
that we write in order to re-use them later, or we might want to
develop the commands into a script (i.e., program) because we might
want to automate a process. The shell is great for writing one off commands,
but it's not a great place to write multi-line commands.
Plus, the shell that we are working with is called <code>bash</code>,
and <code>bash</code> is a full-fledged programming language.
That means that when you are writing a simple command,
like <code>cd public_html</code>,
you are programming.
So it makes sense that the more programming that we do,
the better we'll get at it,
and the more we'll need more sophisticated environments
to help manage our programs.</p>
<p>As we learn more about how to do systems administration with Linux,
we'll also need to edit configuration files.
These kinds of files exist primarily in the <code>/etc</code> directory.
For example, later in the semester we will install the
<a href="https://httpd.apache.org/">Apache Web Server</a>,
and we will need to edit Apache's configuration files in the process.
We could do this using some of the tools that we've already covered,
like <code>sed</code> and <code>awk</code>,
but it'll make our lives much easier to use a text editor.</p>
<p>In any case, in order to save our commands or edit text files,
a text editor is very helpful.
Programmers use text editors to write programs,
but because programmers may often be working in graphical user environments,
they may often use more specific graphical text editors or <a href="https://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a>s.
As systems administrators, we might not always have a
graphical user interface installed on a server.
The servers that we manage might contain limited software
that does not serve its main purpose as as server because
any non-relevant software on the system takes up disk space,
consumes resources, and/or poses a security threat.
In such cases, we might have to use a text editor built for the
text user interface.</p>
<p>Fortunately, there are lots of options.
In this lesson, I will demonstrate how to use three different
commandline based text editors.
I will start off with two that are complex and not user friendly
(<code>ed</code> and <code>vim</code>),
but will end with a very user-friendly editor that I'll encourage
you all to use in this course (<code>nano</code>).</p>
<p>Although <code>ed</code> and <code>vim</code> are editors that difficult to master,
they are also very powerful editors.
I use both daily, and
am in fact writing in this in <code>vim</code>.
I believe they are worth learning;
however, for the purposes of this course,
I think it's more important that you are aware of them.
If you wish to learn more,
there are lots of additional tutorials on the web on how to use these
fine, esteemed text editors.</p>
<a class="header" href="print.html#ed" id="ed"><h2><code>ed</code></h2></a>
<p><code>ed</code> is a line editor, and
it's one of the most likely text editors
to be installed on a Linux distribution,
but <code>nano</code> might eventually take its place.
<code>ed</code>, or an early version of it,
is also the first text editor for the Unix operating system and
was developed by Ken Thompson, one of the Unix creators, in the late 1960s.
It was written without computer monitors in mind
because those were still uncommon,
and instead for <a href="https://en.wikipedia.org/wiki/Teleprinter">teletypewriters (TTYs)</a> and <a href="https://www.youtube.com/watch?v=2B-U-5ylvWo">printers</a>.
If you visit that second link,
what you will see is the terminal interface from those earlier days.
It is the same basic interface you are using now
when you use your terminal applications,
which are virtualised versions of those old teletypewriters.
I think this is a testament of the power of the terminal---that
advanced computer users still use the
same basic technology today.</p>
<p>In practice, when we use a line editor like <code>ed</code>,
the main process of entering text is like any other editor.
The big difference is when we need to manipulate the text.
In a graphical based text editor,
if we want to delete a word or edit some text,
we might backspace over the text or highlight a word and delete it.
In a line editor,
we manipulate text by referring to lines or across multiple lines and
then run commands on the text in those line(s).
This is much the same process we followed when we covered
<code>grep</code>, <code>sed</code>, and <code>awk</code>, and especially <code>sed</code>,
and it should not surprise you that <a href="https://www.oreilly.com/library/view/sed-awk/1565922255/ch02s01.html">these are related</a>.</p>
<p>To operationalize this,
this means that each line has an <strong>address</strong>,
that the address for line 7 is, for example, <strong>7</strong>, and so forth.
Line editors like <code>ed</code> are command driven.
There is no menu to select from at the top of the <em>window</em>,
and in fact, when we used <code>ed</code> to open an existing file,
the text in the file isn't even printed on the screen.
Instead, if a user wants to delete a word,
or print (to screen) some text,
the user first has to direct the line editor to the
relevant line by its address and
then command the line editor to delete the word on that line,
or print the line.
Line editors can also work on ranges of line,
including all the lines in the file,
just like <code>sed</code> does.</p>
<p>In fact, many of the commands that <code>ed</code> uses are also used by <code>sed</code>.
To compare:</p>
<table><thead><tr><th> Command         </th><th> <code>sed</code>   </th><th> <code>ed</code>   </th></tr></thead><tbody>
<tr><td> append text     </td><td> <code>a</code>     </td><td> <code>a</code>    </td></tr>
<tr><td> replace text    </td><td> <code>c</code>     </td><td> <code>c</code>    </td></tr>
<tr><td> delete text     </td><td> <code>d</code>     </td><td> <code>d</code>    </td></tr>
<tr><td> insert text     </td><td> <code>i</code>     </td><td> <code>i</code>    </td></tr>
<tr><td> print text      </td><td> <code>p</code>     </td><td> <code>p</code>    </td></tr>
<tr><td> substitute text </td><td> <code>s</code>     </td><td> <code>s</code>    </td></tr>
<tr><td> print w/ line # </td><td> <code>=</code>     </td><td> <code>n</code>    </td></tr>
</tbody></table>
<p>However, there are big differences that mainly relate
to the fact that <code>ed</code> is a text editor
and <code>sed</code> is not.
For example, here are some commands available in <code>ed</code> only.
<code>sed</code> can usually accomplish these tasks,
but in a non-trivial way.</p>
<table><thead><tr><th> Command                 </th><th> <code>ed</code> only   </th></tr></thead><tbody>
<tr><td> edit file               </td><td> <code>e</code>         </td></tr>
<tr><td> name file               </td><td> <code>f</code>         </td></tr>
<tr><td> join lines              </td><td> <code>j</code>         </td></tr>
<tr><td> copies lines            </td><td> <code>t</code>         </td></tr>
<tr><td> moves lines             </td><td> <code>m</code>         </td></tr>
<tr><td> undo                    </td><td> <code>u</code>         </td></tr>
<tr><td> saves file              </td><td> <code>w</code>         </td></tr>
<tr><td> quits <code>ed</code>            </td><td> <code>q</code>         </td></tr>
<tr><td> Quits <code>ed</code> w/o saving </td><td> <code>Q</code>         </td></tr>
</tbody></table>
<p>There are other differences,
but these are sufficient for our purposes.</p>
<p>Let's see how to use <code>ed</code> to open a file,
and print the content with and without line numbers.
In the following examples,
the comma <code>,</code> is shorthand for the entire file:</p>
<pre><code>ed operating-systems.csv
183
,p
OS, License, Year
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
,n
1   OS, License, Year
2   Chrome OS, Proprietary, 2009
3	  FreeBSD, BSD, 1993
4	  Linux, GPL, 1991
5	  iOS, Proprietary, 2007
6	  macOS, Proprietary, 2001
7	  Windows NT, Proprietary, 1993
8	  Android, Apache, 2008
</code></pre>
<p>Using <code>ed</code>, another way to remove the header line of the
<strong>operating-systems.csv</strong> file is to specify the line number (<code>1</code>)
and then the delete command (<code>d</code>), just like in <code>sed</code>.
This becomes a permanent change if I save the file
with the <code>w</code> (write) command:</p>
<pre><code>1d
,p
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>To refer to line <strong>ranges</strong>, I add a comma between <strong>addresses</strong>.
Therefore, to edit lines 1, 2, and 3,
but then quit without saving:</p>
<pre><code>1,3d
,p
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
Q
</code></pre>
<p>Note that with <code>sed</code>, in order to make a change <strong>in-place</strong>,
we need to use the <code>-i</code> option.
But with <code>ed</code>,
all changes persist on the file and
are saved with the <code>w</code> command.</p>
<p>I can use <code>ed</code> to <strong>find and replace</strong> strings.
The syntax is the same as it is in <code>sed</code>.
I'll start with a fresh version of the file:</p>
<pre><code>ed operating-systems.csv
183
,s/Linux/GNU\/Linux/
</code></pre>
<p>If we want to add new rows to the file,
we can append <code>a</code> or insert <code>i</code> text
after  or at specific lines.
To append text after line 3, use <code>a</code>:</p>
<pre><code>3a
FreeDOS, GPL, 1998
.
</code></pre>
<p>Because enter input mode when using the <code>a</code>, <code>i</code>, or <code>c</code> commands,
we have to enter a period <code>.</code> on a line by itself to revert
to command mode.</p>
<p>To insert at line 2, use <code>i</code>:</p>
<pre><code>2i
CP/M, Proprietary, 1974
.
</code></pre>
<p>Like <code>sed</code>, we can also <strong>find and replace</strong> using
regular expressions instead of line numbers.
I start a new <code>ed</code> session to reload the file to start fresh:</p>
<pre><code>ed operating-systems.csv
183
/Linux/s/Linux/GNU\/Linux/
</code></pre>
<p>Of course, <code>ed</code> can be used to write and not simply edit files.
Let's start fresh, in the following session,
I'll start <code>ed</code>,
enter append mode <code>a</code>,
write a short letter,
exit append mode <code>.</code>,
name the file <code>f</code>
write <code>w</code> (save) the file,
and quit <code>q</code>:</p>
<pre><code>ed
a
Dear Students,

I hope you find this really interesting.
Feel free to practice and play on the command line,
as well as use tools like ed, the standard editor.

Sincerely,
Dr. Burns
.
f letter.txt
w
q
</code></pre>
<p>It's good to know something about <code>ed</code> not just for cultural reasons,
but also because the line editing technology developed for it
is still in use today,
and is a basic part of the <code>vim</code> text editor,
which is a very widely used application.</p>
<a class="header" href="print.html#vim" id="vim"><h2><code>vim</code></h2></a>
<p>The <code>vim</code> text editor is a take on the <code>vi</code> text editor
and is in fact called <strong>Vi IMproved</strong>.
(The <code>vi</code> text editor is usually available via the <code>nvi</code>
command these days.)
Although <code>vim</code> is not a line editor,
but a screen oriented editor,
it is multi-modal like <code>ed</code> and
in fact is its direct descendant through <a href="https://en.wikipedia.org/wiki/Vi">vi</a>.
Due to this genealogy,
<code>vim</code> can use many of the same commands as <code>ed</code> does
when <code>vim</code> is in command mode.
Like <code>ed</code>, we can start <code>vim</code> at the Bash prompt
with or without a file name.
Here I will open the <strong>letter.txt</strong> file with <code>vim</code>,
and will automatically be in <strong>command mode</strong>:</p>
<pre><code>vim letter.txt
Dear Students,

I hope you find this really interesting.
Feel free to practice and play on the command line,
as well as use tools like ed, the standard editor.

Sincerely,
Dr. Burns
</code></pre>
<p>To enter <strong>insert mode</strong>,
I can type <code>i</code> or <code>a</code> for <strong>insert</strong> or <strong>append</strong> mode.
There isn't any difference on an empty file,
but on a file that has text,
<code>i</code> will start <strong>insert</strong> mode where the cursor lies,
and <strong>a</strong> will start <strong>insert</strong> mode right-adjacent to the cursor.
Once in <strong>insert</strong> mode,
you can type text as you normally would and
use the arrow keys to navigate around the file.</p>
<p>To return to <strong>command mode</strong> in <code>vim</code>,
you press the <strong>Esc</strong> key.
And then you can enter commands like you would with <code>ed</code>,
using the same syntax.</p>
<p>Unlike <code>ed</code>, when in <strong>command mode</strong>,
the commands we type are not placed wherever the cursor is,
but at the bottom of the screen.
Let's first turn on line numbers so we know which address is which,
and then we'll replace <strong>ed</strong> with <strong>Ed</strong>.
Note that I precede these commands with a colon:</p>
<pre><code>:set number
:5s/ed/Ed/
</code></pre>
<p>One of the more powerful things about both <code>ed</code> and <code>vim</code> is that
I can call Bash shell commands from the editors.
Let's say that I wanted to add the date to my letter file.
To do that, Linux has a command called <code>date</code> that when typed and executed,
will return today's date and time.
To call the <code>date</code> command within Vim and insert the output into the
file, I press <strong>Esc</strong> to enter <strong>command mode</strong>
(if I'm not already in it),
enter a colon,
and then use the shell escape command,
which is an exclamation point <code>!</code>,
type a space,
then <code>r</code> for the read file into buffer command,
and then the Bash shell <code>date</code> command:</p>
<pre><code>:r !date
Dear Students,

I hope you find this really interesting.
Feel free to practice and play on the command line,
as well as use tools like ed, the standard editor.
Thu Jun 30 02:44:08 PM EDT 2022

Sincerely,
Dr. Burns
</code></pre>
<p>Since the last edit I made was to replace <strong>ed</strong> with <strong>Ed</strong>,
<code>vim</code> entered the date after that line, which is line 6.
To move that date line to the top of the letter,
I can use the move <code>m</code> command and move it to line 0,
which is the top of the file:</p>
<pre><code>:6m0
Thu Jun 30 02:44:30 PM EDT 2022
Dear Students,

I hope you find this really interesting.
Feel free to practice and play on the command line,
as well as use tools like Ed, the standard editor.

Sincerely,
Dr. Burns
</code></pre>
<p>Although you can use the arrow keys and Page Up/Page Down keys
to navigate in <code>vim</code> and <code>vi</code>,
by far the most excellent thing about this editor is to be
able to use the <strong>j,k,l,h</strong> keys :</p>
<ul>
<li><code>j</code> moves down line by line</li>
<li><code>k</code> moves up line by line</li>
<li><code>l</code> moves right letter by letter</li>
<li><code>h</code> moves left letter by letter</li>
</ul>
<p>Like the other commands, you can precede this with addresses.
To move 2 lines down, you type <code>2j</code>, and so forth.
<code>vi</code> and <code>vim</code> have had such a powerful impact on
software development that you can in fact use these
same keystrokes to navigate a number of sites
such as Gmail, Facebook, Twitter, and more.</p>
<p>To save the file and exit <code>vim</code>,
we return to <strong>command mode</strong> by pressing the <strong>Esc</strong> key,
and then write and quit:</p>
<pre><code>:wq
</code></pre>
<p>The above barely scratches the surface.
There are whole books on these editors as well
as websites, videos, etc that explore them, and
especially <code>vim</code> in more detail.
But now that you have some familiarity with them,
you might find this funny: <a href="https://www.gnu.org/fun/jokes/ed-msg.en.html">Ed, man! !man ed</a>.</p>
<a class="header" href="print.html#nano" id="nano"><h2><code>nano</code></h2></a>
<p>The <code>nano</code> text editor is the user-friendliest of these text editors but
still requires some adjustment as a new command line user.
The friendliest thing about <code>nano</code> is that it is modeless,
which is what you're already accustomed to using,
because it can be used to enter text and manipulate text
without changing to insert or command mode.
It is also friendly because,
like many graphical text editors and other graphical software,
it uses control keys to perform its operations.
The tricky part is that the control keys are assigned
to different keystroke combinations than what
many graphical editors (or word processors) use.
For example, instead of Ctrl-c or Cmd-c to copy,
in <code>nano</code> you press the <code>Alt-6</code> keys
(press <code>Alt</code> and <code>6</code>) to copy.
Then to paste, you press <code>Ctrl-u</code> instead of the more common <code>Ctrl-v</code>.
Fortunately, <code>nano</code> lists the shortcuts at the bottom of the screen.</p>
<p>The shortcuts listed need some explanation, though.
The carat mark is shorthand for the keyboard's <strong>Control (Ctrl)</strong> key.
Therefore to Save As a file,
we <strong>write</strong> out the file by pressing <code>Ctrl-o</code>.
The <strong>Alt</strong> key is also important,
and the shorthand for that is <code>M-</code>.
To mark (highlight) text, you press <code>Alt-a</code>,
which is listed as <code>M-A</code> in the shortcut
list at the bottom of the screen,
then move the cursor over the text that you want to highlight.
If your goal is to copy,
then press <strong>Alt-6</strong> to copy the marked (highlighted) text.
Move to where you want to paste the text,
and press <strong>Ctrl-u</strong> to paste.</p>
<p>For the purposes of this class,
that's all you really need to know about <code>nano</code>.
Use it and get comfortable writing in it.
Some quick tips:</p>
<ol>
<li><code>nano file.txt</code> will open and display the file named <strong>file.txt</strong>.</li>
<li><code>nano</code> by itself will open to an empty page.</li>
<li>Save a file by pressing <code>Ctrl-o</code>.</li>
<li>Quit and save by pressing <code>Ctrl-x</code>.</li>
<li>Be sure to follow the prompts at the bottom of the screen.</li>
</ol>
<a class="header" href="print.html#conclusion-4" id="conclusion-4"><h2>Conclusion</h2></a>
<p>In prior lessons, we learned how to use the Bash interactive shell and
how to view, manipulate, and edit files from that shell.
In this lesson, we learned how to use several command line text editors.
This allows us to save our commands, create scripts,
and in the future, edit configuration files.</p>
<p>The commands we used in this lesson include:</p>
<ul>
<li><code>ed</code> : line-oriented text editor</li>
<li><code>vim</code> : Vi IMproved, a programmer's text editor</li>
<li><code>nano</code> : Nano's ANOther editor, inspired by Pico</li>
</ul>
<a class="header" href="print.html#revisiting-paths" id="revisiting-paths"><h1>Revisiting Paths</h1></a>
<p>I introduced the concept of absolute and relative paths
in <a href="03-filesystem-file-management.html">section 2.3</a>.
In this session, the goal is to revisit paths
(locations of files and directories in the filesystem),
and provide some examples.
This will be important as we proceed to Bash scripting
and other tasks going forward.</p>
<a class="header" href="print.html#change-directories" id="change-directories"><h2>Change Directories</h2></a>
<p>The <code>cd</code> command is used to change directories.
When we login to our systems,
we will find ourselves in our <strong>$HOME</strong> directory,
which is located at <code>/home/USER</code>.</p>
<p>To change to the root directory, type:</p>
<pre><code>pwd
/home/sean
cd /
pwd
/
</code></pre>
<p>From there, to change to the <code>/bin</code> directory:</p>
<pre><code>cd bin
pwd
/bin
</code></pre>
<p>To change to the previous working directory:</p>
<pre><code>cd -
pwd
/
</code></pre>
<p>To go home quickly, just enter <code>cd</code> by itself:</p>
<pre><code>cd
pwd
/home/sean
</code></pre>
<p>To change to the <code>public_html</code> directory:</p>
<pre><code>cd public_html
pwd
/home/sean/public_html
</code></pre>
<p>To change to the directory one level up:</p>
<pre><code>cd ..
pwd
cd /home/sean
</code></pre>
<a class="header" href="print.html#make-directories" id="make-directories"><h2>Make Directories</h2></a>
<p>Sometimes we'll want to create new directories.
To do so, we use the <code>mkdir</code> command.</p>
<p>To make a new directory in our <strong>$HOME</strong> directory:</p>
<pre><code>pwd
/home/sean
mkdir documents
cd documents
pwd
/home/sean/documents
cd
pwd
/home/sean
</code></pre>
<p>To make more than one directory at the same time,
where the second or additional directories are nested,
use the <code>-p</code> option:</p>
<pre><code>mkdir -p photos/2022
</code></pre>
<a class="header" href="print.html#remove-or-delete-files-and-directories" id="remove-or-delete-files-and-directories"><h2>Remove or Delete Files and Directories</h2></a>
<p>To remove a file, we use the <code>rm</code> command.
If the file is in a subdirectory,
specify the relative path:</p>
<pre><code>pwd
/home/sean
rm public_html/index.html
</code></pre>
<p>To remove a file in a directory one level up,
use the <code>..</code> notation.
For example, if I'm in my <strong>documents</strong> directory,
and I want to delete a file in my home (parent) directory:</p>
<pre><code>cd documents
pwd
/home/sean/documents
rm ../file.txt
</code></pre>
<p>Alternatively, I could the tilde as shorthand for <strong>$HOME</strong>:</p>
<pre><code>rm ~/file.txt
</code></pre>
<p>To remove a file nested in multiple subdirectories,
just specify the path (absolute or relative).</p>
<pre><code>rm photos/2022/05/22/IMG_2022_05_22.jpg
</code></pre>
<p>Remember that the <code>rm</code> command deletes files and directories.
Use it with caution,
or with the <code>-i</code> option.</p>
<a class="header" href="print.html#copy-files-or-directories" id="copy-files-or-directories"><h2>Copy Files or Directories</h2></a>
<p>Let's say I want to copy a file in my <strong>$HOME</strong> directory
to a nested directory:</p>
<pre><code>cp file.txt documents/ICT418/homework/
</code></pre>
<p>Or, we can copy a file from one subdirectory to another.
Here I copy a file in my <code>~/bin</code> directory
to my <code>~/documents</code>directory.
The <code>~</code> (tilde) is shorthand for my <strong>$HOME</strong> directory.</p>
<pre><code>cp ~/bin/file.txt ~/documents/``
</code></pre>
<a class="header" href="print.html#move-or-rename-files-or-directories" id="move-or-rename-files-or-directories"><h2>Move or Rename Files or Directories</h2></a>
<p>Let's say I downloaded a file to my <code>~/Downloads</code> directory,
and I want to move it to my <code>~/documents</code> directory:</p>
<pre><code>mv ~/Downloads/article.pdf ~/documents/
</code></pre>
<p>Or, let's say we rename it in the process:</p>
<pre><code>mv ~/Downloads/article.pdf ~/documents/article-2022.pdf
</code></pre>
<p>We can also move directories.
Since the commandline is case-sensitive,
let's say I rename the <strong>documents</strong> directory
to <strong>Documents</strong>:</p>
<pre><code>mv ~/documents ~/Documents
</code></pre>
<a class="header" href="print.html#conclusion-5" id="conclusion-5"><h2>Conclusion</h2></a>
<p>We revisited working with paths in this section,
and we used the following commands to do so:</p>
<ul>
<li><code>cd</code> : change directories</li>
<li><code>mkdir</code> : make directories</li>
<li><code>rm</code> : remove (delete) files or directories</li>
<li><code>cp</code> : copy files or directories</li>
<li><code>mv</code> : move or rename files or directories</li>
</ul>
<a class="header" href="print.html#bash-scripting" id="bash-scripting"><h1>Bash Scripting</h1></a>
<p>It's time to get started on Bash scripting.
So far, we've been working on the Linux commandline.
Specifically, we have been working in the <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">Bash</a> shell.
Wikipedia refers to Bash as a <strong>command language</strong>, and
by that it means that Bash is used as a commandline language
but also as a scripting language.
The main purpose of Bash is to write small applications/scripts
that analyze text (e.g., log files) and automate jobs, but
it can be used for a variety of other purposes.</p>
<a class="header" href="print.html#variables" id="variables"><h2>Variables</h2></a>
<p>One of the most important abilities of any programming or scripting language
is to be able to declare a variable.
Variables enable us to attach some value to a name.
That value may be temporary,
and it's used to pass information to other parts of a program.</p>
<p>In Bash, we declare a variable with the name of the variable,
an equal sign,
and then the value of the variable within double quotes.
Do not insert spaces.
In the following code snippet,
which can be entered on the commandine,
I create a variable named <code>name</code>
and assign it the value <code>Sean</code>.
I create another variable named <code>backup</code>
and assign it the value <code>/media</code>.
Then I use the <code>echo</code> and <code>cd</code> commands
to test the variables:</p>
<pre><code>name=&quot;Sean&quot;
backup=&quot;/media&quot;
echo &quot;My name is ${name}&quot;
echo &quot;${backup}&quot;
cd &quot;${backup}&quot;
pwd
cd
</code></pre>
<p>Variables may include values that may change given some context.
For example, if we want a variable to refer to today's day of week,
we can use <a href="https://www.gnu.org/software/bash/manual/html_node/Command-Substitution.html">command substitution</a>,
which &quot;allows the output of a command
to replace the command name&quot; (see <code>man bash</code>).
Thus, the output at the time this variable is set
will differ if it is set on a different day.</p>
<pre><code>today=&quot;$(date +%A)&quot;
echo &quot;${today}&quot;
</code></pre>
<p>The curly braces are not strictly necessary,
but they offer benefits when we start to use things
like <a href="https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_10_02.html">array variables</a>.
See:</p>
<ul>
<li><a href="https://www.howtogeek.com/725657/how-to-use-brace-expansion-in-linuxs-bash-shell/">How to use curly braces in Bash</a></li>
<li><a href="https://wiki.bash-hackers.org/syntax/expansion/brace">Brace Expansion</a></li>
</ul>
<p>For example, let's look at basic <strong>brace expansion</strong>,
which can be used to generate arbitrary strings:</p>
<pre><code>echo {1..5}
echo {5..1}
echo {a..l}
echo {l..a}
</code></pre>
<p>Another example: using brace notation,
we can generate multiple sub-directories at once.
Start off in your home directory, and:</p>
<pre><code>mkdir -p homework/{drafts,notes}
cd homework
ls
</code></pre>
<p>But more than that, they allow us to deal with arrays (or lists).
Here I create a variable named <code>seasons</code>,
which holds an <strong>array</strong>, or multiple values: <code>winter spring summer fall</code>.
Bash lets me access parts of that array:</p>
<pre><code>seasons=(winter spring summer fall)
echo &quot;${seasons[@]}&quot;
echo &quot;${seasons[1]}&quot;
echo &quot;${seasons[2]}&quot;
echo &quot;${seasons[-1]}&quot;
</code></pre>
<p>See <a href="https://devhints.io/bash#parameter-expansion">Parameter expansions</a> for more advanced techniques.</p>
<a class="header" href="print.html#conditional-expression" id="conditional-expression"><h2>Conditional Expression</h2></a>
<p>Whether working on the commandline, or
writing scripts in a text editor,
it's sometimes useful to be able to write multiple commands
on one line.
There are several ways to do that.
We can include a list of commands on one line in Bash
where each command is separated by a semicolon:</p>
<pre><code>cd ; ls -lt
</code></pre>
<p>But we can use <a href="https://ss64.com/bash/syntax-execute.html">conditional expressions</a> and
apply logic with <code>&amp;&amp;</code> (<strong>Logical AND</strong>) or <code>||</code> (<strong>Logical OR</strong>).</p>
<p>Here, <code>command2</code> is executed if and only if <code>command1</code> is successful:</p>
<pre><code>command1 &amp;&amp; command2
</code></pre>
<p>Here, <code>command2</code> is executed if and only if <code>command1</code> fails:</p>
<pre><code>command1 || command2
</code></pre>
<p>Example:</p>
<pre><code>cd documents &amp;&amp; echo &quot;success&quot;
cd documents || echo &quot;failed&quot;
# combine them:
cd test &amp;&amp; pwd || echo &quot;no such directory&quot;
mkdir test
cd test &amp;&amp; pwd || echo &quot;no such directory&quot;
</code></pre>
<a class="header" href="print.html#shebang-or-hashbang" id="shebang-or-hashbang"><h2>Shebang or Hashbang</h2></a>
<p>When we start to write scripts,
the first thing we add is a [shebang][shebang] at line one.
We can do so a couple of ways:</p>
<pre><code>##!/usr/bin/env bash
</code></pre>
<p>The first one should be more portable, but alternatively,
you could put the direct path to Bash:</p>
<pre><code>#!/usr/bin/bash
</code></pre>
<a class="header" href="print.html#looping" id="looping"><h2>Looping</h2></a>
<p>There are several looping methods Bash,
including: <code>for</code>, <code>while</code>, <code>until</code>, and <code>select</code>.
The <code>for</code> loop is often very useful.</p>
<pre><code>for i in {1..5} ; do
  echo &quot;${i}&quot;
done
</code></pre>
<p>With that, we can create a rudimentary timer:</p>
<pre><code>for i in {1..5} ; do
  echo &quot;${i}&quot; &amp;&amp; sleep 1
done
</code></pre>
<p>We can loop through our <strong>seasons</strong> variable:</p>
<pre><code>seasons=(winter spring summer fall)
for i in ${seasons[@]} ; do
  echo &quot;I hope you have a nice ${i}&quot;
done
</code></pre>
<a class="header" href="print.html#testing" id="testing"><h2>Testing</h2></a>
<p>Sometimes we will want to test certain conditions.
There are two parts to this,
we can use <code>if; then ; else</code> commands,
and we can also use the double square brackets: <code>[[</code>.
There are a few ways to get documentation on these functions.
See the following:</p>
<pre><code>man test
help test
help [
help [[
help if
</code></pre>
<p>We can test integers:</p>
<pre><code>if [[ 5 -ge 3 ]] ; then
  echo &quot;true&quot;
else
  echo &quot;false&quot;
fi
</code></pre>
<p>Reverse it to return the else statement:</p>
<pre><code>if [[ 3 -ge 5 ]] ; then
  echo &quot;true&quot;
else
  echo &quot;false&quot;
fi
</code></pre>
<p>We can test strings:</p>
<pre><code>if [[ &quot;$HOME&quot; = &quot;$PWD&quot; ]] ; then
 echo &quot;You are home.&quot;
else
 echo &quot;You are not home, but I will take you there.&quot;
 cd &quot;$HOME&quot;
 pwd
fi
</code></pre>
<p>We can test file conditions.
Let's first create a file called <strong>paper.txt</strong> and
a file called <strong>paper.bak</strong>.
We will add some trivial content to <strong>paper.txt</strong>
but not to the <strong>paper.bak</strong>.
The following <code>if</code> statement will test if <strong>paper.txt</strong>
has a more recent modification date, and if so,
it'll back up the file with the <code>cp</code> and echo back its success:</p>
<pre><code>if [[ &quot;$HOME/paper.txt&quot; -nt &quot;$HOME/paper.bak&quot; ]] ; then
  cp &quot;$HOME/paper.txt&quot; &quot;$HOME/paper.bak&quot; &amp;&amp; echo &quot;Paper is backed up.&quot;
fi
</code></pre>
<p>Here's a script that prints info depending on which day of the week it is:</p>
<pre><code>day1=&quot;Tue&quot;
day2=&quot;Thu&quot;
day3=&quot;$(date +%a)&quot;

if [[ &quot;$day3&quot; = &quot;$day1&quot; ]] ; then
  printf &quot;\nIf %s is %s, then class is at 9:30am.\n&quot; &quot;$day3&quot; &quot;$day1&quot;
elif [[ &quot;$day3&quot; = &quot;$day2&quot; ]] ; then
  printf &quot;\nIf %s is %s, then class is at 9:30am.\n&quot; &quot;$day3&quot; &quot;$day2&quot;
else
  printf &quot;\nThere is no class today.&quot;
fi
</code></pre>
<a class="header" href="print.html#resources" id="resources"><h2>Resources</h2></a>
<p>I encourage you to explore
some useful guides and cheat sheets on Bash scripting:</p>
<ul>
<li><a href="https://tldp.org/LDP/abs/html/index.html">Advanced Bash-Scripting Guide</a></li>
<li><a href="https://devhints.io/bash">Bash scripting cheatsheet</a></li>
<li><a href="https://www.shellcheck.net/">Bash shellcheck</a></li>
<li><a href="https://www.freecodecamp.org/news/shell-scripting-crash-course-how-to-write-bash-scripts-in-linux/">Shell Scripting for Beginners</a></li>
<li><a href="https://fedoramagazine.org/bash-shell-scripting-for-beginners-part-1/">Bash Shell Scripting for Beginners</a></li>
<li><a href="https://cs.lmu.edu/%7Eray/notes/bash/">Introduction to Bash</a></li>
</ul>
<a class="header" href="print.html#summary" id="summary"><h2>Summary</h2></a>
<p>In this demo, we learned about:</p>
<ul>
<li>creating and referring to variables</li>
<li>conditional expressions with <code>&amp;&amp;</code> and <code>||</code></li>
<li>adding the <strong>shebang</strong> or <strong>hashbang</strong> at the beginning of a script</li>
<li>looping with the <code>for</code> statement</li>
<li>testing with the <code>if</code> statement</li>
</ul>
<p>These are the basics.
I'll cover more practical examples in upcoming demos,
but note that mastering the basics requires understanding
a lot of the commands and paths that we have covered so far in class.
So keep practicing.</p>
<a class="header" href="print.html#grep-and-regular-expressions" id="grep-and-regular-expressions"><h1>Grep and Regular Expressions</h1></a>
<p>Oftentimes, as systems administrators,
we will need to search the contents of a file, like a log file.
One of the commands that we use to do that is the <code>grep</code> command.
We have already discussed using the <code>grep</code> command,
which is not unlike doing any kind of search,
such as in Google.
The command simply involves running <code>grep</code>
along with the search string and against a file.</p>
<a class="header" href="print.html#multiword-strings" id="multiword-strings"><h2>Multiword strings</h2></a>
<p>It's good habit to include search strings within quotes,
but this is especially important if
we would search for multiword strings.
In these cases, we must enclose them in quotes.</p>
<pre><code>cat cities.csv
City | 2020 Census | Founded
New York City, NY | 8804190 | 1624
Los Angeles, CA | 3898747 | 1781
Chicago, IL | 2746388 | 1780
Houston, TX | 2304580 | 1837
Phoenix, AZ | 1624569 | 1881
Philadelphia, PA | 1576251 | 1701
San Antonio, TX | 1451853 | 1718
San Diego, CA | 1381611 | 1769
Dallas, TX | 1288457 | 1856
San Jose, CA | 983489 | 1777

grep &quot;San Antonio&quot; cities.csv
San Antonio, TX | 1451853 | 1718
</code></pre>
<a class="header" href="print.html#whole-words-case-sensitive-by-default" id="whole-words-case-sensitive-by-default"><h2>Whole words, case sensitive by default</h2></a>
<p>However, <code>grep</code> can employ stricter and
more powerful syntax than a Google search.
Since the contents of <strong>cities.csv</strong> are all in lowercase,
if I run the above command without the city named capitalized,
then <code>grep</code> will return nothing:</p>
<pre><code>grep &quot;san antonio&quot; cities.csv
</code></pre>
<p>In order to tell grep to ignore case,
I need to use the <code>-i</code> option.
This is a reminder for you to run <code>man grep</code> and
to read through the documentation and
see what the various options exit for this command.</p>
<pre><code>grep -i &quot;san antonio&quot; cities.csv
</code></pre>
<a class="header" href="print.html#bracket-expressions-and-character-classes" id="bracket-expressions-and-character-classes"><h2>Bracket Expressions and Character Classes</h2></a>
<p>In conjunction with the <code>grep</code> command,
we can also use regular expressions to search the content of text files.
For example, we can use what are called <strong>bracket expressions</strong> and
<strong>character classes</strong> to search for patterns in the text.
Here again using <code>man grep</code> is very important because
it includes instructions on how to use these regular expressions.</p>
<a class="header" href="print.html#bracket-expressions" id="bracket-expressions"><h3>Bracket expressions</h3></a>
<p>From <code>man grep</code> on <strong>bracket expressions</strong>:</p>
<blockquote>
<p>A  bracket  expression  is  a  list  of  characters  enclosed  by  [ and ].
It matches any single character in that list.  If the first character of the
list is the caret ^ then it matches any character not in the list ... For
example, the regular expression [0123456789] matches any single digit.</p>
</blockquote>
<blockquote>
<p>Within a bracket expression, a range expression consists of two characters
separated by a hyphen. It matches any single character that sorts between the
two characters</p>
</blockquote>
<p>To see how this works, let's search the <strong>cities.csv</strong> file
for letters matching <strong>x, y, z</strong>.
Specifically, the following command,
because we are using a hyphen,
matches any characters <strong>in</strong> the range x,y,z:</p>
<pre><code>grep -i [x-z] cities.csv 
</code></pre>
<p>Since the carat key acts as a Boolean NOT
when placed <strong>within the brackets</strong>,
the following command matches any
characters <strong>not in</strong> the range x,y,z:</p>
<pre><code>grep -i [^x-z] cities.csv
</code></pre>
<p>Our ranges may be alphabetical or numerical.
The following command matches any numbers <strong>in</strong> the range 1,2,3:</p>
<pre><code>grep [1-3] cities.csv
</code></pre>
<p>Likewise, the following matches any numbers <strong>not in</strong> the range 1,2,3:</p>
<pre><code>grep [^1-3] cities.csv
</code></pre>
<p>We saw previously that the carat <code>^</code> key indicates
the start of line.
This is true here,
if the carat key precedes the opening bracket.
For example, the following command matches
any lines that start with the upper case letters
within the range of <strong>N,M,O,P</strong>:</p>
<pre><code>grep ^[N..P] cities.csv
New York City, NY | 8804190 | 1624
Phoenix, AZ | 1624569 | 1881
Philadelphia, PA | 1576251 | 1701
</code></pre>
<p>And we can reverse that with the following command:</p>
<pre><code>grep ^[^N..P] cities.csv
City | 2020 Census | Founded
Los Angeles, CA | 3898747 | 1781
Chicago, IL | 2746388 | 1780
Houston, TX | 2304580 | 1837
San Antonio, TX | 1451853 | 1718
San Diego, CA | 1381611 | 1769
Dallas, TX | 1288457 | 1856
San Jose, CA | 983489 | 1777
</code></pre>
<a class="header" href="print.html#character-classes" id="character-classes"><h3>Character classes</h3></a>
<p>Character classes are special types of predefined
bracket expressions.
They make it easy to search for general data.
From <code>man grep</code> on <strong>character classes</strong>:</p>
<blockquote>
<p>Finally, certain named classes of characters are predefined
within bracket expressions, as follows.
Their names are self explanatory, and they are
[:alnum:], [:alpha:], [:blank:], [:cntrl:],
[:digit:], [:graph:], [:lower:], [:print:],
[:punct:], [:space:], [:upper:], and [:xdigit:].
For example, [[:alnum:]] means the character class
of numbers and letters ...</p>
</blockquote>
<p>Here I search for anything that matches the Year column.
Specifically, I search for a blank (empty space) <code>[[:blank:]]</code>,
a four digit string <code>[[:digit:]]{4}</code>,
(the <code>{4}</code> means &quot;The preceding item is
matched exactly 4 times&quot; <code>man grep</code>,
and the number 4 can be replaced with any relevant number).
and an end of line <code>$</code>:</p>
<pre><code>grep -Eo &quot;[[:blank:]][[:digit:]]{4}$&quot; cities.csv 
 1624
 1781
 1780
 1837
 1881
 1701
 1718
 1769
 1856
 1777
</code></pre>
<p>In the above command, the <code>[[:blank:]]</code> can be excluded and
we'd still retrieve the desired results, but
I include it here for demonstration purposes.</p>
<a class="header" href="print.html#anchoring" id="anchoring"><h2>Anchoring</h2></a>
<p>As seen above, outside of bracket expansions and character classes,
we use the caret <code>^</code> to mark the beginning of a line.
We can also use the <code>$</code> to match the end of a line.
This is called <strong>anchoring</strong>.
Anchoring works in many places.
For example, search all lines that start with capital <strong>D through L</strong></p>
<pre><code>grep &quot;^[D-L]&quot; cities.csv
Los Angeles, CA | 3898747 | 1781
Houston, TX | 2304580 | 1837
Dallas, TX | 1288457 | 1856
</code></pre>
<p>And all lines that end with the numbers <strong>4, 5, or 6</strong>:</p>
<pre><code>grep &quot;[4-6]$&quot; cities.csv
New York City, NY | 8804190 | 1624
Dallas, TX | 1288457 | 1856
</code></pre>
<pre><code>grep &quot;^[D-L].*[4-6]$&quot; cities.csv
</code></pre>
<a class="header" href="print.html#repetition" id="repetition"><h2>Repetition</h2></a>
<p>If we want to use regular expressions to identify repetitive patterns,
then we can use repetition operators.
As we saw above,
the most useful one is the <code>*</code> asterisk.
But there are other options:</p>
<p>In come cases, we need to add the -E option
to extend <code>grep</code>'s regular expression functionality:</p>
<p>Here, the preceding item <strong>S</strong> is matched one or more times:</p>
<pre><code>grep -E &quot;S+&quot; cities.csv
San Antonio, TX | 1451853 | 1718
San Diego, CA | 1381611 | 1769
San Jose, CA | 983489 | 1777
</code></pre>
<p>In this search, the preceding item <strong>l</strong> is
matched exactly 2 times:</p>
<pre><code>grep -E &quot;l{2}&quot; cities.csv
Dallas, TX | 1288457 | 1856
</code></pre>
<p>Finally, in this example, the preceding item <strong>7</strong> is matched
at least two times or at most three times:</p>
<pre><code>grep -E &quot;7{2,3}&quot; cities.csv
San Jose, CA | 983489 | 1777
</code></pre>
<a class="header" href="print.html#or-searches" id="or-searches"><h2>OR searches</h2></a>
<p>We can use the vertical bar <code>|</code> to do a Boolean OR search.
In a Boolean OR statement, the statement is True if either
one part is true, the other part is true, or both are true.
In a search statement, this means that at least one part
of the search is true.</p>
<p>The following will return lines for each city because they
both appear in the file:</p>
<pre><code>grep -E &quot;San Antonio|Dallas&quot; cities.csv
San Antonio, TX | 1451853 | 1718
Dallas, TX | 1288457 | 1856
</code></pre>
<p>The following will return the San Antonio line even though
Lexington does not appear in the file:</p>
<pre><code>grep -E &quot;San Antonio|Lexington&quot; cities.csv
</code></pre>
<a class="header" href="print.html#conclusion-6" id="conclusion-6"><h2>Conclusion</h2></a>
<p>We covered a lot in this section on <code>grep</code> and regular expressions.</p>
<p>We specifically covered:</p>
<ul>
<li>multiword strings</li>
<li>whole word searches and case sensitivity</li>
<li>bracket expressions and character classes</li>
<li>anchoring</li>
<li>repetition</li>
<li>Boolean OR searches</li>
</ul>
<p>Even though we focused on <code>grep</code>,
many these regular expressions work across many programming languages.</p>
<a class="header" href="print.html#managing-services-and-software" id="managing-services-and-software"><h1>Managing Services and Software</h1></a>
<p>This section covers installing Linux, using Linux with VirtualBox, systemd, creating backups, and using DNF.</p>
<a class="header" href="print.html#using-gcloud-for-virtual-machines" id="using-gcloud-for-virtual-machines"><h1>Using gcloud for Virtual Machines</h1></a>
<a class="header" href="print.html#virtual-machines" id="virtual-machines"><h2>Virtual Machines</h2></a>
<p>Our goal in this section
is to create a <strong>virtual machine (VM)</strong> <em>instance</em>.
A VM is basically a virtualized operating system
that runs on a host operating system.
That host operating system may also be Linux,
but it could be Windows or macOS.
In short,
when we use virtual machines,
it means instead of installing an operating system
(like Linux, macOS, Windows, etc) on a physical machine,
we use virtual machine software to mimic the process.
The virtual machine, thus, runs on top of our main OS.
It's like an app, where the app is a fully functioning
operating system.</p>
<p>In past semesters of this course,
we used <a href="https://www.virtualbox.org/">VirtualBox</a> to create
virtual machines with Linux as the virtual operating system.
This worked despite whether you or I were running
Windows, macOS, or Linux as our main operating systems.
VirtualBox is freely available virtualization software,
and using it let students and myself
run Linux as a server
on our own desktops and laptops without changing
the underlying OS on those machines
(e.g., Windows, macOS).</p>
<p>However, even though we virtualize an operating
system when we run a VM,
the underlying operating system and CPU architecture
is still important.
When Apple, Inc launched their new M1
(ARM-based) chip in 2020,
it created problems for running non ARM-based operating
systems as virtual machines (i.e., x86_64 chips).</p>
<p>Fortunately, we are able to solve that issue
using a third-party virtualization platform.
In this course, that means we're going to use gcloud (via Google),
but there are other options available that you
can explore on your own.</p>
<a class="header" href="print.html#google-cloud--gcloud" id="google-cloud--gcloud"><h2>Google Cloud / gcloud</h2></a>
<a class="header" href="print.html#google-account" id="google-account"><h3>Google Account</h3></a>
<p>We need to have a Google account to get started with gcloud.
I imagine most of you already have a Google account,
but if not, go ahead and create one at <a href="https://www.google.com">https://www.google.com</a>.</p>
<a class="header" href="print.html#google-cloud-gcloud-project" id="google-cloud-gcloud-project"><h3>Google Cloud (gcloud) Project</h3></a>
<p>Next, you need to use gcloud
to create a Google Cloud project.
Once you've created that project,
you can enable billing for that project,
and then install the gcloud software
on your local machine.</p>
<p>Follow <strong>Step 1</strong> at the top of the
<strong><a href="https://cloud.google.com/sdk/docs/install-sdk">Install the gcloud CLI</a></strong> page
to in create a new project.
Also, review the page on
<a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects#gcloud">creating and managing projects</a>.</p>
<p>When you create your project, you can name it anything,
but try to name it something to do with this course.
E.g., I am using the name <strong>sysadmin-418</strong>.
<strong>Avoid using spaces when naming your project.</strong></p>
<p>Then click on the <strong>Create</strong> button,
and leave the organization field set to <strong>No Organization</strong>.</p>
<a class="header" href="print.html#google-billing" id="google-billing"><h3>Google Billing</h3></a>
<p>The second thing to do is to set up
a billing account for your gcloud project.
This does mean there is a cost associated
with this product, but
the good news is that our bills by the end of the semester should
only amount to a couple of dollars, at most.
<strong><a href="https://cloud.google.com/sdk/docs/install-sdk">Follow Step 2</a></strong> to enable
billing for your new project.
See also the page on how to
<strong><a href="https://cloud.google.com/billing/docs/how-to/manage-billing-account">create, modify, or close your self-serve Cloud Billing account</a></strong></p>
<a class="header" href="print.html#install-the-latest-gcloud-cli-version" id="install-the-latest-gcloud-cli-version"><h3>Install the latest gcloud CLI version</h3></a>
<p>After you have set up billing,
the next step is to install gcloud on your local machines.
The <strong><a href="https://cloud.google.com/sdk/docs/install-sdk">Install the gcloud CLI</a></strong> page
provides instructions for different operating systems.</p>
<p>There are installation instructions
for macOS, Windows, Chromebooks, and various Linux distributions.
Follow these instructions closely for the operating system
that you're using.
Note that for macOS,
you have to choose among three different CPU/chip
architectures.
If you have an older macOS machine (before November 2020 or so),
it's likely that you'll select <strong>macOS 64-bit (x86_64)</strong>.
If you have a newer macOS machine,
then it's likely you'll have to select <strong>macOS 64-bit (arm64, Apple M1
silicon).</strong>
It's unlikely that any of you are using a 32-bit macOS operating system.
If you're not sure which macOS system you have,
then let me know and I can help you determine the appropriate platform.
Alternatively, follow these instructions to find your processor information:</p>
<ul>
<li>click on the Apple menu</li>
<li>choose <strong>About This Mac</strong></li>
<li>locate the <strong>Processor</strong> or <strong>Chip</strong> information</li>
</ul>
<p>After you have downloaded the gcloud CLI
for your particular OS and CPU architecture,
you will need to open a command prompt/terminal
on your machines to complete the instructions
the describe how to install the gcloud CLI.
macOS uses the Terminal app,
which can located using Spotlight.
Windows user can use Command.exe,
which can be located by search also.</p>
<p>Windows users will download a regular <strong>.exe</strong> file,
but macOS users will download a <strong>.tar.gz</strong> file.
Since macOS is Unix, you can use the <code>mv</code> command to
move that file to your <code>$HOME</code> directory.
Then you extract it there using the <code>tar</code> command,
and once extracted
you can change to the directory that it
creates with the <code>cd</code> command.
For example, if you are downloading the X86_64 version
of the gcloud CLI, then you would run the following commands:</p>
<pre><code>mv google-cloud-cli-392.0.0-darwin-x86_64.tar.gz $HOME
tar -xzf google-cloud-cli-392.0.0-darwin-x86_64.tar.gz
cd google-cloud-sdk
</code></pre>
<p>Modify the above commands, as appropriate,
if you're using the M1 version
of the gcloud CLI.</p>
<a class="header" href="print.html#initializing-the-gcloud-cli" id="initializing-the-gcloud-cli"><h3>Initializing the gcloud CLI</h3></a>
<p>Once you have downloaded and installed
the gcloud CLI program,
you need to initialize it on your local machine.
Scroll down on the <a href="https://cloud.google.com/sdk/docs/install-sdk">install page</a>
to the section titled
<strong>Initializing the gcloud CLI</strong>.
In your terminal/command prompt,
run the initialization command,
per the instructions at the above page:</p>
<pre><code>gcloud init
</code></pre>
<p>And continue to follow the above instructions.</p>
<a class="header" href="print.html#gcloud-vm-instance" id="gcloud-vm-instance"><h2>gcloud VM Instance</h2></a>
<p>Once you've initialized gcloud,
log into <a href="https://console.cloud.google.com/">Google Cloud Console</a>,
which should take you to the Dashboard page.</p>
<p>Our first goal is to create a <strong>virtual machine (VM)</strong> <em>instance</em>.
As a reminder,
a VM is basically a virtualized operating system.
That means instead of installing an operating system
(like Linux, macOS, Windows, etc) on a physical machine,
software is used to mimic the process.</p>
<p>gcloud offers a number of Linux-based operating systems
to create VMs.
We're going to use the Ubuntu operating system
and specifically the Ubuntu 20.04 LTS version.</p>
<blockquote>
<p>Ubuntu is a Linux distribution.
A new version of Ubuntu is released every six months.
The 20.04 signifies that this is the April 2020 version.
LTS signifies <strong>Long Term Support</strong>.
LTS versions are released every two years,
and Canonical LTD,
the owners of Ubuntu,
provide standard support for LTS versions for five years.</p>
<p>LTS versions of Ubuntu are also more stable.
Non-LTS versions of Ubuntu only receive nine months of standard support,
and generally apply cutting edge technology,
which is not always desirable for server operating systems.
Each version of Ubuntu has a code name.
20.04 has the code name <strong>Focal Fossa</strong>.
You can see a list of versions, code names, release dates,
and more on Ubuntu's <a href="https://wiki.ubuntu.com/Releases">Releases</a> page.</p>
</blockquote>
<p>We will create our VM using the gcloud console.
To do so, follow these steps:</p>
<ul>
<li>Click the <strong>Select from</strong> drop-down list.</li>
<li>In the window, select the project that you created earlier.</li>
<li>Next, click on <strong>Create a VM</strong>.</li>
<li>Provide a name for your <strong>instance</strong>.
<ul>
<li>E.g., I chose <strong>fall-2022</strong> (no spaces)</li>
</ul>
</li>
<li>Under the <strong>Series</strong> dropdown box, make sure <strong>E2</strong> is selected.</li>
<li>Under the <strong>Machine type</strong> dropdown box, select <strong>e2-micro (2 vCPU, 1 GB memory)</strong>
<ul>
<li>This is the lowest cost virtual machine and perfect for our needs.</li>
</ul>
</li>
<li>Under <strong>Boot disk</strong>, click on the <strong>Change</strong> button.</li>
<li>In the window, select <strong>Ubuntu</strong> from the <strong>Operating system</strong> dropdown box.</li>
<li>Select <strong>Ubuntu 20.04 LTS</strong></li>
<li>Leave <strong>Boot disk type</strong> be set to <strong>Balanced persistant disk</strong></li>
<li>Disk size should be set to <strong>10 GB</strong>.</li>
<li>Click on the <strong>Select</strong> button.</li>
<li>Check the <strong>Allow HTTP Traffic</strong> button</li>
<li>Finally, click on the <strong>Create</strong> button to create your VM instance.</li>
</ul>
<a class="header" href="print.html#connect-to-our-vm" id="connect-to-our-vm"><h2>Connect to our VM</h2></a>
<p>After the new VM machine has been created,
we need to connect to it via the command line.
macOS users will connect to it via their Terminal.app.
Windows users can connect to it via their command prompt.</p>
<p>Unlike our past <code>ssh</code> sessions,
we use a slightly different <code>ssh</code> command
to connect to our VMs.
The syntax follows this pattern:</p>
<pre><code>gcloud compute ssh --zone &quot;zone-info&quot; &quot;name-info&quot; --project &quot;project-info&quot;
</code></pre>
<p>The values in the double quotes in the above command
can be located in your Google Cloud console and
in your VM instances section.
Here is my command:</p>
<pre><code>gcloud compute ssh --zone &quot;us-central1-a&quot; &quot;fall-2022&quot; --project &quot;sysadmin-418&quot;
</code></pre>
<a class="header" href="print.html#update-our-ubuntu-vm" id="update-our-ubuntu-vm"><h2>Update our Ubuntu VM</h2></a>
<p>The VM will include a recently updated version of Ubuntu 20.04,
but it may not be completely updated.
Thus the first thing we need to do is update our machines.
On Ubuntu, we'll use the following two commands,
which you should run also:</p>
<pre><code>apt update
apt -y upgrade
</code></pre>
<a class="header" href="print.html#snapshots" id="snapshots"><h2>Snapshots</h2></a>
<p>Lastly, we have installed a pristine version of Ubuntu,
but it's likely that we will mess something up
as we work on our systems.
Or it could be that our systems may become compromised
at some point.
Therefore, we want to create a snapshot of our newly
installed Ubuntu server.
This will allow us to restore our server if something
goes wrong later.</p>
<p>To get started:</p>
<ol>
<li>
<p>In the left hand navigation panel, click on <strong>Snapshots</strong>.</p>
</li>
<li>
<p>At the top of the page, click on <strong>Create Snapshot</strong>.</p>
</li>
<li>
<p>Provide a name for your snapshot: e.g., <strong>ubuntu-1</strong>.</p>
</li>
<li>
<p>Provide a description of your snapshot: e.g.,</p>
<p>This is a new install of Ubuntu 20.04.</p>
</li>
<li>
<p>Choose your <strong>Source disk</strong>.</p>
</li>
<li>
<p>Choose a <strong>Location</strong> to store your snapshot.</p>
<ul>
<li>To avoid extra charges, choose <strong>Regional</strong>.</li>
<li>From the dropdown box, select the same location (zone-info) your VM has</li>
</ul>
</li>
<li>
<p>Click on <strong>Create</strong></p>
</li>
</ol>
<p><strong><p style="color:red">Please monitor your billing for this to avoid costs
that you do not want to incur.</p></strong></p>
<a class="header" href="print.html#conclusion-7" id="conclusion-7"><h2>Conclusion</h2></a>
<p>Congratulations!
You have just completed your first installation of a Linux server.</p>
<p>To summarize,
in this section,
you learned about and created a VM with gcloud.
This is a lot!
After this course is completed,
you will be able to fire up a virtual machine
on short notice and deploy websites and more.</p>
<a class="header" href="print.html#logical-volume-management" id="logical-volume-management"><h1>Logical Volume Management</h1></a>
<a class="header" href="print.html#background-reading-and-documentation" id="background-reading-and-documentation"><h2>Background Reading and Documentation</h2></a>
<p>Please read the following two articles before proceeding:</p>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-lvm-concepts-terminology-and-operations">An Introduction to LVM Concepts, Terminology, and Operations</a></li>
<li><a href="https://opensource.com/business/16/9/linux-users-guide-lvm">A Linux User's Guide to Logical Volume Management</a></li>
</ul>
<p>Additionally, you should review / skim some helpful <code>man</code> or <code>info</code> pages before proceeding:</p>
<ul>
<li><code>man filesytems</code></li>
<li><code>man ext4</code></li>
<li><code>man btrfs</code></li>
<li><code>man vgdisplay</code></li>
<li><code>man pvdisplay</code></li>
<li><code>man lvdisplay</code></li>
<li><code>man pvcreate</code></li>
<li><code>man lvcreate</code></li>
<li><code>man vgextend</code></li>
<li><code>man fdisk</code></li>
<li><code>man lsblk</code></li>
<li><code>man fstab</code></li>
<li><code>man parted</code></li>
<li><code>man mount</code></li>
<li><code>man cfdisk</code></li>
</ul>
<p>The second link above demonstrates some other logical volume commands that we are not using here. Give the <code>man</code> or <code>info</code> pages for those a read, too.</p>
<a class="header" href="print.html#our-motivation" id="our-motivation"><h2>Our motivation</h2></a>
<p>When we installed Fedora in VirtualBox, we told VirtualBox that our hard drive would be a 100 GB in size. However, when we partitioned our hard drive, we only partitioned around 67 GB of that space. In this lesson, we are going to create a new partition of the <strong>sda</strong> partition, and then expand our logical volume to include this partition. We'll allocate 15 GB of the remaining space to <strong>sda3</strong>.</p>
<p>Briefly:</p>
<ul>
<li>Physical volumes (the <em>pv</em> commands) are related to the physical devices.</li>
<li>Volume groups (the <em>vg</em> commands) organize the physical and logical volumes.</li>
<li>Logical volumes (the <em>lv</em> commands) are about partitions.</li>
</ul>
<a class="header" href="print.html#procedure" id="procedure"><h2>Procedure</h2></a>
<a class="header" href="print.html#administrative-commands" id="administrative-commands"><h3>Administrative commands</h3></a>
<p>We need to use the <code>sudo</code> command to run many of the commands below or login as <strong>root</strong> user. Either way, be careful about running commands with <code>sudo</code> or as root. Mistyping a command may harm your system beyond repair. If you do harm your system beyond repair, delete your clone in VirtualBox and reclone the original install. In the demonstration that follows, I will login as the <strong>root</strong> user.</p>
<p>If you would like to login as root, you can login as root at the intitial prompt after you system boots up; or, if you are already logged in as a regular user, you can type the <code>su root</code> command and then enter the root password that you set when you installed Fedora, or you can use the <code>sudo su</code> command if you are in the wheel group:</p>
<pre><code>su root
</code></pre>
<p>Or:</p>
<pre><code>sudo su
</code></pre>
<a class="header" href="print.html#gather-information" id="gather-information"><h3>Gather information</h3></a>
<p>First we need take a look at what we have before we start. Pay some attention to the details:</p>
<pre><code>lsblk
fdisk -l | less
</code></pre>
<a class="header" href="print.html#create-a-partition" id="create-a-partition"><h3>Create a Partition</h3></a>
<p>We can use a program called <code>parted</code> or a slightly more user friendly program called <code>cfdisk</code>. We'll use <code>cfdisk</code>:</p>
<pre><code>cfdisk
</code></pre>
<p>In <code>cfdisk</code>, complete the following steps:</p>
<ul>
<li>Arrow down to the <strong>Free space</strong> section, and press Enter on <strong>New</strong>.</li>
<li>Next to Partition size, backspace over value and then type <strong>15GB</strong></li>
<li>Set to <strong>primary</strong></li>
<li>Use right arrow key to select <strong>Type</strong></li>
<li>Arrow down to the <strong>8e Linux LVM</strong> selection and press enter</li>
<li>User right arrow key to select <strong>Write</strong>, and then type <strong>yes</strong> at the prompt to write the partition to the virtual disk</li>
</ul>
<a class="header" href="print.html#creating-a-physical-volume" id="creating-a-physical-volume"><h3>Creating a Physical Volume</h3></a>
<p>Next let's create a new physical volume to refer to our new partition. It's important to read the man pages for <em>pvdisplay</em> and <em>pvcreate</em> before you start so that you get a better idea of what you're doing, above and beyond what I'm detailing here or the links above describe. Here we'll use <code>pvdisplay</code> before and after we use <code>pvcreate</code> to note the differenc after we use the latter command:</p>
<pre><code>pvdisplay
pvcreate /dev/sda3
pvdisplay
</code></pre>
<a class="header" href="print.html#add-a-physical-volume-to-a-volume-group" id="add-a-physical-volume-to-a-volume-group"><h3>Add a Physical Volume to a Volume Group</h3></a>
<p>Now we add our new physical volume to an existing volume group, which was created when we installed Fedora. Usage note: <code>vgextend VG PV</code>. (See man page, of course :)</p>
<p>Below, the volume group name is <strong>fedora_fedora</strong> and the physical volume name is, per the last set of commands, <strong>/dev/sda3</strong>. By extending the volume group, we'll have extended its size to encompass the new partition:</p>
<pre><code>vgdisplay
vgextend fedora_fedora /dev/sda3
vgdisplay
</code></pre>
<a class="header" href="print.html#creating-a-logical-volume" id="creating-a-logical-volume"><h3>Creating a Logical Volume</h3></a>
<p>We create a logical volume to allow us to mount the partition and make it accessible to the other parts of the file system. Note: man pages!!!</p>
<pre><code>lvdisplay | less
lsblk
vgdisplay # note Free PE / Size space
lvcreate -L +15GiB --name projects fedora_fedora
lvdisplay
</code></pre>
<a class="header" href="print.html#creating-a-file-system-for-the-lv" id="creating-a-file-system-for-the-lv"><h3>Creating a File System for the LV</h3></a>
<p>Now we need to <strong>format the logical volume</strong>: read the man pages for the commands below, including <code>man fstab</code>.</p>
<pre><code>mkfs.ext4 /dev/fedora_fedora/projects
mkdir /projects
mount /dev/fedora_fedora/projects /projects
</code></pre>
<p>In <code>nano</code>, enter this in the <strong>/etc/fstab</strong> file:</p>
<pre><code>/dev/mapper/fedora_fedora-projects  /projects ext4   defaults    1 2
</code></pre>
<p>Per the instructions in that file, run the following command:</p>
<pre><code>systemctl daemon-reload
</code></pre>
<p>Now reboot the machine. When you reboot, your new partition should be recognized and mounted automatically.</p>
<pre><code>reboot now
</code></pre>
<a class="header" href="print.html#nat-network-address-translation" id="nat-network-address-translation"><h1>NAT (Network Address Translation)</h1></a>
<a class="header" href="print.html#set-up-nat" id="set-up-nat"><h2>Set up NAT</h2></a>
<p>We will want to SSH into our machines without having to use the VirtualBox GUI, and later connect to these virtual machines using other protocols. We can do so by setting up NAT in VirtualBox.</p>
<p>To set up NAT:</p>
<p>In VirtualBox, go to Settings, Network, Advanced, Port Forwarding, and enter the info in the table below. Be sure to replace the <strong>Host IP</strong> address with the IP address of your laptop or desktop. You can find your <strong>Host IP</strong> in your system settings on your Windows or Mac computers, or by opening up a terminal session and typing <code>ifconfig</code> or the equivalent for your operating system.</p>
<table><thead><tr><th align="left"> Name </th><th align="center"> Protocol </th><th align="center"> Host IP      </th><th align="center"> Host Port </th><th align="center"> Guest IP  </th><th align="right"> Guest Port </th></tr></thead><tbody>
<tr><td align="left"> SSH  </td><td align="center"> TCP      </td><td align="center"> 10.163.36.88 </td><td align="center"> 2222      </td><td align="center"> 10.0.2.15 </td><td align="right"> 22         </td></tr>
</tbody></table>
<p>Once you have that IP, and have made the above changes, start your Fedora clone in headless mode.</p>
<p>Now you can SSH into your virtual machine using the terminal of your choice (e.g., the one you used to connect to the remote server).</p>
<p>From a command line, we are going to SSH through port 2222 via our Host IP address. For me, that looks like this:</p>
<pre><code>ssh -p 2222 user@10.163.36.88
</code></pre>
<a class="header" href="print.html#web-console-and-nat" id="web-console-and-nat"><h1>Web Console and NAT</h1></a>
<p>We set NAT to allow SSH traffic between the Host computer (our computers) and the Guest computer (the virtual machines).</p>
<p>[ Insert video demo ]</p>
<p>In VirtualBox, go to Settings, Network, Advanced, Port Forwarding, and add the info in the table below. Be sure to replace the <strong>[ YOUR IP ]</strong> address with the IP address of your laptop or desktop.</p>
<table><thead><tr><th align="center"> Name     </th><th align="center"> Protocol </th><th align="center"> Host IP      </th><th align="center"> Host Port </th><th align="center"> Guest IP  </th><th align="right"> Guest Port </th></tr></thead><tbody>
<tr><td align="center"> Console  </td><td align="center"> TCP      </td><td align="center"> [ YOUR IP ]  </td><td align="center"> 9091      </td><td align="center"> 10.0.2.15 </td><td align="right"> 9090       </td></tr>
</tbody></table>
<p>Now you can access the console from your regular web browser by visiting the following URL:</p>
<pre><code>https://YOURIP:9091
</code></pre>
<a class="header" href="print.html#managing-users" id="managing-users"><h1>Managing Users</h1></a>
<a class="header" href="print.html#the-passwd-file" id="the-passwd-file"><h2>The passwd file</h2></a>
<p>On my Fedora 34 virtual machine, I can see the following information about my user account in the <strong>passwd</strong> file:</p>
<pre><code>cat /etc/passwd
</code></pre>
<p>Or, I can also <code>grep</code> or <code>awk</code> for specific accounts:</p>
<pre><code>grep &quot;$(whoami)&quot; /etc/passwd
sean:x:1000:1000:sean::/home/sean:/usr/bin/bash

grep &quot;sean&quot; /etc/passwd
sean:x:1000:1000:sean::/home/sean:/usr/bin/bash

awk '/sean/ { print $0 }' /etc/passwd
sean:x:1000:1000:sean::/home/sean:/usr/bin/bash
</code></pre>
<p>Any of those commands can be piped through <code>sed</code> to look at the individual fields, one line at a time:</p>
<pre><code>grep &quot;sean&quot; /etc/passwd | sed 's/:/\n/g'
sean
x
1000
1000

/home/sean
/usr/bin/bash
</code></pre>
<p>The fields represent the following information:</p>
<ul>
<li>username</li>
<li>password indicator</li>
<li>user id</li>
<li>group id</li>
<li>user name or comment</li>
<li>home directory</li>
<li>default shell</li>
</ul>
<p>You can read about these fields via <code>man 5 passwd</code>. [ EXPLAIN THE 5 ]</p>
<p>Note that the <strong>user name or comment</strong> line is blank. We can add a comment using the <code>chfn</code>, and there are multiple options to use. If I use the <code>-f</code> option, I can set my full name to appear here. See <code>man chfn</code> for more options to set:</p>
<pre><code>sudo chfn -f &quot;Sean Burns&quot; sean
</code></pre>
<p>The <strong>/etc/passwd</strong> file is a pretty standard Linux file, but some things will change depending on the distribution. For example, the user id may start at a different point depending on the system. However, nowadays both Ubuntu and Fedora set the starting UID and group ID for new users at 1000.</p>
<a class="header" href="print.html#the-shadow-file" id="the-shadow-file"><h2>The shadow file</h2></a>
<p>The <strong>/etc/passwd</strong> file does not contain any passwords but a simple <strong>x</strong> to mark the password field. Passwords on Linux are stored in <strong>/etc/shadow</strong> and are hashed with <strong>sha512</strong>, which is indicated by <strong>$6$</strong>. You need to be root to examine the shadow file or use <code>sudo</code>:</p>
<pre><code>sudo su
grep &quot;sean&quot; /etc/shadow
sean:ENCRYPTED_PASSWORD::0:99999:7:::
grep &quot;sean&quot; /etc/shadow | sed 's/:/\n/g'
sean
ENCRYPTED_PASSWORD

0
99999
7
</code></pre>
<p>The fields are (see <code>man 5 passwd</code>):</p>
<ul>
<li>login name (username)</li>
<li>encrypted password</li>
<li>days since 1/1/1970 since password was last changed</li>
<li>days after which password must be changed</li>
<li>minimum password age</li>
<li>maximum password age</li>
<li>password warning period</li>
<li>password inactivity period</li>
<li>account expiration date</li>
<li>a reserved field</li>
</ul>
<a class="header" href="print.html#the-group-file" id="the-group-file"><h2>The group file</h2></a>
<p>The <strong>/etc/group</strong> file holds group information about the entire system (see <code>man group</code>). In the following command, you can see that I'm a member of the <strong>wheel</strong> group (which allows my account to use the <code>sudo</code> command) and that there's a group name that is also the name of my user account. The <strong>sean</strong> at the end of the <strong>wheel</strong> line indicates that I am a member of the <strong>wheel</strong> group. Although user <strong>sean</strong> is a member of group <strong>sean</strong>, users do not have to be listed as members of their own group.</p>
<pre><code>grep -E 'wheel|^sean' /etc/group
wheel:x:10:sean
sean:x:1000:
</code></pre>
<p>The fields are:</p>
<ul>
<li>group name</li>
<li>group password</li>
<li>group ID (GID)</li>
<li>group members (user list)</li>
</ul>
<a class="header" href="print.html#management-tools" id="management-tools"><h2>Management Tools</h2></a>
<p>Other user and group utilities include:</p>
<ul>
<li><code>/usr/sbin/useradd</code></li>
<li><code>/usr/sbin/usermod</code></li>
<li><code>/usr/sbin/userdel</code></li>
<li><code>/usr/sbin/groupadd</code></li>
<li><code>/usr/sbin/groupdel</code></li>
<li><code>/usr/sbin/groupmod</code></li>
<li><code>/usr/sbin/gpasswd</code></li>
</ul>
<a class="header" href="print.html#practice" id="practice"><h2>Practice</h2></a>
<a class="header" href="print.html#modify-default-new-user-setttings" id="modify-default-new-user-setttings"><h3>Modify default new user setttings</h3></a>
<p>In today's demo, we will modify some default user account settings for new users, and then we'll create a new user account.</p>
<p>Before we proceed, let's review several important configuration files that establish some default settings:</p>
<ul>
<li><strong>/etc/login.defs</strong> : see <code>man login.defs</code></li>
<li><strong>/etc/skel</strong></li>
<li><strong>/etc/default/useradd</strong></li>
</ul>
<p>Let's change some defaults. We can either user <code>sudo</code> or become <code>su</code>. Here I use <code>sudo</code> to become root:</p>
<pre><code>sudo su
</code></pre>
<p>Let's edit the default <strong>.bashrc</strong> file:</p>
<pre><code>nano /etc/skel/.bashrc
</code></pre>
<p>We want to add these lines at the end of the file:</p>
<pre><code># Dear New User,
#
# I have made the following settings to make your life a bit easier:
#
# make &quot;c&quot; a shortcut for &quot;clear&quot;
alias c='clear'
#
# make vi the default command line keybinding
set -o vi
</code></pre>
<p>Now use <code>nano</code> again to create a README file. This file will be added to the home directories of all new users. Add any welcome message you want to add, plus any guidelines for using the system.</p>
<pre><code>nano /etc/skel/README
</code></pre>
<a class="header" href="print.html#add-new-user-account" id="add-new-user-account"><h3>Add new user account</h3></a>
<p>After writing (saving) and exiting <code>nano</code>, we can go ahead and create a new user named <strong>linus</strong>. The <code>-m</code> option creats the user's home directory, the <code>-U</code> option creates a group with the same name as the user, and the <code>-s</code> option sets the default shell to <code>/usr/bin/bash</code>.</p>
<pre><code>useradd -m -U -s /usr/bin/bash linus
grep &quot;linus&quot; /etc/passwd
</code></pre>
<p>Let's add the user's full name:</p>
<pre><code>chfn -f &quot;Linus Torvalds&quot; linus
</code></pre>
<p>The user does not yet have a password set. Let's create a password for <em>linus</em>:</p>
<pre><code>grep &quot;linus&quot; /etc/shadow
passwd linus
grep &quot;linus&quot; /etc/shadow
</code></pre>
<p>Let's modify the minimum days and maximum days of the password's lifetime:</p>
<pre><code>passwd -n 90 linus
passwd -x 180 linus
</code></pre>
<a class="header" href="print.html#create-a-new-group-add-users-to-the-group" id="create-a-new-group-add-users-to-the-group"><h3>Create a new group; add users to the group</h3></a>
<p>Let's now create a new group, and then I will add my account and my new user's account to the group:</p>
<pre><code>grep &quot;linus&quot; /etc/group
groupadd developers
grep &quot;developers&quot; /etc/group
gpasswd -a linus developers
gpasswd -a sean developers
grep &quot;developers&quot; /etc/group
</code></pre>
<p>Exit out of root if logged in as root.</p>
<p>Now login as user linus and examine the user's group memberships:</p>
<pre><code>su linus
groups
</code></pre>
<p>Great! Let's exit out and become root again:</p>
<pre><code>exit
sudo su
</code></pre>
<p>Let's make the <strong>/projects</strong> directory/logical volume a shared directory:</p>
<pre><code>ls -ld /projects
# change ownership of the directory to the group developers
chown :developers /projects
# allow all group users to add and delete from the folder and read/write to each other's files
# See this post for various options:
# https://ubuntuforums.org/showthread.php?t=2138476&amp;p=12616640#post12616640
chmod 2770 /projects
exit
</code></pre>
<p>Log all the way out and then login again:</p>
<pre><code>exit # from root
exit # from regular user
</code></pre>
<p>And then relogin so that the group modification will take affect. Check with the <code>groups</code> command:</p>
<pre><code>groups
</code></pre>
<a class="header" href="print.html#user-account-and-group-deletion" id="user-account-and-group-deletion"><h3>User account and group deletion</h3></a>
<p>If we want to delete the new user's account:</p>
<pre><code>userdel -r linus
grep &quot;linus&quot; /etc/passwd
grep &quot;linus&quot; /etc/shadow
cd /home ; ls -l
</code></pre>
<p>And then delete the new group:</p>
<pre><code>grep &quot;developers&quot; /etc/group
groupdel developers
grep &quot;developers&quot; /etc/group
</code></pre>
<a class="header" href="print.html#systemd" id="systemd"><h1>systemd</h1></a>
<ul>
<li><strong>systemd</strong> is an init system that aims to provide better boot time and a better way to manage services and processes.</li>
<li><strong>systemd</strong> is a replacement of the <strong>System V like init</strong> system that most Linux distributions used.</li>
<li><strong>systemd</strong> includes additional utilities to help manage services on a Linux system; essentially, it's much more than an init system</li>
</ul>
<p>There are only two basic aspects of <strong>systemd</strong> that I want to cover in this lesson, but know that <strong>systemd</strong> is a big, complicated suite of software that provides a lot of functions. In this lesson, though, we will cover using <strong>systemd</strong> to:</p>
<ol>
<li>manage services</li>
<li>examine logs</li>
</ol>
<a class="header" href="print.html#manage-services" id="manage-services"><h2>Manage Services</h2></a>
<p>When we install a complicated piece of software like a web server (e.g., Apache2), a SSH server (e.g., openssh-server), or a database server (e.g., MySQL), then it's helpful if we have some commands that will help us manage that service (the web service/server, the SSH service/server, etc).</p>
<p>For example, after installing a SSH server, we might like to know if it's running, or we might want to stop it if it's running, or start it if it's not. Let's see what that looks like. In the following commands, I will use the <code>dnf</code> utility to install the <code>openssh-server</code>. Then I will check the status of the server using the <code>systemctl status</code> command. I will enable it so that it starts automatically when the operating system is rebooted using the <code>systemctl enable</code> command. Finally, I will make sure the firewall allows outside access to the operating system via <code>ssh</code>. I use the <code>sudo</code> command to run the relevant commands as administrator:</p>
<pre><code>dnf search openssh
sudo dnf install openssh-server
systemctl status sshd.service
sudo systemctl enable sshd.service
sudo firewall-cmd --add-service=ssh --permanent
</code></pre>
<p>There are similar commands to stop a service or to reload a service if a service configuration file has changed. As an example of the latter, let's say that I wanted to present a message to anyone who logs into my system remotely using <code>ssh</code>. In order to do that, I need to edit the main <code>ssh</code> configuration file, which is located in <strong>/etc/ssh/sshd_config</strong>:</p>
<pre><code>cd /etc/ssh
sudo nano sshd_config
</code></pre>
<p>Then I will remove the beginning pound sign and thus un-comment the following line:</p>
<pre><code>#Banner none
</code></pre>
<p>And replace it with a path a file that will contain my message:</p>
<pre><code>Banner /etc/ssh/ssh-banner
</code></pre>
<p>After saving and closing <strong>/etc/ssh/sshd_config</strong>, I will create and open the banner file using <code>nano</code>:</p>
<pre><code>sudo nano /etc/ssh/ssh-banner
</code></pre>
<p>And add the following:</p>
<pre><code>Unauthorized access to this system is not permitted and will be reported to the authorities.
</code></pre>
<p>Since we have changed a configuration for the <code>sshd.service</code>, we need to reload the service so that <code>sshd.service</code> becomes aware of the new configuration. To do that, I use <code>systemctl</code> like so:</p>
<pre><code>sudo systemctl reload sshd.service
</code></pre>
<p>Now, when you log into your Fedora system, you will see that new banner displayed.</p>
<a class="header" href="print.html#examine-logs" id="examine-logs"><h2>Examine Logs</h2></a>
<p>The <code>journalctl</code> command is also part of the <strong>systemd</strong> software suite and is used to monitor logs on the system.</p>
<p>If we just type <code>journalctl</code> at the command prompt, we will be presented with the logs for the entire system. These logs can be paged through by pressing the space bar, the page up/page down keys, or the up/down arrow keys, and they can also be searched by pressing the forward slash <code>/</code>.</p>
<pre><code>journalctl
</code></pre>
<p>However, it's much better to use various options. If you <code>tab tab</code> after typing <code>journalctl</code>, command line completion will provide additional fields (see man page: <code>man 7 systemd.journal-fields</code> and see <code>man man</code> for numbering options) to examine logs for. There are many, but as an example, we see that there is an option called _UID=, which allows us to examine the logs for a user with a specific user id. For example, on our independent Fedora systems, our user ID numbers are 1000. So that means I can see the logs for my account by:</p>
<pre><code>journalctl _UID=1000
</code></pre>
<p>The above shows journal entries related to user ID of 1000, which is my user id. We can see other user IDs by concatenating (<code>cat</code>) the <strong>passwd</strong> file. Not only do real humans who have accounts on the system have user IDs, but many services do to. Here I look at journal entries for <code>chronyd</code>, with a user ID of 992. This is a service that manages the system's time:</p>
<pre><code class="language-bash">cat /etc/passwd
journalctl _UID=984
</code></pre>
<p>I can more specifically look at the logs files for a service by using the <code>-u</code> option with <code>journalctl</code>:</p>
<pre><code>journalctl -u sshd.service
</code></pre>
<p>I can examine logs since last boot:</p>
<pre><code>journalctl -b
</code></pre>
<p>Or I can follow the logs in real-time (press <strong>ctrl-c</strong> to quit the real-time view):</p>
<pre><code>journalctl -f
</code></pre>
<a class="header" href="print.html#useful-systemd-commands" id="useful-systemd-commands"><h2>Useful Systemd Commands</h2></a>
<p>You can see more of what <code>systemctl</code> or <code>journalctl</code> can do by reading through their documentation:</p>
<pre><code>man systemctl
man journalctl
</code></pre>
<p>You can get the status, start, stop, reload, restart a servicer; e.g., sshd:</p>
<pre><code>systemctl status sshd.service
systemctl start sshd.service
systemctl stop sshd.service
systemctl reload sshd.service
systemctl restart sshd.service
systemctl reload-or-restart sshd.service
</code></pre>
<p>To enable, disable sshd (or some service):</p>
<pre><code>systemctl enable sshd.service
systemctl disable sshd.service
</code></pre>
<p>You can check if a service if enabled:</p>
<pre><code>systemctl is-enabled sshd.service
</code></pre>
<p>You can reboot, poweroff, or suspend a system:</p>
<pre><code>systemctl reboot
systemctl poweroff
systemctl suspend
</code></pre>
<p>To show configuration file changes to the system:</p>
<pre><code>systemd-delta
</code></pre>
<p>To list real-time control group process, resource usage, and memory usage:</p>
<pre><code>systemd-cgtop
</code></pre>
<ul>
<li>to search failed processes/services:</li>
</ul>
<pre><code>systemctl --state failed
</code></pre>
<ul>
<li>to list services</li>
</ul>
<pre><code>systemctl list-unit-files -t service
</code></pre>
<ul>
<li>to examine boot time:</li>
</ul>
<pre><code>systemd-analyze
</code></pre>
<a class="header" href="print.html#backing-up-and-managing-software" id="backing-up-and-managing-software"><h1>Backing up and Managing Software</h1></a>
<a class="header" href="print.html#backup-with-rsync" id="backup-with-rsync"><h2>Backup with <code>rsync</code></h2></a>
<a class="header" href="print.html#using-our-backups-directory" id="using-our-backups-directory"><h3>Using our /backups directory</h3></a>
<p>To complete this assignment, you must have successfully completed <strong>Assignment 5: Logical Volumes</strong>.</p>
<p>In <strong>Assignment 5: Logical Volumes</strong>, we created an additional volume at <strong>/backups</strong>. In a real production scenario, we'd use separate drives and remote machines to store backups in order to full prepare for and recover from data loss. But for us, this <strong>/backups</strong> partition will work just fine.</p>
<a class="header" href="print.html#backup-with-rsync-1" id="backup-with-rsync-1"><h3>Backup with <code>rsync</code></h3></a>
<p>In the <strong>Managing Users and Groups</strong> forum, we created a new user for our system. This means that we have at least two user accounts to backup: ours and the new uers.</p>
<p>Now we'll use the <code>rsync</code> command to backup these users' home directories to the <strong>/backups</strong> volume/partition. See <code>man rsync</code> for documentation. The basic syntax is:</p>
<pre><code>rsync option source-directory destination-directory
</code></pre>
<p>Syntax matters here. Specifically, there are two ways to backup the home directories using <code>rsync</code> depending on a small detail in our commands. Consider the next two examples:</p>
<p>In this first example, the <code>rsync</code> command will back up the home directory and all subdirectories to the <code>/backups</code> directory. Thus, <code>rsync</code> behaves differently whether I include or leave out the trailing slash after the <strong>home</strong> source-directory.</p>
<p>Thus, if I run <code>rsync</code> this way:</p>
<pre><code>rsync -ahv --delete /home /backups/
</code></pre>
<p>The results will look like this:</p>
<pre><code>ls /backups
home
ls /backups/home
linus sean
</code></pre>
<p>If I include the trailing slash after the <strong>/home/</strong> directory, like so:</p>
<pre><code>rsync -ahv --delete /home/ /backups/
</code></pre>
<p>Then <code>rsync</code> will sync the contents of the <strong>/home/</strong> directory, and the results will include not <strong>/home</strong> but the specific directories contained in <strong>/home</strong>:</p>
<pre><code>ls /backups
linus sean
</code></pre>
<a class="header" href="print.html#delete-option" id="delete-option"><h3>Delete Option</h3></a>
<p>The <code>--delete</code> option is important. Without it, <code>rsync</code> will add new files to the destination directory when it backs up the source directory. With it, <code>rsync</code> truly syncs. Thus, if a file that was previously backed up to the destination directory and later deleted in the source directory (e.g., because it was no longer needed), then it will be deleted from the destination directory when the <code>--delete</code> option is used. This is how services like Dropbox work.</p>
<p>See other options and functionality for <code>rsync</code> here: <a href="https://www.linux.com/tutorials/how-backup-files-linux-rsync-command-line/">https://www.linux.com/tutorials/how-backup-files-linux-rsync-command-line/</a>. One of the most important options is the ability to backup up to remote machines over a network, and this can be done with the the <code>rsync</code> command.</p>
<a class="header" href="print.html#managing-software" id="managing-software"><h3>Managing Software</h3></a>
<p>Many modern Linux distros offer some kind of package management for installing, managing, and removing software. On RedHat based systems, package management is based on <code>rpm</code> (the RedHat Package Manager). On Debian based systems, package management is based on <code>dpkg</code>.</p>
<p>There are some advanced things you can do with these base package management systems (<code>rpm</code> or <code>dpkg</code>), but most of the time it will be easier to use their front ends. For RedHat systems, the current front end is called <code>dnf</code>, and for Debian systems, it's <code>apt</code> or <code>apt-get</code>. Since the Fedora distribution is part of the RedHat universe, we'll use the <code>dnf</code> command to manage software. As always, read the <code>man dnf</code> manual for more information. See also <a href="https://dnf.readthedocs.io/en/latest/command_ref.html">the online documentation on dnf</a>.</p>
<p>Let's look at a few of the basic <code>dnf</code> commands.</p>
<a class="header" href="print.html#dnf-info-and-search-commands" id="dnf-info-and-search-commands"><h3>dnf info and search commands</h3></a>
<p>To see a history of how <code>dnf</code> has been used on the system:</p>
<pre><code>dnf history
</code></pre>
<p>We get info on the history of a specific package on our system. Since we haven't installed anything yet, there's nothing to look at yet, but the basic syntax looks like this.</p>
<pre><code>dnf history package_name
</code></pre>
<p>To search for a package, we can use the following command to search for the <code>bash</code> package:</p>
<pre><code>dnf search bash
</code></pre>
<p>If the output is more than one page, we can <strong>pipe</strong> it through <code>less</code>.</p>
<p>To get technical information on a specific package, which we might want to do before we install it:</p>
<pre><code>dnf info bash
</code></pre>
<p>We can use <code>dnf</code> to search by tag in order to get information about a package. To get a list of possible tags to search by, we can use the following command:</p>
<pre><code>dnf reqoquery --querytags
</code></pre>
<p>Then to search by tag, we uset the following format that will show us tag-related information for the <code>bash</code> package:</p>
<pre><code>dnf repoquery --queryformat &quot;%{arch}&quot; bash
dnf repoquery --queryformat &quot;%{name}&quot; bash
dnf repoquery --queryformat &quot;%{release}&quot; bash
dnf repoquery --queryformat &quot;%{reponame}&quot; bash
</code></pre>
<p>Software managed by <code>dnf</code> is organized into groups, which contain multiple software packages. We can see a list of groups with this command:</p>
<pre><code>dnf group list
</code></pre>
<p>You should see a category called <strong>Installed Gruops</strong> and listed under that is <strong>Headless Management</strong>. You might recognize that from when we installed Fedora.</p>
<p>To see what packages would be installed with a group, such as the <strong>System Tools</strong> group, we can do:</p>
<pre><code>dnf group info &quot;System Tools&quot;
</code></pre>
<p>If we want to install the default packages with a group, then:</p>
<pre><code>sudo dnf group install &quot;System Tools&quot;
</code></pre>
<a class="header" href="print.html#dnf-install-process-and-commands" id="dnf-install-process-and-commands"><h3>dnf install process and commands</h3></a>
<p>It's pretty simple to install a software package. The hard part will involve configuring a package after it's installed, if it's a complicated piece of software. For now, let's install <code>tmux</code>, which is a terminal multiplexer that we can use to open and manage multiple terminals in a single window.</p>
<pre><code>dnf search tmux
dnf info tmux
sudo dnf install tmux
dnf history tmux
</code></pre>
<p>To use <code>tmux</code>, I like to use the <strong>ctrl-a</strong> keybinding to control it. By default it's set to use <strong>ctrl-b</strong>. Let's configure the new keybinding like so. Here we redirect the configuration to the configureation file in our home directory. Since I'm using a single redirect <strong>&gt;</strong>, this file gets created. Remember to use a double redirect <strong>&gt;&gt;</strong> if appending to the file.</p>
<pre><code>echo &quot;set-option -g prefix C-a&quot; &gt; $HOME/.tmux.conf
</code></pre>
<p>And then start <code>tmux</code> like so:</p>
<pre><code>tmux
</code></pre>
<p>When done, just type <code>exit</code>.</p>
<a class="header" href="print.html#updating-the-system" id="updating-the-system"><h4>Updating the system</h4></a>
<p>It's easy to update the entire system:</p>
<pre><code>sudo dnf update
sudo dnf clean all
</code></pre>
<p>The <code>dnf clean all</code> command removes the downloaded files, thereby freeing up storage space, used to update the system. It does not reverse the update.</p>
<a class="header" href="print.html#dnf-basics" id="dnf-basics"><h3>dnf basics</h3></a>
<p>Here are the basic <code>dnf</code> commands. See <code>man dnf</code> for details:</p>
<ul>
<li><code>dnf search [name]</code></li>
<li><code>dnf install [name]</code></li>
<li><code>dnf remove [name]</code></li>
<li><code>dnf repolist</code></li>
<li><code>dnf list installed</code></li>
<li><code>dnf list available</code></li>
<li><code>dnf provides /usr/bin/bash</code></li>
<li><code>dnf info [name]</code></li>
<li><code>dnf update [name]</code></li>
<li><code>dnf check-update</code></li>
<li><code>dnf update OR dnf upgrade</code></li>
<li><code>dnf autoremove</code></li>
<li><code>dnf clean all</code></li>
<li><code>dnf help clean</code></li>
<li><code>dnf help</code></li>
<li><code>dnf history</code></li>
<li><code>dnf group list 'Python Science'</code></li>
<li><code>dnf group info 'Python Science'</code></li>
<li><code>dnf group install 'Python Science'</code></li>
<li><code>dnf group install --with -optional 'Python Science'</code></li>
<li><code>dnf group upgrade 'Python Science'</code></li>
<li><code>dnf group remove 'Python Science'</code></li>
</ul>
<a class="header" href="print.html#introduction-2" id="introduction-2"><h1>Introduction</h1></a>
<p>This section covers basic networking, DNS, chroot, and firewalls.</p>
<a class="header" href="print.html#networking" id="networking"><h1>Networking</h1></a>
<p>Wikipedia has a good primer on the <a href="https://en.wikipedia.org/wiki/Internet_protocol_suite">Internet protocol suite</a>.</p>
<a class="header" href="print.html#link-layer" id="link-layer"><h2>Link Layer</h2></a>
<a class="header" href="print.html#arp-address-resolution-protocol" id="arp-address-resolution-protocol"><h3>ARP (Address Resolution Protocol)</h3></a>
<p><em>ARP</em> or Address Resolution Protocol is a protocol used to map a network address, like the IP address, to the ethernet address (aka, the MAC or Media Access Control address, or the hardware address). Routers use MAC addresses to enable communication inside networks (w/in subnets) so that computers within a local network can talk to each other. Networks are designed so that IP addresses must be associated with MAC addresses before systems can communicate over a network.</p>
<p>To get ARP info for a system, we can use the <code>ip</code> command, which uses regular options (like <code>-b</code>) but also various <strong>objects</strong> (see <code>man ip</code> for details). Here is the IP info, the ARP output, and the routing table on my Fedora virtual machine (<strong>10.0.2.15</strong>) running on my desktop via a NAT connection:</p>
<pre><code>ip a
ip neigh show
ip route show
</code></pre>
<p>Where:</p>
<ul>
<li><strong>10.0.2.15</strong> is the IP address of my fedora server</li>
<li><strong>10.0.2.2</strong> is the first usable address on subnet, and is likely the virtual router; likewise, <strong>52:54:00:12:35:02</strong> is the MAC/hardware address for that virtual router</li>
<li><strong>10.0.2.0</strong> is called the <strong>network address (signified by the /24 part)</strong>, which is a unique identifier IP address for the subnet</li>
</ul>
<p>The above information is used or created in the following way: A router gets configured to use a specific <strong>network address</strong>, when it's brought online, it searches the network for connected MAC addresses that are assigned to wireless or ethernet cards, it assigns to each of those MAC addresses an available IP address based on the network address,</p>
<a class="header" href="print.html#internet-layer" id="internet-layer"><h2>Internet Layer</h2></a>
<a class="header" href="print.html#ip-internet-protocol" id="ip-internet-protocol"><h3>IP (Internet Protocol)</h3></a>
<p>The Internet Protocol, or <em>IP</em>, address is used to uniquely identify a host on a network and place that host at a specific location (its IP <strong>address</strong>). If that network is subnetted (i.e., routed), then a host's IP address will have a subnet or private IP address that will not be directly exposed to the Internet.</p>
<p>These IP address ranges are reserved, private address ranges, which means no public internet device will have an IP address within these ranges. The private address ranges include:</p>
<table><thead><tr><th> Start Address </th><th> End Address     </th></tr></thead><tbody>
<tr><td> 10.0.0.0      </td><td> 10.255.255.255  </td></tr>
<tr><td> 172.16.0.0    </td><td> 172.31.255.255  </td></tr>
<tr><td> 192.168.0.0   </td><td> 192.168.255.255 </td></tr>
</tbody></table>
<p>If you have a router at home, and look at the IP address for at any of your devices connected to that router, like your phone or computer, you will see that it will have an address within one of the ranges above. For example, it might have an IP address beginning with <strong>192.168.X.X</strong>. This a standard IP address range for a home router. The <strong>10.X.X.X</strong> private range can assign many more IP addresses on its network. This is why you'll see that IP range on bigger networks, like UK's. We'll talk more about subnetwork sizes, shortly.</p>
<a class="header" href="print.html#example-private-ip-usage" id="example-private-ip-usage"><h3>Example Private IP Usage</h3></a>
<p>At work, at one time, the IP address on my desktop was <strong>10.163.34.59/24</strong> via a wired connection. I checked with my office neighbor and found that their desktop reported an IP address of <strong>10.163.34.65/24</strong>. These are on the same subnet, and later I will show you how this works.</p>
<p>At the time, if we both, using our respective wired connected computers, searched Google for <em>[ what's my IP address ]</em>, we will see that we share the same public IP address of <strong>128.163.8.25</strong>.</p>
<p>Without any additional information, this tells us that we know that all traffic coming from our computers and going out to the internet looks like it's coming from the same IP address (<strong>128.163.8.25</strong>). And in reverse, all traffic coming from outside our network first goes to <strong>128.163.8.25</strong> before it's routed to our respective computers via the router.</p>
<p>My laptop tells a different story because it is connected to UK wireless (eduroam). At the time of this writing, the laptop had the IP address <strong>10.47.34.150/16</strong>. You can see there's a different pattern with this IP address. The reason it has a different pattern is because this laptop is on an different subnet. This wireless subnet was configured to allow more hosts to connect to it since it must allow for more devices (i.e., laptops, phones, etc). When I searched Google for my IP address from this laptop, it reported <strong>128.163.238.148</strong>, indicating that UK owns a range of public IP address spaces.</p>
<p>Here's kind of visual diagram of what this network looks like:</p>
<p>| <img src="18-network.png" alt="network diagram" /> |
|:--:|
| <b>Fig. 1. This figure contains a network switch, which is used to route traffic within a subnet. It relies solely on MAC addresses and not IP addresses to determine the location of devices on its subnet. The router is capable of transferring data across networks.</b>|</p>
<a class="header" href="print.html#using-the-ip-command" id="using-the-ip-command"><h3>Using the <code>ip</code> Command</h3></a>
<p>The <code>ip</code> command can do more than provide us information about our network. We can also use it to turn a connection to the network on or off (and more). Here is how to disable and then enable a connection on a machine. Note that <strong>enp0s3</strong> is the name of my network card/device. Yours might have a different name.</p>
<pre><code>sudo ip link set enp0s3 down
sudo ip link set enp0s3 up
</code></pre>
<a class="header" href="print.html#transport-layer" id="transport-layer"><h2>Transport Layer</h2></a>
<a class="header" href="print.html#udp-user-datagram-protocol" id="udp-user-datagram-protocol"><h3>UDP, User Datagram Protocol</h3></a>
<p><em>UDP</em> or User Datagram Protocol performs a similar function as TCP, but it does not error check and data may get lost. UDP is useful for conducting voice over internet calls or for streaming video, such as through YouTube, which uses a type of UDP transmission called QUIC that has builtin encryption.</p>
<a class="header" href="print.html#tcp-transmission-control-protocol" id="tcp-transmission-control-protocol"><h3>TCP, Transmission Control Protocol</h3></a>
<p><em>TCP</em> or Transmission Control Protocol is responsible for the transmission of data and for making sure the data arrives at its destination w/o errors. If there are errors, the data is re-transmitted or halted in case of some failure. Much of the data sent over the internet is sent using TCP.</p>
<a class="header" href="print.html#tcp-and-udp-headers" id="tcp-and-udp-headers"><h3>TCP and UDP Headers</h3></a>
<p>The above protocols send data in data packets (TCP) or datagrams (UDP), but <a href="https://www.cloudflare.com/learning/network-layer/what-is-a-packet/">these terms may be used interchangeably</a>. Packets for both protocols include header information to help route the data across the internet. TCP includes <a href="https://www.imperva.com/learn/ddos/tcp-transmission-control-protocol/">ten fields</a> of header data, and UDP includes <a href="https://www.imperva.com/learn/ddos/udp-user-datagram-protocol/">four fields</a>.</p>
<p>We can see this header data using the <code>tcpdump</code> command, which requires <code>sudo</code> or being <strong>root</strong> to use. The first part of the IP header contains the source address, then comes the destination address, and so forth. Aside from a few other parts, this is the primary information in an IP header.</p>
<p>To use <code>tcpdump</code>, we first identify the IP number of a host, which we can do with the <code>ping</code> command, and then run <code>tcpdump</code>:</p>
<pre><code>ping -c1 www.uky.edu
sudo tcpdump host 128.163.35.46
</code></pre>
<p>While that's running, we can type that IP address in our web browser, or enter <strong>www.uky.edu</strong>, and watch the output of <code>tcpdump</code>.</p>
<p>TCP headers include port information and other mandatory fields for both source and destination servers. The SYN, or synchronize, message is sent when a source or client requests a connection. The ACK, or acknowledgment, message is sent in response, along with a SYN message, to acknowledge the request for a connection. Then the client responds with an additional ACK message. This is referred to as the <a href="https://www.geeksforgeeks.org/tcp-3-way-handshake-process/">TCP three-way handshake</a>. In addition to the header info, TCP and UDP packets include the data that's being sent (e.g., a webpage) and error checking if it's TCP.</p>
<a class="header" href="print.html#ports" id="ports"><h3>Ports</h3></a>
<p>TCP and UDP connections use ports to bind internet traffic to specific IP addresses. Specifically, a <em>port</em> associates a process with an application, such as a web service or outgoing email. That is, ports provide a way to distinguish and filter internet traffic through an IP address. E.g., all traffic going to IP address 10.0.5.33:80 means that this is <strong>http</strong> traffic for the http web service, since http is commonly associated with port 80. Note that the port info is attached to the end of the IP address via a colon.</p>
<p>Common ports include:</p>
<ul>
<li>21: FTP</li>
<li>22: SSH</li>
<li>25: SMTP</li>
<li>53: DNS</li>
<li>143: IMAP</li>
<li>443: HTTPS</li>
<li>587: SMTP Secure</li>
<li>993: IMAP Secure</li>
</ul>
<p>There's a complete list of the 317 default ports on your Linux systems. It's located in the following file:</p>
<pre><code>less /etc/services
</code></pre>
<p>And to get a count of the ports, we can invert grep for lines starting with a pound sign or are empty</p>
<pre><code>grep -Ev &quot;^#|^$&quot; /etc/services | wc -l
</code></pre>
<p>See also the Wikipedia page: <a href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">List of TCP and UDP port numbers</a></p>
<a class="header" href="print.html#ip-subnetting" id="ip-subnetting"><h2>IP Subnetting</h2></a>
<a class="header" href="print.html#private-ip-ranges" id="private-ip-ranges"><h3>Private IP Ranges</h3></a>
<p>When subnetting, we generally work with private IP ranges:</p>
<table><thead><tr><th> Start Address </th><th> End Address     </th></tr></thead><tbody>
<tr><td> 10.0.0.0      </td><td> 10.255.255.255  </td></tr>
<tr><td> 172.16.0.0    </td><td> 172.31.255.255  </td></tr>
<tr><td> 192.168.0.0   </td><td> 192.168.255.255 </td></tr>
</tbody></table>
<a class="header" href="print.html#ip-meaning" id="ip-meaning"><h4>IP Meaning</h4></a>
<p>An IP address is 32 bits (8 x 4), or four bytes, in size. In human readable context, it's usually expressed in the following, decimal-based, notation style:</p>
<ul>
<li><strong>192.168.1.6</strong></li>
<li><strong>172.16.3.44</strong></li>
</ul>
<p>Each set of numbers separated by a dot is referred to as an <strong>octet</strong>. An <strong>octet</strong> is a group of 8 <strong>bits</strong>. Eight <strong>bits</strong> equal a single <strong>byte</strong>. By implication, 8 gigabits equals 1 gigabyte, and 8 megabits equals 1 megabyte. We use these symbols to note the terms:</p>
<table><thead><tr><th> Term  </th><th> Symbol </th></tr></thead><tbody>
<tr><td> bit   </td><td> <em>b</em>    </td></tr>
<tr><td> byte  </td><td> B      </td></tr>
<tr><td> octet </td><td> <em>o</em>    </td></tr>
</tbody></table>
<p>Each bit is represented by either a 1 or a 0. For example, the first address above in binary is:</p>
<ul>
<li>11000000.10101000.00000001.00000110</li>
<li>192.168.1.6</li>
</ul>
<p>Or:</p>
<ul>
<li>11000000 = 192</li>
<li>10101000 = 168</li>
<li>00000001 = 1</li>
<li>00000110 = 6</li>
</ul>
<a class="header" href="print.html#ip-math" id="ip-math"><h3>IP Math</h3></a>
<p>When doing IP math, one easy way to do it is to simply remember that each bit in each of the above bytes is a placeholder for the following values:</p>
<pre><code>128 64 32 16 8 4 2 1
</code></pre>
<p>Alternatively, from low to high:</p>
<table><thead><tr><th> base-2 </th><th> Output </th></tr></thead><tbody>
<tr><td> 2^0    </td><td> 1      </td></tr>
<tr><td> 2^1    </td><td> 2      </td></tr>
<tr><td> 2^2    </td><td> 4      </td></tr>
<tr><td> 2^3    </td><td> 8      </td></tr>
<tr><td> 2^4    </td><td> 16     </td></tr>
<tr><td> 2^5    </td><td> 32     </td></tr>
<tr><td> 2^6    </td><td> 64     </td></tr>
<tr><td> 2^7    </td><td> 128    </td></tr>
</tbody></table>
<p>In binary, 192 is equal to 11000000. It's helpful to work backward. For IP addresses, all octets are 255 or less (256 total, from 0 to 255) and therefore do not exceed 8 bits or places. To convert the integer 192 to binary:</p>
<pre><code>1 * 2^7 = 128
1 * 2^6 =  64 (128 + 64 = 192)
</code></pre>
<p>STOP: There are no values left, and so the rest are zeroes. So: 11000000</p>
<p>Our everyday counting system is base-10, but binary is base-2, and thus another way to convert binary to decimal is to multiple each bit (1 or 0) by the power of base two of its placeholder:</p>
<pre><code>(0 * 2^0) = 0 +
(0 * 2^1) = 0 +
(0 * 2^2) = 0 +
(0 * 2^3) = 0 +
(0 * 2^4) = 0 +
(0 * 2^5) = 0 +
(1 * 2^6) = 64 +
(1 * 2^7) = 128 = 192
</code></pre>
<p>Another way to convert to binary: simply subtract the numbers from each value. As long as there is something remaining or the placeholder equals the remainder of the previous subtraction, then the bit equals 1. So:</p>
<ul>
<li>192 - 128 = 64 -- therefore the first bit is equal to 1.</li>
<li>Now take the leftover and subtract it:</li>
<li>64 - 64 = 0 -- therefore the second bit is equal to 1.</li>
</ul>
<p>Since there is nothing remaining, the rest of the bits equal 0.</p>
<a class="header" href="print.html#subnetting-examples" id="subnetting-examples"><h3>Subnetting Examples</h3></a>
<p>Subnetting involves dividing a network into two or more subnets. When we subnet, we first identify the number of hosts we will require on the subnet. For starters, let's assume that we need a subnet that can assign at most 254 IP addresses to the devices attached to it via the router.</p>
<p>We need two additional IP addresses: the <strong>subnet mask</strong> and the <strong>network address/ID</strong>. The <strong>network address</strong> identifies the network and the <strong>subnet mask</strong> marks the boundary between the network and the hosts. Knowing or determining the <strong>subnet mask</strong> will allow us to determine how many hosts can exist on a network. Both the <strong>network address</strong> and the <strong>subnet mask</strong> can be written as IP addresses, but they cannot be assigned to computers on a network.</p>
<p>When we have determined these IPs, we will know the <strong>broadcast address</strong>. This is the last IP address in a subnet range, and it cannot be assigned to a connected device. The <strong>broadcast address</strong> is used by a router or other devices to communicate to all connected devices on the subnet.</p>
<p>For our sake, let's work backwards. We want to identify and describe a network that we are connected to. Let's work with two example private IP addresses that exist on two separate subnets.</p>
<a class="header" href="print.html#example-1-19216816" id="example-1-19216816"><h4>Example 1: 192.168.1.6</h4></a>
<p>Let's derive the network mask and the network address (or ID) from this IP address.</p>
<pre><code>11000000.10101000.00000001.00000110 IP              192.168.1.6
11111111.11111111.11111111.00000000 Mask            255.255.255.0
-----------------------------------
11000000.10101000.00000001.00000000 Network Address 192.168.1.0
</code></pre>
<p>Note the mask has 24 ones followed by 8 zeroes. That 24 is used as CIDR notation:</p>
<p>192.168.1.6/24</p>
<p>For Example 1, we have the following subnet information:</p>
<table><thead><tr><th> Type         </th><th> IP            </th></tr></thead><tbody>
<tr><td> Netmask/Mask </td><td> 255.255.255.0 </td></tr>
<tr><td> Network ID   </td><td> 192.168.1.0   </td></tr>
<tr><td> Start Range  </td><td> 192.168.1.1   </td></tr>
<tr><td> End Range    </td><td> 192.168.1.254 </td></tr>
<tr><td> Broadcast    </td><td> 192.168.1.255 </td></tr>
</tbody></table>
<a class="header" href="print.html#example-2-101603875" id="example-2-101603875"><h4>Example 2: 10.160.38.75</h4></a>
<p>For example 2:</p>
<pre><code>00001010.10100000.00100110.01001011 IP               10.160.38.75
11111111.11111111.11111111.00000000 Mask            255.255.255.0
-----------------------------------
00001010.10100000.00100110.00000000 Network Address   10.160.38.0
</code></pre>
<table><thead><tr><th> Type         </th><th> IP            </th></tr></thead><tbody>
<tr><td> Netmask/Mask </td><td> 255.255.255.0 </td></tr>
<tr><td> Network ID   </td><td> 10.160.38.0   </td></tr>
<tr><td> Start Range  </td><td> 10.160.38.1   </td></tr>
<tr><td> End Range    </td><td> 10.160.38.254 </td></tr>
<tr><td> Broadcast    </td><td> 10.160.38.255 </td></tr>
</tbody></table>
<a class="header" href="print.html#example-3-1721616224" id="example-3-1721616224"><h4>Example 3: 172.16.1.62/24</h4></a>
<p>For example 3:</p>
<pre><code>10101100 00010000 00000001 00100111 IP                172.16.1.62
11111111 11111111 11111111 00000000 Mask            255.255.255.0
-----------------------------------
10101100 00010000 00000001 00000000 Network Address    172.16.1.0
</code></pre>
<table><thead><tr><th> Type         </th><th> IP            </th></tr></thead><tbody>
<tr><td> Netmask/Mask </td><td> 255.255.255.0 </td></tr>
<tr><td> Network ID   </td><td> 172.16.1.0    </td></tr>
<tr><td> Start Range  </td><td> 172.16.1.1    </td></tr>
<tr><td> End Range    </td><td> 172.16.1.254  </td></tr>
<tr><td> Broadcast    </td><td> 172.16.1.255  </td></tr>
</tbody></table>
<p>To determine the number of hosts on a CIDR /24 subnet, we look at the start and end ranges. In all three of the above examples, the start range begins with X.X.X.1 and ends with X.X.X.254. Therefore, there are 254 maximum hosts allowed on these subnets.</p>
<a class="header" href="print.html#example-4-10052316" id="example-4-10052316"><h4>Example 4: 10.0.5.23/16</h4></a>
<p>The first three examples show instances where the CIDR is set to /24. This only allows 254 maximum hosts on a subnet. If the CIDR is set to /16, then we can theoretically allow 65,534 hosts on a subnet.</p>
<p>For example 4, then: 10.0.5.23/16</p>
<pre><code>00001010.00000000.00000101.00010111 IP Address: 10.0.5.23
11111111.11111111.00000000.00000000 Mask:       255.255.0.0
-----------------------------------------------------------
00001010.00000000.00000000.00000000 Network ID: 10.0.0.0
</code></pre>
<table><thead><tr><th> Type         </th><th> IP            </th></tr></thead><tbody>
<tr><td> IP Address   </td><td> 10.0.5.23     </td></tr>
<tr><td> Netmask/Mask </td><td> 255.255.0.0   </td></tr>
<tr><td> Network ID   </td><td> 10.0.0.0      </td></tr>
<tr><td> Start Range  </td><td> 10.0.0.1      </td></tr>
<tr><td> End Range    </td><td> 10.0.255.254  </td></tr>
<tr><td> Broadcast    </td><td> 10.0.255.255  </td></tr>
</tbody></table>
<p>Hosts:</p>
<table><thead><tr><th> IPs          </th><th>         </th></tr></thead><tbody>
<tr><td> 10.0.0.1     </td><td>         </td></tr>
<tr><td> 10.0.0.255   </td><td> = 256   </td></tr>
<tr><td> 10.0.1.1     </td><td>         </td></tr>
<tr><td> 10.0.255.255 </td><td> = 256   </td></tr>
</tbody></table>
<ul>
<li>Number of Hosts = 256 x 256 = 65536</li>
<li>Subtract Network ID (1) and Broadcast (1) = 2 IP addresses</li>
<li>Number of Usable Hosts = 256 x 256 - 2 = 65534</li>
</ul>
<a class="header" href="print.html#ipv6-subnetting" id="ipv6-subnetting"><h3>IPv6 subnetting</h3></a>
<p>We're not going to cover IPv6 subnetting, but if you're interested, this is a nice article: <a href="https://supportforums.cisco.com/document/66991/ipv6-subnetting-overview-and-case-study">IPv6 subnetting overview</a></p>
<a class="header" href="print.html#introduction-to-dns-the-domain-name-system" id="introduction-to-dns-the-domain-name-system"><h1>Introduction to DNS, the Domain Name System</h1></a>
<a class="header" href="print.html#dns-intro-videos" id="dns-intro-videos"><h2>DNS Intro Videos</h2></a>
<p>Two helpful YouTube videos. The first one provides an overview of the DNS system:</p>
<p><a href="https://www.youtube.com/watch?v=mpQZVYPuDGU">How a DNS Server (Domain Name System) works</a></p>
<p>The second video illustrates how to use a GUI to create and manage DNS records.</p>
<p><a href="https://www.youtube.com/watch?v=cwT82ibOM2Q">DNS Records</a></p>
<p>Here is a nice intro to recursive DNS:</p>
<p><a href="https://www.cloudflare.com/learning/dns/what-is-recursive-dns/">https://www.cloudflare.com/learning/dns/what-is-recursive-dns/</a></p>
<a class="header" href="print.html#fqdn-the-fully-qualified-domain-name" id="fqdn-the-fully-qualified-domain-name"><h2>FQDN: The Fully Qualified Domain Name</h2></a>
<p>The structure of the domain name system is like the structure of the UNIX/Linux file hierarchy; that is, it is like an inverted tree.</p>
<p>The fully qualified domain name includes a period at the end of the top-level domain. Your browser is able to supply that dot since we often don't use it when typing website addresses.</p>
<p>Thus, for Google's main page, the FQDN is:</p>
<p>FQDN: www.google.com.</p>
<p>And the parts include:</p>
<pre><code>.           root domain
com         top-level domain
google.     second-level domain
www.        third-level domain
</code></pre>
<p>This is important to know so that you understand how the <strong>Domain Name System</strong> works and which DNS servers are responsible for their part of the network.</p>
<a class="header" href="print.html#root-domain" id="root-domain"><h3>Root domain</h3></a>
<p>The root domain is managed by root name servers. These servers are listed on the <a href="https://www.iana.org/domains/root/servers">IANA</a>, the Internet Assigned Numbers Authority, website, but are managed by multiple operators. The root servers manage the root domain, alternatively referred to as the zone, or the <code>.</code> at the end of the <code>.com.</code>, <code>.edu.</code>, etc.</p>
<a class="header" href="print.html#alternative-dns-root-systems" id="alternative-dns-root-systems"><h4>Alternative DNS root systems</h4></a>
<p>Aside: It's possible to have alternate internets by using outside root name servers. This is not common, but it happens. Read about a few of them here:</p>
<ul>
<li>sdf: <a href="https://web.archive.org/web/20081121061730/http://www.smtpnic.org/">https://web.archive.org/web/20081121061730/http://www.smtpnic.org/</a></li>
<li>opennic: <a href="https://www.opennicproject.org/">https://www.opennicproject.org/</a></li>
<li>alternic: <a href="https://en.wikipedia.org/wiki/AlterNIC">https://en.wikipedia.org/wiki/AlterNIC</a></li>
</ul>
<p>Russia, as an example, has threated to use it's own alternate internet based on a different DNS root system. This would essentially create a large, second internet. You can read about in this <a href="https://spectrum.ieee.org/tech-talk/telecom/internet/could-russia-really-build-its-own-alternate-internet">IEEE Spectrum article</a>.</p>
<a class="header" href="print.html#top-level-domain-tld" id="top-level-domain-tld"><h3>Top level domain (TLD)</h3></a>
<p>We are all familiar with top level domains. Specific examples include:</p>
<ul>
<li>generic names: .org, .com, .net, .mil, .gov</li>
<li>and country code-based: .us, .uk, .ca</li>
</ul>
<p>We can download a list of those top level names from IANA, and get a total count:</p>
<pre><code>wget https://data.iana.org/TLD/tlds-alpha-by-domain.txt
sed '1d' tlds-alpha-by-domain.txt | wc -l
1495
</code></pre>
<a class="header" href="print.html#second-level-domain-names" id="second-level-domain-names"><h3>Second-level domain names</h3></a>
<p>In the Google example, the second level domain is <strong>google</strong>. Other examples include: <strong>redhat</strong> in <strong>redhat.com</strong> and <strong>debian</strong> in <strong>debian.org</strong>. <a href="https://www.amazon.com/Linux-Administration-Beginners-Guide-Seventh/dp/0071845364">Soyinka, (2016)</a> refers to this part of the FQDN as that which makes up the &quot;organizational boundary of the namespace&quot; (p. 425).</p>
<a class="header" href="print.html#third-level-domain-names--hostnames--subdomains" id="third-level-domain-names--hostnames--subdomains"><h3>Third-level domain names / hostnames / subdomains</h3></a>
<p>When you've purchased (leased) a top and second level domain like getfedora.org, you can choose whether you employ third level domains. For example: www is a third level domain. If you owned <code>example.org</code>, you could also have <code>www.example.org</code> resolve to a different location, or, <code>www.example.org</code> could resolve to the second-level domain itself. That is:</p>
<ul>
<li>www.debian.org can point to debian.org</li>
</ul>
<p>But it could also point to a separate server, such that <strong>debian.org</strong> and <strong>www.debian.org</strong> would be two separate servers with two separate websites or services. Although this is not common with third-level domains that start with <strong>www</strong>, it is common with others.</p>
<p>For example, with hostnames that are not <code>www</code>:</p>
<ul>
<li>google.com resolves to www.google.com</li>
<li>google.com does not resolve to:
<ul>
<li>drive.google.com, or</li>
<li>maps.google.com, or</li>
<li>mail.google.com</li>
</ul>
</li>
</ul>
<p>This is because those other three provide different, but specific services.</p>
<a class="header" href="print.html#dns-paths" id="dns-paths"><h2>DNS Paths</h2></a>
<p>Recursive DNS is the first DNS server to be queried in the DNS system. This is the resolver server in the first video above. This server queries itself (recursive) to check if the domain to IP mapping has been cached in its system.</p>
<p>If it hasn't been cached, then the DNS query is <em>forwarded</em> to a root server and and so forth down the line.</p>
<p>We can use the <code>dig</code> command to query the non-cached DNS paths. Let's say we want to follow the DNS path for <strong>google.com</strong>, then we can start by querying any <a href="https://www.iana.org/domains/root/servers">root server</a>. In the output, we wan to pay attention to the QUERY field, the ANSWER field, and the Authority Section:</p>
<pre><code>dig @198.41.0.4 google.com 
</code></pre>
<p>The root servers only know about top level domains, and in this case, that's the <code>com.</code> domain. Fortunately, it lists some authoritative TLD servers and their IP addresses, and we can query one of those next:</p>
<pre><code>dig @192.12.94.30 google.com
</code></pre>
<p>Now we know something about the TLD. Here we still don't know the full path, but it does tell us that for <strong>google.com</strong>, we need to query one of Google's name servers:</p>
<pre><code>dig @216.239.34.10 google.com
</code></pre>
<p>And now we finally get our answer, which is that <strong>google.com</strong> resolves to 142.250.190.78, at least for me and at this instant.</p>
<a class="header" href="print.html#dns-record-types" id="dns-record-types"><h3>DNS Record types</h3></a>
<ul>
<li>SOA:    Start of Authority: describes the site's DNS entries
<ul>
<li>IN:     Internet Record</li>
</ul>
</li>
<li>NS:     Name Server: state which name server provides DNS resolution</li>
<li>A:      Address records: provides mapping hostname to IPv4 address</li>
<li>AAAA:   Address records: provides mapping hostname to IPv6 address</li>
</ul>
<pre><code>dig google.com
google.com.     IN      A       142.251.32.78
</code></pre>
<ul>
<li>PTR:    Pointer Record: provides mapping from IP Address to Hostname</li>
<li>MX:     Mail exchanger: the MX record maps your email server.</li>
<li>CNAME:  Canonical name: used so that a domain name may act as an alias for another domain name. Thus, say someone visits www.example.org, but if no subdomain is set up for www, then the CNAME can point to example.org.</li>
</ul>
<a class="header" href="print.html#dns-toolbox" id="dns-toolbox"><h3>DNS Toolbox</h3></a>
<p>It's important to be able to troubleshoot DNS issues. To do that, we have a few utilities available. Here are examples and you should read the <code>man</code> pages for each one:</p>
<p><code>host</code>: resolve hostnames to IP Address; or IP addresses to hostnames</p>
<pre><code>man -f host
host (1) - DNS lookup utility
host uky.edu
host 128.163.35.46
host -t MX uky.edu
host -t MX dropbox.com
host -t MX netflix.com
host -t MX wikipedia.org
</code></pre>
<p><code>dig</code>: domain information gopher -- get info on DNS servers</p>
<pre><code>man -f dig
dig (1) - DNS lookup utility
dig uky.edu
dig uky.edu MX
dig www.uky.edu CNAME
</code></pre>
<p><code>nslookup</code>: query internet name servers</p>
<pre><code>man -f nslookup
nslookup (1) - query Internet name servers interactively
nslookup
&gt; uky.edu
&gt; yahoo.com
&gt; exit
</code></pre>
<p><code>whois</code>: determine ownership of a domain</p>
<pre><code>man -f whois
whois (1) - client for the whois directory services
whois uky.edu | less
</code></pre>
<p><code>resolve.conf</code>: local resolver info; what's your DNS info</p>
<pre><code>man -f  resolv.conf
resolv.conf (5) - resolver configuration file
cat /etc/resolv.conf
resolvectl status
</code></pre>
<a class="header" href="print.html#local-security-chroot" id="local-security-chroot"><h1>Local Security: <code>chroot</code></h1></a>
<p>A <code>chroot jail</code> is a technology used to change the &quot;apparent root <code>/</code> directory for a user or a process&quot; and confine that user to that location on the system. A user or process that is confined to the <code>chroot jail</code> cannot easily see or access the rest of the file system and will have limited access to the binaries (executables/apps/utilities) on the system. From its <code>man</code> page:</p>
<pre><code>chroot (8) - run command or interactive shell with special root directory
</code></pre>
<p>Although it is not security proof, it does have some useful security use cases, from tampering. Some have used <code>chroot</code> to contain DNS servers, for example.</p>
<p><code>chroot</code> is also the conceptual basis for some kinds of virtualization technologies that are common today, like <a href="https://en.wikipedia.org/wiki/Docker_(software)">Docker</a>.</p>
<a class="header" href="print.html#chroot-a-current-user" id="chroot-a-current-user"><h2>chroot a current user</h2></a>
<p>In this tutorial, we are going to create a <code>chroot</code> for a human user account.</p>
<p><strong>Step 1</strong>: Let's create a new user. After we create the new user, we will <code>chroot</code> that user going forward.</p>
<pre><code>sudo su
useradd -m -U -s /usr/bin/bash vader
passwd vader
</code></pre>
<p><strong>Step 2</strong>: Next, we <code>chroot</code> <em>vader</em> into a new directory. That directory will be located at <code>/var/chroot</code>. Note that the root directory for our regular users is <code>/</code>, but user <em>vader</em>'s root directory will be different <code>/var/chroot</code>, even if they can't tell.</p>
<pre><code>mkdir /var/chroot
</code></pre>
<p><strong>Step 3</strong>: Now we set up available binaries for the user. We'll only allow <code>bash</code> for now.  To do that, we'll create a <code>bin/</code> directory, and copy <code>bash</code> to that directory.</p>
<pre><code>which bash
mkdir -p /var/chroot/usr/bin
mkdir -p /var/chroot/bin
cp /usr/bin/bash /var/chroot/usr/bin/
cp /usr/bin/bash /var/chroot/bin/
</code></pre>
<p><strong>Step 4</strong>: Large software applications have dependencies (aka, libraries). Thus, next we copy the libraries that <code>bash</code> needs to run.</p>
<p>To identify libraries needed by bash:</p>
<pre><code>ldd /usr/bin/bash
</code></pre>
<p>Use the <code>locate</code> command to be sure you identify the exact locations of the libraries:</p>
<pre><code>locate libtinfo.so.6
...
</code></pre>
<p>Create a library directory. We'll name the library directory after lib64 since these are all lib64 libraries.</p>
<pre><code>mkdir /var/chroot/lib64
cp /usr/lib64/libtinfo.so.6 /var/chroot/lib64/
cp /usr/lib64/libdl.so.2 /var/chroot/lib64/
cp /usr/lib64/libc.so.6 /var/chroot/lib64/
cp /usr/lib64/ld-linux-x86-64.so.2 /var/chroot/lib64/
</code></pre>
<p><strong>Step 5</strong>: Create and test the <code>chroot</code></p>
<pre><code>chroot /var/chroot/
bash-5.1# ls
bash: ls: command not found
bash-5.1# help
bash-5.1# dirs
bash-5.1# cd bin/
bash-5.1# dirs
bash-5.1# cd ../lib64/
bash-5.1# dirs
bash-5.1# cd ..
bash-5.1# exit
</code></pre>
<p><strong>Step 6</strong>: Create a new group called <em>chrootjail</em>. We can add users to this group that we want to jail. Instructions are based on <a href="https://linuxconfig.org/how-to-automatically-chroot-jail-selected-ssh-user-logins">linuxconfig.org</a>.</p>
<pre><code>groupadd chrootjail
usermod -a -G chrootjail vader
groups vader
</code></pre>
<p><strong>Step 7</strong>: Edit <code>/etc/ssh/sshd_config</code> to direct users in the <code>chrootjail</code> group to the <code>chroot</code> directory. Add the following line at the end of the file. Then restart ssh server.</p>
<pre><code># nano /etc/ssh/sshd_config
Match group chrootjail
            ChrootDirectory /var/chroot/
</code></pre>
<p>Exit <code>nano</code>, and restart <code>ssh</code>:</p>
<pre><code>systemctl restart sshd
</code></pre>
<p>The logout of the server altogether:</p>
<pre><code>exit
</code></pre>
<p><strong>Step 8</strong>: Test <code>ssh</code>.</p>
<p>Connect to the Fedora server via <code>ssh</code> as the user <em>vader</em>:</p>
<pre><code>ssh vader@relevant_ip_address
-bash-5.1$ ls
-bash: ls: command not found
exit
</code></pre>
<p>That works as expected. The user <em>vader</em> is now restricted to a special directory and has limited access to the system or to any utilities on that system.</p>
<a class="header" href="print.html#exercise" id="exercise"><h2>Exercise</h2></a>
<p>By using the <code>ldd</code> command, you can add additional binaries for this user. As an exercise, use the <code>ldd</code> command to locate the libraries for the <code>nano</code> editor, and make <code>nano</code> available to the user <em>vader</em> in the chrooted directory.</p>
<a class="header" href="print.html#nano-in-chroot" id="nano-in-chroot"><h3>Nano in chroot</h3></a>
<p>After making Bash available in <code>chroot</code>:</p>
<p>(Side note: Unlike previous instances when I use the <strong>#</strong> sign to indicate a comment, below I'm using the <strong>#</strong> sign below to indicate the root prompt.)</p>
<pre><code># which nano
/usr/bin/nano
# cp /usr/bin/nano /var/chroot/bin/
# ldd /usr/bin/nano
linux-vdso.so.1 (0x00007fff5bdd5000)
  libmagic.so.1 =&gt; /lib64/libmagic.so.1 (0x00007f0ce11a7000)
  libncursesw.so.6 =&gt; /lib64/libncursesw.so.6 (0x00007f0ce1167000)
  libtinfo.so.6 =&gt; /lib64/libtinfo.so.6 (0x00007f0ce1138000)
  libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f0ce0f6e000)
  libz.so.1 =&gt; /lib64/libz.so.1 (0x00007f0ce0f54000)
  libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f0ce0f4d000)
  /lib64/ld-linux-x86-64.so.2 (0x00007f0ce1232000)
# cp /usr/lib64/libmagic.so.1 /var/chroot/lib64/
# cp /usr/lib64/libncursesw.so.6 /var/chroot/lib64/
# cp /usr/lib64/libtinfo.so.6 /var/chroot/lib64/
# cp /usr/lib64/libc.so.6 /var/chroot/lib64/
# cp /usr/lib64/libz.so.1 /var/chroot/lib64/
# cp /usr/lib64/libdl.so.2 /var/chroot/lib64/
# cp /usr/lib64/ld-linux-x86-64.so.2 /var/chroot/lib64/
# chroot /var/chroot/
bash-5.1# nano
Error opening terminal: xterm-256color.
bash-5.1# exit
</code></pre>
<p>To fix this, install <code>ncurses-term</code> and copy over additional files:</p>
<pre><code># dnf install -y ncurses-term
# locate xterm-256color
/usr/share/terminfo/s/screen.xterm-256color
/usr/share/terminfo/x/xterm-256color
# mkdir -p /var/chroot/etc/terminfo/x/
# cp /usr/share/terminfo/x/* /var/chroot/etc/terminfo/x/
# chroot /var/chroot
# nano
</code></pre>
<a class="header" href="print.html#security-firewalls-iptables-and-firewall-cmd" id="security-firewalls-iptables-and-firewall-cmd"><h1>Security: Firewalls <code>iptables</code> and <code>firewall-cmd</code></h1></a>
<p>Netfilter is a part of the kernel that includes a suite of applications
that help manage how packets flow in and out of a server or internet
connected device. <code>iptables</code> is the command line user interface to
<strong>netfilter</strong> and is one of the main firewall applications on many
Linux distributions.</p>
<p>Fedora/RedHat offers a more user friendly interface to <code>iptables</code>
called <code>firewall-cmd</code> that I'll discuss below. Ubuntu offers its own
user friendly interface called <code>ufw</code>. In this lecture, I'll discuss
<code>iptables</code> and <code>firewall-cmd</code>.</p>
<a class="header" href="print.html#iptables" id="iptables"><h2>iptables</h2></a>
<p>There are five predefined tables (<em>operations</em>) and five chains that
come with <code>iptables</code>. Tables define the kinds of operations that you
use to control the firewall and the packets that come in and out of the
system or through a system. The <em>filter</em> and <em>nat</em> tables are the most
commonly used ones.</p>
<p>The five <em>chains</em> are lists of rules that act on packets flowing through
the system. Finally, there are also <em>targets</em>. These are the actions to
be performed on packets. The main targets include <strong>ACCEPT</strong>, <strong>DROP</strong>,
and <strong>RETURN</strong>.</p>
<p>From <code>man iptables</code>, the tables and respective chains include:</p>
<ul>
<li>filter (the default table)
<ul>
<li>INPUT: for packets destined to local sockets</li>
<li>FORWARD: for packets being routed through the box</li>
<li>OUTPUT: for locally-generated packets</li>
</ul>
</li>
<li>nat
<ul>
<li>PREROUTING: for altering packets as soon as they come in</li>
<li>INPUT: for altering packets destined for local sockets</li>
<li>OUTPUT: for altering locally-generated packets</li>
<li>POSTROUTING: for altering packets as they are about to go out</li>
</ul>
</li>
<li>mangle
<ul>
<li>PREROUTING</li>
<li>OUTPUT</li>
<li>INPUT</li>
<li>FORWARD</li>
<li>POSTROUTING</li>
</ul>
</li>
<li>raw
<ul>
<li>PREROUTING</li>
<li>OUTPUT</li>
</ul>
</li>
<li>security
<ul>
<li>INPUT</li>
<li>OUTPUT</li>
<li>FORWARD</li>
</ul>
</li>
</ul>
<p>We'll cover the filter tables and the nat tables.</p>
<a class="header" href="print.html#usage" id="usage"><h3>Usage</h3></a>
<p>First, we'll look at the default parameters for the <em>filter</em> table. You
need to be root to run this commands, or use <code>sudo</code>:</p>
<pre><code>sudo su
# -L: List all rules in the selected chain;
# if no chain is selected, then list all chains; and,
# -v: be verbose
iptables -L -v | less
iptables -L | grep policy
# specify a table
iptables -t filter -L -v
</code></pre>
<a class="header" href="print.html#allow-connections-only-from-subnet" id="allow-connections-only-from-subnet"><h3>Allow connections only from subnet</h3></a>
<p>We can change the firewall to only allow communication on a subnet. Of
course, in order to do this, we need the subnet <strong>Network ID</strong> and the
<strong>CIDR</strong> number:</p>
<pre><code>ip a
</code></pre>
<p>Now that we have the Network ID and the CIDR number, we can set the
firewall (don't follow along here if you're connecting via SSH because
this will end your connection):</p>
<pre><code># comment: first, set policy to drop all incoming, forwarding, and
# outgoing
# packets; this means we're starting from a baseline
iptables --policy INPUT DROP
iptables --policy FORWARD DROP
iptables --policy OUTPUT DROP

# comment: review new policies for the above chains
iptables -L | grep policy

# comment: now accept only input, forwarding, and output from the
# following
# comment: network ranges:

iptables -A INPUT -s 10.163.36.0/24 -j ACCEPT
iptables -A FORWARD -s 10.163.36.0/24 -j ACCEPT
iptables -A OUTPUT -s 10.163.36.0/24 -j ACCEPT
</code></pre>
<p>To test this, we can try to connect to a remote server:</p>
<pre><code>w3m https://www.google.com
</code></pre>
<p>There are lots of examples on the web. Examples from:</p>
<ul>
<li><a href="http://www.tecmint.com/linux-iptables-firewall-rules-examples-commands/">http://www.tecmint.com/linux-iptables-firewall-rules-examples-commands/</a></li>
<li><a href="https://www.howtogeek.com/177621/the-beginners-guide-to-iptables-the-linux-firewall/">https://www.howtogeek.com/177621/the-beginners-guide-to-iptables-the-linux-firewall/</a></li>
</ul>
<a class="header" href="print.html#prerouting" id="prerouting"><h3>PREROUTING</h3></a>
<p>Here is an example where we forward all traffic to port 25 to port 2525.
Here we use the <strong>NAT</strong> table, since NAT is responsible for network
address translation:</p>
<pre><code>iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 25 -j REDIRECT --to-port 2525
</code></pre>
<a class="header" href="print.html#output" id="output"><h3>OUTPUT</h3></a>
<p>Here is an example where we disable outgoing email by disabling the
ports that are commonly associated with email. Of course, this could
be bypassed by using non-standard ports for email, but for out case,
it's a decent demonstration:</p>
<pre><code>## iptables -A OUTPUT -p tcp --dports 25,465,587 -j REJECT
</code></pre>
<a class="header" href="print.html#firewall-cmd" id="firewall-cmd"><h2>firewall-cmd</h2></a>
<p><a href="https://docs.fedoraproject.org/en-US/Fedora/19/html/Security_Guide/sect-Security_Guide-Using_Firewalls.html">firewall-cmd documentation</a></p>
<p><strong>firewalld</strong> is a more user friendly interface to netfilters/iptables
in Red Hat based distros.</p>
<p>In <strong>firewalld</strong>, we use <strong>zones</strong> to manage internet traffic. It is
possible to define custom zones with <strong>firewalld</strong>, but it does come
included with the following predefined zones, and in many cases, these
might be all that we need:</p>
<ul>
<li>DROP : strictest. All incoming network packets are dropped</li>
<li>BLOCK : all very strict</li>
<li>PUBLIC : only selected incoming connections are accepted. Good zone
for web server, email server, etc.</li>
<li>EXTERNAL : external networks (useful for NAT)</li>
<li>DMZ : computers located in DMZ</li>
<li>work : trust most computers in network and accept some services</li>
<li>home : trust most computers in network and accept some services</li>
<li>trusted : trust all machines in network</li>
</ul>
<p>Check if running:</p>
<pre><code>firewall-cmd --state
</code></pre>
<p>Get active zones and interfaces attached to them:</p>
<pre><code>firewall-cmd --get-zones
firewall-cmd --get-default-zone
firewall-cmd --get-active-zones
FedoraServer
  interfaces: enp0s3
</code></pre>
<p>Allow port 22, list ports, remove services by name, add services by name:</p>
<pre><code>firewall-cmd --zone=FedoraServer --add-port=22/tcp
firewall-cmd --zone=FedoraServer --list-ports
firewall-cmd --zone=FedoraServer --remove-service=ssh --permanent
firewall-cmd --zone=FedoraServer --add-service=smtp --permanent
firewall-cmd --reload
</code></pre>
<p>Go into panic mode (drop all incoming/outgoing packets):</p>
<pre><code>firewall-cmd --panic-on
firewall-cmd --panic-off
</code></pre>
<p>To change default zone:</p>
<pre><code>firewall-cmd --permanent --set-default-zone=public
</code></pre>
<a class="header" href="print.html#introduction-3" id="introduction-3"><h1>Introduction</h1></a>
<p>This section shows how to create a LAMP (Linux, Apache2, MySQL, and PHP) server.</p>
<a class="header" href="print.html#installing-apache2" id="installing-apache2"><h1>Installing Apache2</h1></a>
<p>Let's install our first web server.</p>
<p>First, switch to Bridged mode in VirtualBox network settings and refresh
MAC address in VirtualBox.</p>
<a class="header" href="print.html#update-system-first" id="update-system-first"><h2>Update system first</h2></a>
<p>Make sure your machine is up to date before installing Apache2.</p>
<p>Login as root, or switch to the <code>root</code> user, and update the machine:</p>
<pre><code>sudo su
dnf update
</code></pre>
<a class="header" href="print.html#install-httpd" id="install-httpd"><h2>Install <code>httpd</code></h2></a>
<p>Now, that the machine is updated, install Apache2. On distributions that
use a package management system, such as <code>dnf</code> on Fedora and <code>apt</code>
on Ubuntu, we can use those systems to install the relevant software
and dependencies. However, different distributions use different names
for the packages. Fedora refers to the Apache2 package as <code>httpd</code>
while Ubuntu refers to it as <code>Apache2</code>. We can use <code>dnf</code> to search
for the appropriate package name:</p>
<pre><code>dnf search apache | grep &quot;httpd&quot;
</code></pre>
<p>Apache2 is not the only web server available. <a href="https://nginx.org/en/">nginx</a> is another
popular web server, and you should explore or learn about other options
on your own.  For now, let's get some basic info on the <code>httpd</code> package:</p>
<pre><code>dnf info httpd
</code></pre>
<p>Based on the output, and at the time of this writing, it looks like the
<code>httpd</code> package refers to the Apache HTTP Server, version 2.4.51. I
want to highlight this because it's important to know what version of
things are that we're installing, for a couple of reasons at least:</p>
<ol>
<li>
<p>First, although Apache2 has its own dependencies, other packages
will also depend on it. For example, say we wanted to install Drupal or
WordPress, we would first have to install a web server, like Apache2,
and it might be the case that Drupal or WordPress require a certain
minimum version of Apache2.</p>
</li>
<li>
<p>Second, some Linux operating systems focus on stability and thus do
not update to the most recent version of a package instead opting for
the most stable version of the software. The <a href="https://httpd.apache.org/">latest stable release of
Apache2</a> is 2.4.51. But it's not always likely that Fedora or
some other distribution will use that or some newer version until the
next distribution upgrade, for example, from Fedora 33 to Fedora 34.
For now, this is fine, and we can proceed with the install:</p>
</li>
</ol>
<pre><code>dnf -y install httpd
</code></pre>
<a class="header" href="print.html#basic-checks" id="basic-checks"><h2>Basic checks</h2></a>
<p>One of the things that makes Apache2, and some other web servers, powerful
is the library of modules that extend Apache's functionality. We'll come
back to modules soon. For now, we're going to make sure the server is
up and running, configure some basic things, and then create a basic
web site.</p>
<p>To start, let's get some info about Apache2 and make sure it is <em>enabled</em>
and <em>running</em>:</p>
<pre><code>systemctl list-unit-files httpd.service
systemctl enable httpd.service
systemctl list-unit-files httpd.service
systemctl status httpd.service
systemctl start httpd.service
systemctl status httpd.service
</code></pre>
<a class="header" href="print.html#creating-a-web-page" id="creating-a-web-page"><h2>Creating a web page</h2></a>
<p>Now that we have it up and running, let's look at the default web
page. We can use our loopback IP address (aka, <em>localhost</em>) and the
<code>w3m</code> text web browser to view the default page:</p>
<pre><code>dnf install -y w3m
w3m http://127.0.0.1
w3m http://localhost/
</code></pre>
<p>The <code>w3m</code> text-mode browser shows the <strong>Fedora Test Page</strong>. That's
a sign that the default install was successful.</p>
<p>Let's now create our first web page.  To do so, we need to know what
directory that <code>httpd</code> is using to serve websites. This directory is
called the <strong>DocumentRoot</strong> directory. If we read through that <strong>Fedora
Test Page</strong> document, it'll tell us that the default directory is
<code>/var/www/html/</code>. Let's go there and create a webpage with our text
editor of choice:</p>
<pre><code>cd /var/www/html/
nano index.html
</code></pre>
<p>Create a simple HTML page, something like this. Of course, modify the
content to suit your own interests:</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;My first web page using Apache2&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;Welcome&lt;/h1&gt;

&lt;p&gt;Welcome to my web site. I have ever created using Apache2 and Fedora
Linux.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Dr. Burns&lt;/p&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>After you're done, save and close the document. Let's visit our website
again with <code>w3m</code> to see if it works:</p>
<pre><code>w3m http://127.0.0.1
</code></pre>
<p>Let's open the firewall so that outside systems can access this page:</p>
<pre><code>firewall-cmd --list-all
firewall-cmd --get-active-zones
firewall-cmd --zone=FedoraServer --add-service=http
firewall-cmd --zone=FedoraServer --add-service=https
firewall-cmd --runtime-to-permanent
</code></pre>
<a class="header" href="print.html#changing-the-hostname" id="changing-the-hostname"><h2>Changing the <code>hostname</code></h2></a>
<p>The <code>hostname</code> of a system is the label it uses to identify itself
to others (humans) on a (sub)network. If the hostname is on the web (or
the internet), it may also be part of its of the fully qualified domain
name (FQDN), which we studied during the DNS and networking weeks. For
example, on a server identified as <strong>enterprise.example.net</strong>, then
<strong>enterprise</strong>, is the hostname, <strong>example.net</strong> is the domain name,
and <strong>enterprise.example.net</strong> is the fully qualified domain name. If
two computers are on the same subnet, then they can be reachable via
the hostname only, but the domain name is part of the DNS system and is
required for two computers on the broader internet to reach each other.</p>
<p>We're going to check and set the system <code>hostname</code> on our Fedora
(virtual) machines using the <code>hostname</code> and <code>hostnamectl</code> commands:</p>
<p>Check the default hostname:</p>
<pre><code># hostname
localhost.localdomain
</code></pre>
<p>To change the default hostname from <strong>localhost</strong>, use the <code>hostnamectl</code>
command to update the system's hostname per the file. My new hostname
will be <strong>enterprise</strong>.  You can name your hostname whatever you want,
but be sure it's a single word with no punctuation.</p>
<pre><code>hostnamectl set-hostname enterprise
hostname
cat /etc/hostname
</code></pre>
<p>We can access our site by hostname rather than by IP:</p>
<pre><code>w3m http://enterprise
</code></pre>
<a class="header" href="print.html#optional" id="optional"><h3>Optional</h3></a>
<p>After you've completed the above steps, do the following:</p>
<ol>
<li>
<p>On your host machine, find your OS's version of <code>/etc/hosts</code>.</p>
<ul>
<li>Windows instructions: <a href="https://gist.github.com/zenorocha/18b10a14b2deb214dc4ce43a2d2e2992">https://gist.github.com/zenorocha/18b10a14b2deb214dc4ce43a2d2e2992</a>.</li>
<li>macOS users can edit their <code>/etc/hosts</code> file.</li>
</ul>
</li>
<li>
<p>Map your guest IP address (your Fedora IP) to your new hostname:</p>
<pre><code>192.168.4.31 enterprise
</code></pre>
</li>
</ol>
<p>Then, in your Firefox, Chrome, or whatever browser, visit your new
website and replace <strong>enterprise</strong> with the hostname that you chose for
your guest OS:</p>
<pre><code>http://enterprise
</code></pre>
<a class="header" href="print.html#apache2-user-directories" id="apache2-user-directories"><h2>Apache2 User Directories</h2></a>
<p>We can enable Apache2 so that users on our systems can run websites from
their home directories; that is, sites located at:</p>
<ul>
<li><code>$HOME/public_html</code></li>
</ul>
<a class="header" href="print.html#enable-userdir" id="enable-userdir"><h3>Enable userdir</h3></a>
<p>Edit the <code>userdir.conf</code> file.</p>
<pre><code>cd /etc/httpd/conf.d/
nano userdir.conf
</code></pre>
<p>Make the following changes:</p>
<ul>
<li><code>UserDir disabled</code> to <code>UserDir enabled</code></li>
<li>Uncomment line <code>UserDir public_html</code></li>
</ul>
<p>After saving and exiting, restart <code>httpd.service</code>:</p>
<pre><code>systemctl restart httpd.service
</code></pre>
<a class="header" href="print.html#tasks" id="tasks"><h2>Tasks</h2></a>
<ol>
<li>Exit out of root account</li>
<li>Go to your regular user's home directory</li>
<li>Make a directory titled <code>public_html</code> if it doesn't already exist</li>
<li>Set <code>public_html</code> directory permissions to 755:
<ul>
<li><code>chmod 755 public_html</code></li>
</ul>
</li>
<li>Change the user's directory permissions to 701:
<ul>
<li><code>chmod 701 /home/your_user</code></li>
</ul>
</li>
</ol>
<p><strong>SELinux</strong> needs to be configured to allow web access to our home
directories. Specifically, we need to set some SELinux switches. Using
<code>sudo</code> or logging in as <code>root</code>. Make sure you replace <strong>sean</strong>
with your username:</p>
<pre><code>setsebool -P httpd_enable_homedirs true
chcon -R -t httpd_sys_content_t /home/sean/public_html
</code></pre>
<p>Exit out of root if you need to.</p>
<a class="header" href="print.html#test" id="test"><h3>Test</h3></a>
<p>Now test to see if your <code>public_html</code> site is operational by simply
visiting the site. For me, I use the following command:</p>
<pre><code>cd ~/public_html/
echo &quot;&lt;p&gt;Hello world&lt;/p&gt;&quot; &gt;&gt; index.html
w3m http://127.0.0.1/~sean
</code></pre>
<a class="header" href="print.html#installing-and-setting-php-for-apache" id="installing-and-setting-php-for-apache"><h1>Installing and Setting PHP for Apache</h1></a>
<p>PHP is a server-side programming language. Client-side programming
languages, like JavaScript, are handled by the browser, but the PHP
software must be installed on the server and made to work with the Apache
<code>httpd</code> server.</p>
<p>In order for Apache and PHP to work together, we therefore need to
install PHP. Then we'll make some modifications to Apache so that it
defaults to PHP files rather than to HTML files.</p>
<p>To get started, let's work with last week's HTTP machine that we used to
set up Apache and user directories <code>userdir</code>. You can use that machine
or you can clone it to be sure that you have a good backup in case you
need to start over.</p>
<p>Let's find the relevant packages to install. Again, make sure your system
is up to date first.</p>
<pre><code>sudo su
dnf -y upgrade
dnf search php | less
dnf info php
dnf info php-common
dnf install php php-common
</code></pre>
<p>Since we are altering how the Apache <code>httpd</code> service functions, we
need to restart the service. To check and restart services:</p>
<pre><code>systemctl status httpd.service
systemctl restart httpd.service
systemctl status httpd.service
</code></pre>
<p>If all is well, our next task is to see if the Apache <code>httpd</code> service
recognizes PHP. We will proceed to the base HTTP directory, and use
<code>nano</code> to create and open a file called <code>info.php</code>.</p>
<pre><code>cd /var/www/html/
nano info.php
</code></pre>
<p>To make sure that the Apache web server can recognize that PHP is
installed and usable, we can add test code to the <code>info.php</code> file. The
test code will give us information about the version of PHP that we
just installed:</p>
<pre><code>&lt;?php
phpinfo();
?&gt;
</code></pre>
<p>Next, update file ownership for all files in this directory. They should
be owned be the Apache user:</p>
<pre><code>ls -l
chown apache:apache *
ls -l
w3m http://localhost/info.php
</code></pre>
<p>By default, if both an <strong>index.html</strong> file and an <strong>index.php</strong>
file exist in the same directory, the Apache web server will
display the <strong>index.html</strong> file if a user visits the directory (e.g.,
<code>http://example.com/</code> or <code>http://localhost/</code>). So we need to configure
Apache to display <em>index.php</em> files before displaying <em>index.html</em>
files in case both files exist in the same directory:</p>
<pre><code>cd /etc/httpd/conf/
nano httpd.conf
</code></pre>
<p>Change this line:</p>
<pre><code>DirectoryIndex index.html
</code></pre>
<p>To (that is, add <strong>index.php</strong> file to the line and make sure that it comes
before <strong>index.html</strong>. It should look like:</p>
<pre><code>DirectoryIndex index.php index.html
</code></pre>
<p>Since we have modified an Apache configuration file, we should check
that we haven't made a syntax mistake:</p>
<pre><code>apachectl configtest
</code></pre>
<p>If we get an <strong>Syntax Ok</strong> message (you can ignore the FQDN error
message), you can tell Apache to reload its config files:</p>
<pre><code>systemctl reload httpd.service
systemctl restart httpd.service
</code></pre>
<p>Now create a basic PHP page. <code>cd</code> back to the base HTTP directory and
use <code>nano</code> to create and open and <code>index.php</code> file:</p>
<pre><code>cd /var/www/html/
nano index.php
</code></pre>
<p>Add some HTML and PHP that will detect our browser to the <strong>index.php</strong>
(<a href="https://stackoverflow.com/questions/8754080/how-to-get-exact-browser-name-and-version">Source code link</a>):</p>
<pre><code>&lt;p&gt;You are using the following browser to view this site:&lt;/p&gt;

&lt;?php
echo $_SERVER['HTTP_USER_AGENT'] . &quot;\n\n&quot;;

$browser = get_browser(null, true);
print_r($browser);
?&gt;
</code></pre>
<p>Next, save and exit <code>nano</code>, change ownership of the file to Apache,
and view with <code>w3m</code>:</p>
<pre><code>chown apache:apache index.php
w3m http://localhost/
</code></pre>
<p>Of course, since we set up our hostname last week, we can use our hostname
in our URL:</p>
<pre><code>w3m http://enterprise/
</code></pre>
<p><strong>Your goal:</strong></p>
<ul>
<li>Create an <strong>index.php</strong> file in your <strong>userdir</strong></li>
<li>Add some PHP and submit screenshots, like last week, showing both
the code and the output.</li>
</ul>
<p>Test some sample PHP code from here: <a href="https://www.w3schools.com/php/php_syntax.asp">https://www.w3schools.com/php/php_syntax.asp</a></p>
<a class="header" href="print.html#apache2-virtualhosts" id="apache2-virtualhosts"><h1>Apache2 VirtualHosts</h1></a>
<p>In this tutorial, we use VirtualHosts so that our server may support
multiple domain names.</p>
<p>We do this by configuring Apache2 to recognize new DocumentRoot
directories for the additional domain names.</p>
<p>This allows us to serve multiple websites based on the same IP address.</p>
<a class="header" href="print.html#update-os" id="update-os"><h2>Update OS</h2></a>
<p>As always, we need to keep our Fedora installation updated:</p>
<pre><code>dnf upgrade
</code></pre>
<a class="header" href="print.html#create-new-configurations" id="create-new-configurations"><h2>Create new configurations</h2></a>
<p>So far we have learned how to create a main website at the following
document root:</p>
<p><strong>/var/www/html</strong></p>
<p>We have also learned how to enable Apache2 to serve websites from user
directories:</p>
<p><strong>/home/USER/public_html/</strong>.</p>
<p>Websites that are stored at <strong>/var/www/html</strong> can eventually have a
domain name like <strong>example.org</strong> or <strong>biguniversity.edu</strong>. And then
websites at <strong>/home/USER/public_html/</strong> would have URLs like
<code>http://biguniversity.edu/~USER</code>.</p>
<p>The problem with creating a website at the <strong>/var/www/html</strong> DocumentRoot
is that, by default, we can only create the one main site; so either
<strong>example.org</strong> or <strong>biguniversity.edu</strong> but not both.</p>
<p><em>VirtualHosts</em> solve this problem. It allows a single server, with a
single IP address, to host websites linked to multiple domain names,
where all of these sites would have their own DocumentRoot directories
in the <strong>/var/www/html</strong> directory.</p>
<p>To start, we need to revisit the Apache configuration files and add
information about the VirtualHosts that we want to create.</p>
<p>We begin by adding VirtualHost information to the following file:</p>
<pre><code>less /etc/httpd/conf/httpd.conf
</code></pre>
<p>That file includes the following line:</p>
<ul>
<li><code>IncludeOptional conf.d/*.conf</code></li>
</ul>
<p>That option tells the Apache2 service to look for additional configuration
files in the <strong>conf.d/</strong> directory. Per that above line, the configuration
files that we add will need to end with <strong>.conf</strong>.</p>
<p>To get started, we'll name the files after some pretend domain names. I'll
create a domain called <strong>linuxonenterprise.com</strong> and another one called
<strong>websysadmins.com</strong>:</p>
<pre><code>cd /etc/httpd/conf.d/
touch linuxonenterprise.conf
</code></pre>
<p>In the <strong>linuxonenterprise.conf</strong> file, I'll add the following info:</p>
<pre><code>&lt;VirtualHost *:80&gt;
ServerAdmin webmaster@linuxonenterprise.com
DocumentRoot &quot;/var/www/html/linuxonenterprise/&quot;
ServerName linuxonenterprise.com
ServerAlias www.linuxonenterprise.com
ErrorLog &quot;/var/log/httpd/linuxonenterprise.com-error_log&quot;
CustomLog &quot;/var/log/httpd/linuxonenterprise.com-access_log&quot; combined

&lt;Directory &quot;/var/www/html/linuxonenterprise/&quot;&gt;
DirectoryIndex index.php index.html
Options FollowSymLinks
AllowOverride All
Require all granted
&lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre>
<p>Then I'll repeat the process with a new file called <strong>websysadmins.conf</strong>.
To make life easier, I can copy the <strong>linuxonenterprise.conf</strong> to
<strong>websysadmins.conf</strong>.</p>
<pre><code>cp linuxonenterprise.conf websysadmins.conf
</code></pre>
<p>And edit the websysadmins.conf file accordingly by replacing the names
of the site:</p>
<pre><code>&lt;VirtualHost *:80&gt;
ServerAdmin webmaster@websysadmins.com
DocumentRoot &quot;/var/www/html/websysadmins/&quot;
ServerName websysadmins.com
ServerAlias www.websysadmins.com
ErrorLog &quot;/var/log/httpd/websysadmins.com-error_log&quot;
CustomLog &quot;/var/log/httpd/websysadmins.com-access_log&quot; combined

&lt;Directory &quot;/var/www/html/websysadmins/&quot;&gt;
DirectoryIndex index.html index.php
Options FollowSymLinks
AllowOverride All
Require all granted
&lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre>
<p>When done, I'll exit out of my text editor and check the configuration
syntax with one of the following two commands:</p>
<pre><code>httpd -t
apachectl configtest
</code></pre>
<p>You should get an error stating that the sites don't exist at the
<strong>DocumentRoot</strong>, but we'll fix that in a second. For now, you want to get
a <code>Syntax OK</code> message.</p>
<a class="header" href="print.html#creating-the-sites" id="creating-the-sites"><h2>Creating the sites</h2></a>
<p>The above two files tell Apache2 to look for the two websites
in:</p>
<ul>
<li><code>/var/www/html/linuxonenterprise</code></li>
<li><code>/var/www/html/websysadmins</code></li>
</ul>
<p>These are the <strong>DocumentRoot</strong>, i.e., the base directories for our
websites. We need to create those locations. I'll do that now for my
two domains, and I'll use Bash brace expansion to create both at the
same time:</p>
<pre><code>mkdir /var/www/html/{linuxonenterprise,websysadmins}
</code></pre>
<p>The above command creates two directories:</p>
<ul>
<li>/var/www/html/linuxonenterprise</li>
<li>/var/www/html/websysadmins</li>
</ul>
<p>Now create some basic web pages in each domain directory:</p>
<pre><code>cd /var/www/html/linuxonenterprise
echo &quot;&lt;h1&gt;Linux on the Enterprise&lt;/h1&gt;&quot; &gt;&gt; index.html
</code></pre>
<p>Then <code>cd</code> to <strong>websysadmins</strong> from the <strong>linuxonenterprise</strong> directory:</p>
<pre><code>cd ../websysadmins
echo &quot;&lt;h1&gt;Web Sys Admins&lt;/h1&gt;&quot; &gt;&gt; index.html
</code></pre>
<p>And now we have to make sure that the user <code>apache</code> owns
those two directories and all future files in them. We use
the user <code>apache</code> because the main Apache2 configuration file
(<code>/etc/httpd/conf/httpd.conf</code>) has two directives that state that the
names of the User/Group should be <code>apache</code>:</p>
<pre><code>cd .. # to return to the parent directory
chgrp -R apache /var/www/html/
chmod 2775 -R /var/www/html
</code></pre>
<p>By adding our account to the <code>apache</code> group, we can edit these and all
future files without using <code>sudo</code> or becoming <code>root</code>. Here I make user
'sean' part of the <code>apache</code> group:</p>
<pre><code>usermod -a -G apache sean
</code></pre>
<p>This group addition will not go into effect until the user logs out and
logs back in.</p>
<p>You can run <code>ls -ld</code> and <code>ls -l</code> on those directories and files to
confirm that the <code>apache</code> owner owns them. You can also run <code>httpd -t</code>
or <code>apachectl configtest</code> again to confirm that all the syntax is good.</p>
<a class="header" href="print.html#the-hosts-file-etchosts" id="the-hosts-file-etchosts"><h2>The Hosts File: <code>/etc/hosts</code></h2></a>
<p>In order to resolve IP address to domain names, we need some kind of
system that will map these two identifiers to each other. We have already
covered DNS more extensively, but since we're not really creating new
websites for the web, we'll repeat what we did in the previous weeks
with the <code>/etc/hosts</code> file.</p>
<p>The <code>/etc/hosts</code> file is like a basic DNS system and we can use as a
&quot;static table lookup for hostnames&quot; (from <code>man hosts</code>). Let's modify
this so that our IP address is mapped to the our domain names. To do
that, let's add the following line just after the two localhost lines:
(<strong>USE YOUR IP NOT MINE</strong>)</p>
<pre><code>ip a
192.168.4.32
sudo nano /etc/hosts
</code></pre>
<p>Then let's map the IP address to the hostnames that we'll use for the
new websites.  Add the following to <code>/etc/hosts</code>, but replace my IP
with yours and my hostname with one of your own creation:</p>
<pre><code>192.168.4.32 linuxonenterprise.com
192.168.4.32 websysadmins.com
</code></pre>
<p>This is one way to create a kind of intranet that uses actual names instead of
just IP addresses. Say that you have a home network and one of the computers on
your network is running a web server. If you assign a static IP to this
computer using the software on your home router, modify the <code>/etc/hosts</code>
files on each of those three computers to point to that static IP via a domain
name, then you have basic DNS system for your subnet.</p>
<p>Now, let's restart Apache2 and see if we can visit our sites.</p>
<pre><code>systemctl reload httpd.service
systemctl restart httpd.service
w3m http://linuxonenterprise.com
w3m http://websysadmins.com
</code></pre>
<p>Success!</p>
<p>If you change the <code>/etc/hosts</code> file on your <strong>host</strong> machine (i.e., your
laptop) per the instructions in the last lecture, then you should be able to
visit <code>http://linuxonenterprise.com</code> and <code>http://websysadmins.com</code> in your
browser. Here is a snippet of what my <code>/etc/hosts</code> file looks like on my
desktop machine (i.e., my <strong>host</strong> machine):</p>
<pre><code>127.0.0.1      localhost
127.0.1.1      desktop
192.168.4.32    linuxonenterprise.com
192.168.4.32    websysadmins.com
</code></pre>
<a class="header" href="print.html#references" id="references"><h2>References</h2></a>
<ul>
<li><a href="https://httpd.apache.org/docs/2.2/vhosts/name-based.html">Name-based Virtual Host Support</a></li>
<li><a href="https://httpd.apache.org/docs/2.4/vhosts/examples.html">VirtualHost Examples</a></li>
<li><a href="https://www.rosehosting.com/blog/apache-virtual-hosts-on-centos/">How to set up Apache Virtual Hosts on CentOS 7</a></li>
</ul>
<a class="header" href="print.html#mysql-server-administration" id="mysql-server-administration"><h1>MySQL Server Administration</h1></a>
<a class="header" href="print.html#install-and-set-up-mysql" id="install-and-set-up-mysql"><h2>Install and Set Up MySQL</h2></a>
<p>This week we'll learn how to install, setup, secure, and configure
the MySQL relational database so that it works with the Apache2 web
server. First, a point on terms. This week we will be working as</p>
<ul>
<li>the Linux <strong>root</strong> user and as</li>
<li>the MySQL <strong>root</strong> user.</li>
</ul>
<p>These are two different users and accounts. To revisit, in Linux,
there is the <strong>root</strong> user, which has a home directory at <strong>/root</strong>,
and there is also the <strong>root</strong> directory at <strong>/</strong>.</p>
<p>In MySQL and other relational database software, there is also a <strong>root</strong>
user and this user is not the same as the Linux <strong>root</strong> user. It's
important to keep these concepts separate in our heads, and for most
of this transcript, I will refer to the MySQL root user or to the Linux
root user when I'm referring to either one.</p>
<p>First, let's install MySQL Community Server, and then log into the MySQL
shell under the <strong>MySQL root</strong> account.</p>
<pre><code>sudo su
dnf upgrade
dnf search mysql server
dnf info community-mysql-server
dnf info community-mysql-server
dnf install community-mysql-server
systemctl list-unit-files mysqld.service
systemctl status mysqld.service
systemctl start mysqld.service
systemctl enable mysqld.service
systemctl status mysqld.service
systemctl list-unit-files mysqld.service
mysql -u root
</code></pre>
<p>After we have logged in, we need to create a secure password for the
<strong>MySQL root</strong> account. Again, do not confuse the <strong>Linux root</strong> with
the <strong>MySQL root</strong> account. That is, these are two different accounts:
<em>Linux root</em> and <em>MySQL root</em>. Once we have created the password, we
will exit MySQL.</p>
<p>In MySQL, we will create the following root password: &quot;aNewPassword4!&quot;
(withouth the quotes), and then log out. In a production environment,
I would not use a basic password like this, but for our purposes, we
can keep things simple.</p>
<pre><code>mysql&gt; alter user 'root'@'localhost' identified by 'aNewPassword4!';
mysql&gt; \q
</code></pre>
<a class="header" href="print.html#secure-mysql-server" id="secure-mysql-server"><h2>Secure MySQL Server</h2></a>
<p>Now we use a MySQL program called <code>mysql_secure_installation</code> to help
secure the MySQL installation. From the Bash shell and while logged in
as <strong>Linux root</strong>, run the following command, and respond to the command
line prompts as follows:</p>
<pre><code>mysql_secure_installation
Enter password for user root: aNewPassword4!
Validate Password: Y
Password Strength: 0
Change the password for root: N
Remove anonymous users: y
Disallow root login remotely: y
Remove test database: y
Reload privilege tables now: y
</code></pre>
<a class="header" href="print.html#create-and-set-up-a-regular-user-account" id="create-and-set-up-a-regular-user-account"><h2>Create and Set Up a Regular User Account</h2></a>
<p>Now, log back into the MySQL shell as the <strong>MySQL root</strong> user. Here the
command is a bit different from the first one that we used to login to
MySQL because we now have to enter our password:</p>
<pre><code>mysql -u root -p
</code></pre>
<p>In MySQL, we need to create and set up a new account that is not <strong>root</strong>
and therefore does not have <strong>root</strong> privileges:</p>
<pre><code>mysql&gt; create user 'sean'@'localhost' identified by 'an0ldP4ssPhrase!';
</code></pre>
<a class="header" href="print.html#create-a-practice-database" id="create-a-practice-database"><h2>Create a Practice Database</h2></a>
<p>Now let's create a linux-topic database for user 'sean'. This user will
be granted all privileges on this database, including all its tables.
Other than granting all privileges, we could only grant specific
privileges, including: CREATE, DROP, DELETE, INSERT, SELECT, UPDATE, and
GRANT OPTION. Such privileges may be called operations or functions. They
allow MySQL users to use and modify the database:</p>
<p>Don't use this exact command, but the syntax of the <code>grant</code> command
below is this:</p>
<pre><code>grant PRIVILEGE_OPTION on DATABASE.TABLE to 'USER'@'LOCALHOST';
</code></pre>
<p>In practice, we do this:</p>
<pre><code>mysql&gt; create database linuxdb;
mysql&gt; grant all privileges on linuxdb.* to 'sean'@'localhost';
mysql&gt; show databases;
mysql&gt; \q
</code></pre>
<a class="header" href="print.html#logging-in-as-regular-user-and-creating-tables" id="logging-in-as-regular-user-and-creating-tables"><h3>Logging in as Regular User and Creating Tables</h3></a>
<p>Now, we can start doing MySQL work. We've created a new MySQL user named
<strong>sean</strong> and a new database for <strong>sean</strong> that is called <strong>linuxdb</strong>. Let's
logout out of the <strong>Linux root</strong> account and re-login under our regular
Linux account, for me that's <strong>sean</strong>, and create tables and data for
our database:</p>
<pre><code>$ mysql -u sean -p
mysql&gt; show databases;
mysql&gt; use linuxdb;
mysql&gt; create table distributions
    -&gt; (
    -&gt; id int unsigned not null auto_increment,
    -&gt; name varchar(150) not null,
    -&gt; developer varchar(150) not null,
    -&gt; founded date not null,
    -&gt; primary key (id)
    -&gt; );
Query OK, 0 rows affected (0.07 sec)

mysql&gt; show tables;
mysql&gt; describe distributions;
</code></pre>
<p>Congratulations! Now create some records for that table.</p>
<a class="header" href="print.html#adding-records-into-the-table" id="adding-records-into-the-table"><h3>Adding records into the table</h3></a>
<p>We'll use the INSERT command to add records:</p>
<pre><code>mysql&gt; insert into distributions (name, developer, founded) values
    -&gt; ('Debian', 'The Debian Project', '1993-09-15'),
    -&gt; ('Ubuntu', 'Canonical Ltd.', '2004-10-20'),
    -&gt; ('Fedora', 'Fedora Project', '2003-11-06');
Query OK, 3 rows affected (0.06 sec)
Records: 3  Duplicates: 0  Warnings: 0
mysql&gt; select * from distributions;
</code></pre>
<p>Success! Now let's test our table. We will complete the following tasks
to refresh our MySQL knowledge:</p>
<ul>
<li>retrieve some records or parts of records,</li>
<li>delete a record,</li>
<li>alter the table structure so that it will hold more data, and</li>
<li>add a record:</li>
</ul>
<pre><code>mysql&gt; select name from distributions;
mysql&gt; select founded from distributions;
mysql&gt; select name, developer from distributions;
mysql&gt; select name from distributions where name='Debian';
mysql&gt; select developer from distributions where name='Ubuntu';
mysql&gt; # delete from distributions where name='Debian';
mysql&gt; select /* from distributions;
mysql&gt; alter table distributions add packagemanager char(3) after name;
mysql&gt; describe distributions;
mysql&gt; select * from distributions;
mysql&gt; update distributions set packagemanager=&quot;APT&quot; where id=&quot;1&quot;;
mysql&gt; update distributions set packagemanager=&quot;APT&quot; where id=&quot;2&quot;;
mysql&gt; update distributions set packagemanager=&quot;DNF&quot; where id=&quot;3&quot;;
mysql&gt; select * from distributions;
mysql&gt; insert into distributions (name, packagemanager, developer, founded) values
    -&gt; ('CentOS', 'YUM', 'The CentOS Project', '2004-05-14');
mysql&gt; select * from distributions;
mysql&gt; select name, packagemanager from distributions where founded &lt; '2004-01-01';
mysql&gt; select name from distributions order by founded;
mysql&gt; \q
</code></pre>
<a class="header" href="print.html#references-and-read-more" id="references-and-read-more"><h2>References and Read More</h2></a>
<ol>
<li><a href="https://dev.mysql.com/doc/mysql-getting-started/en/">MySQL: Getting Started with MySQL</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-new-user-and-grant-permissions-in-mysql">How to Create a New User and Grant Permissions in MySQL</a></li>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/sql-syntax.html">MySQL: MySQL 5.7 Reference Manual: 13 SQL Statement Syntax</a></li>
</ol>
<a class="header" href="print.html#install-php-and-mysql-support" id="install-php-and-mysql-support"><h2>Install PHP and MySQL Support</h2></a>
<p>The next goal is to complete the connection between PHP and MySQL so
that we can use both for our websites.</p>
<p>First install MySQL support for PHP. We're installing some modules alongside
the basic support. These may or may not be needed, but I'm installing them to
demonstrate some basics. Use <code>dnf info &lt;packagename&gt;</code> to get information
about each package before installing.</p>
<pre><code>sudo su
dnf install php-mysqlnd php-cli php-mbstring php-fpm
systemctl restart mysqld.service
systemctl restart httpd.service
</code></pre>
<a class="header" href="print.html#create-php-scripts" id="create-php-scripts"><h3>Create PHP Scripts</h3></a>
<p>Let's move to the base web directory and create our login file, which
will contain the credentials for our <em>MySQL regular user</em> account. In
the previous week, I demonstrated VirtualHosts. We'll use one of our
virtual domains to connect to our MySQL server with PHP.</p>
<pre><code>cd /var/www/html/linuxonenterprise/
touch login.php
chmod 640 login.php
ls -l login.php
nano login.php
</code></pre>
<p>In the file, add the following credentials, substituting your credentials
where necessary:</p>
<pre><code>&lt;?php // login.php
$db_hostname = &quot;localhost&quot;;
$db_database = &quot;linuxdb&quot;;
$db_username = &quot;sean&quot;;
$db_password = &quot;an0ldP4ssPhrase!&quot;;
?&gt;
</code></pre>
<p>Now, in a separate file, which will be <strong>index.php</strong>, add the following
PHP to test our database connection and return some results:</p>
<pre><code>&lt;html&gt;
&lt;head&gt;&lt;title&gt;MySQL Server Example&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;

&lt;?php

// Load MySQL credentials
require_once 'login.php';

// Establish connection
$conn = mysqli_connect($db_hostname, $db_username, $db_password) or
  die(&quot;Unable to connect&quot;);

// Open database
mysqli_select_db($conn, $db_database) or
  die(&quot;Could not open database '$db_database'&quot;);

// QUERY 1
$query1 = &quot;show tables from $db_database&quot;;
$result1 = mysqli_query($conn, $query1);

$tblcnt = 0;
while($tbl = mysqli_fetch_array($result1)) {
  $tblcnt++;
}

if (!$tblcnt) {
  echo &quot;&lt;p&gt;There are no tables&lt;/p&gt;\n&quot;;
}
else {
  echo &quot;&lt;p&gt;There are $tblcnt tables&lt;/p&gt;\n&quot;;
}

// Free result1 set
mysqli_free_result($result1);

// QUERY 2
$query2 = &quot;select name, developer from distributions&quot;;
$result2 = mysqli_query($conn, $query2);

$row = mysqli_fetch_array($result2, MYSQLI_NUM);
printf (&quot;%s (%s)\n&quot;, $row[0], $row[1]);
echo &quot;&lt;br/&gt;&quot;;

$row = mysqli_fetch_array($result2, MYSQLI_ASSOC);
printf (&quot;%s (%s)\n&quot;, $row[&quot;name&quot;], $row[&quot;developer&quot;]);

// Free result2 set
mysqli_free_result($result2);

// Query 3
$query3 = &quot;select * from distributions&quot;;
$result3 = mysqli_query($conn, $query3);

while($row = $result3-&gt;fetch_assoc()) {
  echo &quot;&lt;p&gt;Owner &quot; . $row[&quot;developer&quot;] . &quot; manages distribution &quot; . $row[&quot;name&quot;] . &quot;.&lt;/p&gt;&quot;;
}

mysqli_free_result($result3);

$result4 = mysqli_query($conn, $query3);
while($row = $result4-&gt;fetch_assoc()) {
  echo &quot;&lt;p&gt;Distribution &quot; . $row[&quot;name&quot;] . &quot; was released on &quot; . $row[&quot;founded&quot;] . &quot;.&lt;/p&gt;&quot;;
}

// Free result4 set
mysqli_free_result($result4);

/* Close connection */
mysqli_close($conn);

?&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>After you save the file and exit the text editor, we need to test the
PHP syntax. If there are any errors in our PHP, these commands will show
the line numbers that are causing errors or leading up to errors. If all
is well with the first command, nothing will output. If all is well with
the second command, HTML should be outputted:</p>
<pre><code>php -f login.php
php -f index.php
chown :apache *php
</code></pre>
<a class="header" href="print.html#check-ip-and-hostname" id="check-ip-and-hostname"><h3>Check IP and Hostname</h3></a>
<p>We want to make sure that <code>/etc/hosts</code> has the correct IP address
for <strong>linuxonenterprise</strong>:</p>
<pre><code>ip a
nano /etc/hosts # update IP address if changed
</code></pre>
<a class="header" href="print.html#tasks-1" id="tasks-1"><h2>Tasks</h2></a>
<p>Copy the <em>login.php</em> and <em>index.php</em> to your <code>public_html</code> directory
(you should still have <em>userdir</em> enabled). Figure out what you need to
change in order to get your script to work there.</p>
<a class="header" href="print.html#references-1" id="references-1"><h2>References</h2></a>
<ul>
<li><a href="https://www.tecmint.com/test-php-mysql-database-connection-using-script/">How to Test PHP MySQL Database Connection Using Script</a></li>
<li><a href="https://www.if-not-true-then-false.com/2010/install-apache-php-on-fedora-centos-red-hat-rhel/">Install Apache/PHP 7.2.12 on Fedora 29/28, CentOS/RHEL 7.5/6.10</a></li>
<li><a href="https://secure.php.net/manual/en/book.mysqli.php">MySQL Improved Extension</a></li>
<li><a href="https://www.w3schools.com/PHP/php_ref_mysqli.asp">PHP 5 MySQLi Functions</a></li>
</ul>
<p>Note: this doesn't seem to be a problem now, but in previous times,
there was an an error with authentication due to an upgrade in MySQL
that hadn't caught up with PHP yet. If so, you might need to login as
<strong>root</strong> to MySQL and run the following command, replacing the relevant
information with your non-root user info:</p>
<pre><code>ALTER USER 'mysqlUsername'@'localhost' IDENTIFIED WITH mysql_native_password BY 'mysqlUsernamePassword';
</code></pre>

                </div>

                <!-- Mobile navigation buttons -->
                

                

            </div>

            

            

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if ($(".fa").css("font-family") !== "FontAwesome") {
                $('<link rel="stylesheet" type="text/css" href="_FontAwesome/css/font-awesome.css">').prependTo('head');
            }
        </script>

        <!-- Livereload script (if served using the cli tool) -->
        

        

        

        
        <script>
            $(document).ready(function() {
                window.print();
            })
        </script>
        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        

    </body>
</html>
