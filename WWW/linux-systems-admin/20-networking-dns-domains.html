<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>DNS and Domain Names - Linux Systems Administration</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Book on entry level Linux systems administration work.">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='jquery.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch store.js from local - TODO add CDN when 2.x.x is available on cdnjs -->
        <script src="store.js"></script>

    </head>
    <body class="light">
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = store.get('mdbook-theme');
            if (theme === null || theme === undefined) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = store.get('mdbook-sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter"><li><a href="p1-linux-sysadmin.html"><strong>1.</strong> Linux Systems Administration</a></li><li><ul class="section"><li><a href="01-what-is-linux.html"><strong>1.1.</strong> What is Linux?</a></li><li><a href="02-what-is-sysadmin.html"><strong>1.2.</strong> What is Systems Administration?</a></li><li><a href="03-history-linux-unix.html"><strong>1.3.</strong> History of Unix and Linux</a></li></ul></li><li><a href="p2-the-command-line.html"><strong>2.</strong> Learning the Command Line</a></li><li><ul class="section"><li><a href="04-quick-ssh-connect.html"><strong>2.1.</strong> Connect to a Remote Server</a></li><li><a href="05-the-linux-filesystem.html"><strong>2.2.</strong> The Linux Filesystem</a></li><li><a href="06-files-and-directories.html"><strong>2.3.</strong> Files and Directories</a></li><li><a href="07-file-attributes.html"><strong>2.4.</strong> File Attributes</a></li><li><a href="08-text-processing-part-1.html"><strong>2.5.</strong> Text Processing, Part 1</a></li><li><a href="09-text-processing-part-2.html"><strong>2.6.</strong> Text Processing, Part 2</a></li><li><a href="10-text-editors.html"><strong>2.7.</strong> Text Editors</a></li><li><a href="11-revisiting-paths.html"><strong>2.8.</strong> Revisiting Paths</a></li><li><a href="12-bash-scripting.html"><strong>2.9.</strong> Bash Scripting</a></li><li><a href="13-regular-expressions.html"><strong>2.10.</strong> Regular Expressions</a></li></ul></li><li><a href="p3-using-gcloud.html"><strong>3.</strong> Using Google Cloud (gcloud)</a></li><li><ul class="section"><li><a href="14-using-gcloud.html"><strong>3.1.</strong> Using gcloud for Virtual Machines</a></li><li><a href="15-expanding-storage.html"><strong>3.2.</strong> Expanding Storage</a></li></ul></li><li><a href="p4-managing-the-system.html"><strong>4.</strong> Managing the System</a></li><li><ul class="section"><li><a href="16-managing-users-groups.html"><strong>4.1.</strong> Managing Users and Groups</a></li><li><a href="17-systemd.html"><strong>4.2.</strong> systemd</a></li><li><a href="18-using-apt.html"><strong>4.3.</strong> Using APT to Manage Software</a></li></ul></li><li><a href="p5-networking-security.html"><strong>5.</strong> Networking and Security</a></li><li><ul class="section"><li><a href="19-tcip-networking.html"><strong>5.1.</strong> TCIP Networking</a></li><li><a href="20-networking-dns-domains.html" class="active"><strong>5.2.</strong> DNS and Domain Names</a></li><li><a href="21-security-chroot.html"><strong>5.3.</strong> Security and chroot</a></li><li><a href="22-security-firewall.html"><strong>5.4.</strong> Security and Firewalls</a></li><li><a href="23-backups.html"><strong>5.5.</strong> Backups</a></li></ul></li><li><a href="p6-lamp.html"><strong>6.</strong> Creating a LAMP Server</a></li><li><ul class="section"><li><a href="24-httpd-apache.html"><strong>6.1.</strong> Apache2 Web Server</a></li><li><a href="25-httpd-php.html"><strong>6.2.</strong> Apache2 and PHP</a></li><li><a href="26-httpd-virtualhosts.html"><strong>6.3.</strong> Apache2 and Virtual Hosts</a></li><li><a href="27-httpd-mariadb.html"><strong>6.4.</strong> Apache2 and MariaDB</a></li></ul></li></ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page" tabindex="-1">
                
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars" title="Toggle sidebar"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush" title="Change theme"></i>
                    </div>

                    <h1 class="menu-title">Linux Systems Administration</h1>

                    <div class="right-buttons">
                        <a href="print.html">
                            <i id="print-button" class="fa fa-print" title="Print this book"></i>
                        </a>
                    </div>
                </div>

                <div id="content" class="content">
                    <a class="header" href="20-networking-dns-domains.html#introduction-to-dns-the-domain-name-system" id="introduction-to-dns-the-domain-name-system"><h1>Introduction to DNS, the Domain Name System</h1></a>
<a class="header" href="20-networking-dns-domains.html#dns-intro-videos" id="dns-intro-videos"><h2>DNS Intro Videos</h2></a>
<p>Two helpful YouTube videos. The first one provides an overview of the DNS system:</p>
<p><a href="https://www.youtube.com/watch?v=mpQZVYPuDGU">How a DNS Server (Domain Name System) works</a></p>
<p>The second video illustrates how to use a GUI to create and manage DNS records.</p>
<p><a href="https://www.youtube.com/watch?v=cwT82ibOM2Q">DNS Records</a></p>
<p>Here is a nice intro to recursive DNS:</p>
<p><a href="https://www.cloudflare.com/learning/dns/what-is-recursive-dns/">https://www.cloudflare.com/learning/dns/what-is-recursive-dns/</a></p>
<a class="header" href="20-networking-dns-domains.html#fqdn-the-fully-qualified-domain-name" id="fqdn-the-fully-qualified-domain-name"><h2>FQDN: The Fully Qualified Domain Name</h2></a>
<p>The structure of the domain name system is like the structure of the UNIX/Linux file hierarchy; that is, it is like an inverted tree.</p>
<p>The fully qualified domain name includes a period at the end of the top-level domain. Your browser is able to supply that dot since we often don't use it when typing website addresses.</p>
<p>Thus, for Google's main page, the FQDN is:</p>
<p>FQDN: www.google.com.</p>
<p>And the parts include:</p>
<pre><code>.           root domain
com         top-level domain
google.     second-level domain
www.        third-level domain
</code></pre>
<p>This is important to know so that you understand how the <strong>Domain Name System</strong> works and which DNS servers are responsible for their part of the network.</p>
<a class="header" href="20-networking-dns-domains.html#root-domain" id="root-domain"><h3>Root domain</h3></a>
<p>The root domain is managed by root name servers. These servers are listed on the <a href="https://www.iana.org/domains/root/servers">IANA</a>, the Internet Assigned Numbers Authority, website, but are managed by multiple operators. The root servers manage the root domain, alternatively referred to as the zone, or the <code>.</code> at the end of the <code>.com.</code>, <code>.edu.</code>, etc.</p>
<a class="header" href="20-networking-dns-domains.html#alternative-dns-root-systems" id="alternative-dns-root-systems"><h4>Alternative DNS root systems</h4></a>
<p>Aside: It's possible to have alternate internets by using outside root name servers. This is not common, but it happens. Read about a few of them here:</p>
<ul>
<li>sdf: <a href="https://web.archive.org/web/20081121061730/http://www.smtpnic.org/">https://web.archive.org/web/20081121061730/http://www.smtpnic.org/</a></li>
<li>opennic: <a href="https://www.opennicproject.org/">https://www.opennicproject.org/</a></li>
<li>alternic: <a href="https://en.wikipedia.org/wiki/AlterNIC">https://en.wikipedia.org/wiki/AlterNIC</a></li>
</ul>
<p>Russia, as an example, has threated to use it's own alternate internet based on a different DNS root system. This would essentially create a large, second internet. You can read about in this <a href="https://spectrum.ieee.org/tech-talk/telecom/internet/could-russia-really-build-its-own-alternate-internet">IEEE Spectrum article</a>.</p>
<a class="header" href="20-networking-dns-domains.html#top-level-domain-tld" id="top-level-domain-tld"><h3>Top level domain (TLD)</h3></a>
<p>We are all familiar with top level domains. Specific examples include:</p>
<ul>
<li>generic names: .org, .com, .net, .mil, .gov</li>
<li>and country code-based: .us, .uk, .ca</li>
</ul>
<p>We can download a list of those top level names from IANA, and get a total count:</p>
<pre><code>wget https://data.iana.org/TLD/tlds-alpha-by-domain.txt
sed '1d' tlds-alpha-by-domain.txt | wc -l
1495
</code></pre>
<a class="header" href="20-networking-dns-domains.html#second-level-domain-names" id="second-level-domain-names"><h3>Second-level domain names</h3></a>
<p>In the Google example, the second level domain is <strong>google</strong>. Other examples include: <strong>redhat</strong> in <strong>redhat.com</strong> and <strong>debian</strong> in <strong>debian.org</strong>. <a href="https://www.amazon.com/Linux-Administration-Beginners-Guide-Seventh/dp/0071845364">Soyinka, (2016)</a> refers to this part of the FQDN as that which makes up the &quot;organizational boundary of the namespace&quot; (p. 425).</p>
<a class="header" href="20-networking-dns-domains.html#third-level-domain-names--hostnames--subdomains" id="third-level-domain-names--hostnames--subdomains"><h3>Third-level domain names / hostnames / subdomains</h3></a>
<p>When you've purchased (leased) a top and second level domain like getfedora.org, you can choose whether you employ third level domains. For example: www is a third level domain. If you owned <code>example.org</code>, you could also have <code>www.example.org</code> resolve to a different location, or, <code>www.example.org</code> could resolve to the second-level domain itself. That is:</p>
<ul>
<li>www.debian.org can point to debian.org</li>
</ul>
<p>But it could also point to a separate server, such that <strong>debian.org</strong> and <strong>www.debian.org</strong> would be two separate servers with two separate websites or services. Although this is not common with third-level domains that start with <strong>www</strong>, it is common with others.</p>
<p>For example, with hostnames that are not <code>www</code>:</p>
<ul>
<li>google.com resolves to www.google.com</li>
<li>google.com does not resolve to:
<ul>
<li>drive.google.com, or</li>
<li>maps.google.com, or</li>
<li>mail.google.com</li>
</ul>
</li>
</ul>
<p>This is because those other three provide different, but specific services.</p>
<a class="header" href="20-networking-dns-domains.html#dns-paths" id="dns-paths"><h2>DNS Paths</h2></a>
<p>Recursive DNS is the first DNS server to be queried in the DNS system. This is the resolver server in the first video above. This server queries itself (recursive) to check if the domain to IP mapping has been cached in its system.</p>
<p>If it hasn't been cached, then the DNS query is <em>forwarded</em> to a root server and and so forth down the line.</p>
<p>We can use the <code>dig</code> command to query the non-cached DNS paths. Let's say we want to follow the DNS path for <strong>google.com</strong>, then we can start by querying any <a href="https://www.iana.org/domains/root/servers">root server</a>. In the output, we wan to pay attention to the QUERY field, the ANSWER field, and the Authority Section:</p>
<pre><code>dig @198.41.0.4 google.com 
</code></pre>
<p>The root servers only know about top level domains, and in this case, that's the <code>com.</code> domain. Fortunately, it lists some authoritative TLD servers and their IP addresses, and we can query one of those next:</p>
<pre><code>dig @192.12.94.30 google.com
</code></pre>
<p>Now we know something about the TLD. Here we still don't know the full path, but it does tell us that for <strong>google.com</strong>, we need to query one of Google's name servers:</p>
<pre><code>dig @216.239.34.10 google.com
</code></pre>
<p>And now we finally get our answer, which is that <strong>google.com</strong> resolves to 142.250.190.78, at least for me and at this instant.</p>
<a class="header" href="20-networking-dns-domains.html#dns-record-types" id="dns-record-types"><h3>DNS Record types</h3></a>
<ul>
<li>SOA:    Start of Authority: describes the site's DNS entries
<ul>
<li>IN:     Internet Record</li>
</ul>
</li>
<li>NS:     Name Server: state which name server provides DNS resolution</li>
<li>A:      Address records: provides mapping hostname to IPv4 address</li>
<li>AAAA:   Address records: provides mapping hostname to IPv6 address</li>
</ul>
<pre><code>dig google.com
google.com.     IN      A       142.251.32.78
</code></pre>
<ul>
<li>PTR:    Pointer Record: provides mapping from IP Address to Hostname</li>
<li>MX:     Mail exchanger: the MX record maps your email server.</li>
<li>CNAME:  Canonical name: used so that a domain name may act as an alias for another domain name. Thus, say someone visits www.example.org, but if no subdomain is set up for www, then the CNAME can point to example.org.</li>
</ul>
<a class="header" href="20-networking-dns-domains.html#dns-toolbox" id="dns-toolbox"><h3>DNS Toolbox</h3></a>
<p>It's important to be able to troubleshoot DNS issues. To do that, we have a few utilities available. Here are examples and you should read the <code>man</code> pages for each one:</p>
<p><code>host</code>: resolve hostnames to IP Address; or IP addresses to hostnames</p>
<pre><code>man -f host
host (1) - DNS lookup utility
host uky.edu
host 128.163.35.46
host -t MX uky.edu
host -t MX dropbox.com
host -t MX netflix.com
host -t MX wikipedia.org
</code></pre>
<p><code>dig</code>: domain information gopher -- get info on DNS servers</p>
<pre><code>man -f dig
dig (1) - DNS lookup utility
dig uky.edu
dig uky.edu MX
dig www.uky.edu CNAME
</code></pre>
<p><code>nslookup</code>: query internet name servers</p>
<pre><code>man -f nslookup
nslookup (1) - query Internet name servers interactively
nslookup
&gt; uky.edu
&gt; yahoo.com
&gt; exit
</code></pre>
<p><code>whois</code>: determine ownership of a domain</p>
<pre><code>man -f whois
whois (1) - client for the whois directory services
whois uky.edu | less
</code></pre>
<p><code>resolve.conf</code>: local resolver info; what's your DNS info</p>
<pre><code>man -f  resolv.conf
resolv.conf (5) - resolver configuration file
cat /etc/resolv.conf
resolvectl status
</code></pre>

                </div>

                <!-- Mobile navigation buttons -->
                
                    <a rel="prev" href="19-tcip-networking.html" class="mobile-nav-chapters previous" title="Previous chapter">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="21-security-chroot.html" class="mobile-nav-chapters next" title="Next chapter">
                        <i class="fa fa-angle-right"></i>
                    </a>
                

            </div>

            
                <a href="19-tcip-networking.html" class="nav-chapters previous" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-left"></i>
                </a>
            

            
                <a href="21-security-chroot.html" class="nav-chapters next" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-right"></i>
                </a>
            

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if ($(".fa").css("font-family") !== "FontAwesome") {
                $('<link rel="stylesheet" type="text/css" href="_FontAwesome/css/font-awesome.css">').prependTo('head');
            }
        </script>

        <!-- Livereload script (if served using the cli tool) -->
        

        

        

        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        

    </body>
</html>
